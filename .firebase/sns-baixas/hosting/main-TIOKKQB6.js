var rF=Object.defineProperty,sF=Object.defineProperties;var oF=Object.getOwnPropertyDescriptors;var KC=Object.getOwnPropertySymbols,aF=Object.getPrototypeOf,cF=Object.prototype.hasOwnProperty,lF=Object.prototype.propertyIsEnumerable,uF=Reflect.get;var QC=(n,e,t)=>e in n?rF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$=(n,e)=>{for(var t in e||={})cF.call(e,t)&&QC(n,t,e[t]);if(KC)for(var t of KC(e))lF.call(e,t)&&QC(n,t,e[t]);return n},X=(n,e)=>sF(n,oF(e));var Vr=(n,e,t)=>uF(aF(n),t,e);var E=(n,e,t)=>new Promise((i,r)=>{var s=c=>{try{a(t.next(c))}catch(l){r(l)}},o=c=>{try{a(t.throw(c))}catch(l){r(l)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});function YC(n,e){return Object.is(n,e)}var wt=null,Md=!1,Ad=1,Yi=Symbol("SIGNAL");function De(n){let e=wt;return wt=n,e}function ZC(){return wt}var il={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Gm(n){if(Md)throw new Error("");if(wt===null)return;wt.consumerOnSignalRead(n);let e=wt.nextProducerIndex++;if(Nd(wt),e<wt.producerNode.length&&wt.producerNode[e]!==n&&nl(wt)){let t=wt.producerNode[e];Od(t,wt.producerIndexOfThis[e])}wt.producerNode[e]!==n&&(wt.producerNode[e]=n,wt.producerIndexOfThis[e]=nl(wt)?tD(n,wt,e):0),wt.producerLastReadVersion[e]=n.version}function dF(){Ad++}function JC(n){if(!(nl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ad)){if(!n.producerMustRecompute(n)&&!Qm(n)){n.dirty=!1,n.lastCleanEpoch=Ad;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Ad}}function XC(n){if(n.liveConsumerNode===void 0)return;let e=Md;Md=!0;try{for(let t of n.liveConsumerNode)t.dirty||hF(t)}finally{Md=e}}function eD(){return wt?.consumerAllowSignalWrites!==!1}function hF(n){n.dirty=!0,XC(n),n.consumerMarkedDirty?.(n)}function Rd(n){return n&&(n.nextProducerIndex=0),De(n)}function Km(n,e){if(De(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(nl(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Od(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Qm(n){Nd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(JC(t),i!==t.version))return!0}return!1}function Ym(n){if(Nd(n),nl(n))for(let e=0;e<n.producerNode.length;e++)Od(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function tD(n,e,t){if(nD(n),n.liveConsumerNode.length===0&&iD(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=tD(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Od(n,e){if(nD(n),n.liveConsumerNode.length===1&&iD(n))for(let i=0;i<n.producerNode.length;i++)Od(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Nd(r),r.producerIndexOfThis[i]=e}}function nl(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Nd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function nD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function iD(n){return n.producerNode!==void 0}function rD(n){let e=Object.create(fF);e.computation=n;let t=()=>{if(JC(e),Gm(e),e.value===Pd)throw e.error;return e.value};return t[Yi]=e,t}var qm=Symbol("UNSET"),Wm=Symbol("COMPUTING"),Pd=Symbol("ERRORED"),fF=X($({},il),{value:qm,dirty:!0,error:null,equal:YC,producerMustRecompute(n){return n.value===qm||n.value===Wm},producerRecomputeValue(n){if(n.value===Wm)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Wm;let t=Rd(n),i;try{i=n.computation()}catch(r){i=Pd,n.error=r}finally{Km(n,t)}if(e!==qm&&e!==Pd&&i!==Pd&&n.equal(e,i)){n.value=e;return}n.value=i,n.version++}});function pF(){throw new Error}var sD=pF;function oD(){sD()}function aD(n){sD=n}var gF=null;function cD(n){let e=Object.create(uD);e.value=n;let t=()=>(Gm(e),e.value);return t[Yi]=e,t}function Zm(n,e){eD()||oD(),n.equal(n.value,e)||(n.value=e,mF(n))}function lD(n,e){eD()||oD(),Zm(n,e(n.value))}var uD=X($({},il),{equal:YC,value:void 0});function mF(n){n.version++,dF(),XC(n),gF?.()}function se(n){return typeof n=="function"}function Zo(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var kd=Zo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ks(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var st=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(se(i))try{i()}catch(s){e=s instanceof kd?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{dD(s)}catch(o){e=e??[],o instanceof kd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new kd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)dD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ks(t,e)}remove(e){let{_finalizers:t}=this;t&&ks(t,e),e instanceof n&&e._removeParent(this)}};st.EMPTY=(()=>{let n=new st;return n.closed=!0,n})();var Jm=st.EMPTY;function Fd(n){return n instanceof st||n&&"closed"in n&&se(n.remove)&&se(n.add)&&se(n.unsubscribe)}function dD(n){se(n)?n():n.unsubscribe()}var Hn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Jo={setTimeout(n,e,...t){let{delegate:i}=Jo;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Jo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ld(n){Jo.setTimeout(()=>{let{onUnhandledError:e}=Hn;if(e)e(n);else throw n})}function rl(){}var hD=Xm("C",void 0,void 0);function fD(n){return Xm("E",void 0,n)}function pD(n){return Xm("N",n,void 0)}function Xm(n,e,t){return{kind:n,value:e,error:t}}var Fs=null;function Xo(n){if(Hn.useDeprecatedSynchronousErrorHandling){let e=!Fs;if(e&&(Fs={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=Fs;if(Fs=null,t)throw i}}else n()}function gD(n){Hn.useDeprecatedSynchronousErrorHandling&&Fs&&(Fs.errorThrown=!0,Fs.error=n)}var Ls=class extends st{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Fd(e)&&e.add(this)):this.destination=_F}static create(e,t,i){return new ea(e,t,i)}next(e){this.isStopped?ty(pD(e),this):this._next(e)}error(e){this.isStopped?ty(fD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ty(hD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},yF=Function.prototype.bind;function ey(n,e){return yF.call(n,e)}var ny=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Vd(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Vd(i)}else Vd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Vd(t)}}},ea=class extends Ls{constructor(e,t,i){super();let r;if(se(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Hn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&ey(e.next,s),error:e.error&&ey(e.error,s),complete:e.complete&&ey(e.complete,s)}):r=e}this.destination=new ny(r)}};function Vd(n){Hn.useDeprecatedSynchronousErrorHandling?gD(n):Ld(n)}function vF(n){throw n}function ty(n,e){let{onStoppedNotification:t}=Hn;t&&Jo.setTimeout(()=>t(n,e))}var _F={closed:!0,next:rl,error:vF,complete:rl};var ta=typeof Symbol=="function"&&Symbol.observable||"@@observable";function gn(n){return n}function jd(...n){return iy(n)}function iy(n){return n.length===0?gn:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var pe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let s=wF(t)?t:new ea(t,i,r);return Xo(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=mD(i),new i((r,s)=>{let o=new ea({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[ta](){return this}pipe(...t){return iy(t)(this)}toPromise(t){return t=mD(t),new t((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function mD(n){var e;return(e=n??Hn.Promise)!==null&&e!==void 0?e:Promise}function bF(n){return n&&se(n.next)&&se(n.error)&&se(n.complete)}function wF(n){return n&&n instanceof Ls||bF(n)&&Fd(n)}function ry(n){return se(n?.lift)}function we(n){return e=>{if(ry(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ye(n,e,t,i,r){return new sy(n,e,t,i,r)}var sy=class extends Ls{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function na(){return we((n,e)=>{let t=null;n._refCount++;let i=ye(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var ia=class extends pe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ry(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new st;let t=this.getSubject();e.add(this.source.subscribe(ye(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=st.EMPTY)}return e}refCount(){return na()(this)}};var yD=Zo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var At=(()=>{class n extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Bd(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new yD}next(t){Xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:s}=this;return i||r?Jm:(this.currentObservers=null,s.push(t),new st(()=>{this.currentObservers=null,ks(s,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){let t=new pe;return t.source=this,t}}return n.create=(e,t)=>new Bd(e,t),n})(),Bd=class extends At{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:Jm}};var It=class extends At{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var oy={now(){return(oy.delegate||Date).now()},delegate:void 0};var Ud=class extends st{constructor(e,t){super()}schedule(e,t=0){return this}};var sl={setInterval(n,e,...t){let{delegate:i}=sl;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=sl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ra=class extends Ud{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return sl.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&sl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ks(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var sa=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};sa.now=oy.now;var oa=class extends sa{constructor(e,t=sa.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var ay=new oa(ra);var $d=class extends ra{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var zd=class extends oa{};var cy=new zd($d);var mn=new pe(n=>n.complete());function vD(n){return n&&se(n.schedule)}function _D(n){return n[n.length-1]}function Hd(n){return se(_D(n))?n.pop():void 0}function jr(n){return vD(_D(n))?n.pop():void 0}function ly(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function wD(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(i.next(d))}catch(h){o(h)}}function c(d){try{l(i.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):r(d.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}function bD(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vs(n){return this instanceof Vs?(this.v=n,this):new Vs(n)}function ID(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(g){return function(y){return Promise.resolve(y).then(g,h)}}function a(g,y){i[g]&&(r[g]=function(v){return new Promise(function(_,T){s.push([g,v,_,T])>1||c(g,v)})},y&&(r[g]=y(r[g])))}function c(g,y){try{l(i[g](y))}catch(v){p(s[0][3],v)}}function l(g){g.value instanceof Vs?Promise.resolve(g.value.v).then(d,h):p(s[0][2],g)}function d(g){c("next",g)}function h(g){c("throw",g)}function p(g,y){g(y),s.shift(),s.length&&c(s[0][0],s[0][1])}}function ED(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof bD=="function"?bD(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),r(a,c,o.done,o.value)})}}function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var qd=n=>n&&typeof n.length=="number"&&typeof n!="function";function Wd(n){return se(n?.then)}function Gd(n){return se(n[ta])}function Kd(n){return Symbol.asyncIterator&&se(n?.[Symbol.asyncIterator])}function Qd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function IF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Yd=IF();function Zd(n){return se(n?.[Yd])}function Jd(n){return ID(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield Vs(t.read());if(r)return yield Vs(void 0);yield yield Vs(i)}}finally{t.releaseLock()}})}function Xd(n){return se(n?.getReader)}function dt(n){if(n instanceof pe)return n;if(n!=null){if(Gd(n))return EF(n);if(qd(n))return CF(n);if(Wd(n))return DF(n);if(Kd(n))return CD(n);if(Zd(n))return SF(n);if(Xd(n))return xF(n)}throw Qd(n)}function EF(n){return new pe(e=>{let t=n[ta]();if(se(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function CF(n){return new pe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function DF(n){return new pe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ld)})}function SF(n){return new pe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function CD(n){return new pe(e=>{TF(n,e).catch(t=>e.error(t))})}function xF(n){return CD(Jd(n))}function TF(n,e){var t,i,r,s;return wD(this,void 0,void 0,function*(){try{for(t=ED(n);i=yield t.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})}function on(n,e,t,i=0,r=!1){let s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Br(n,e=0){return we((t,i)=>{t.subscribe(ye(i,r=>on(i,n,()=>i.next(r),e),()=>on(i,n,()=>i.complete(),e),r=>on(i,n,()=>i.error(r),e)))})}function Ur(n,e=0){return we((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function DD(n,e){return dt(n).pipe(Ur(e),Br(e))}function SD(n,e){return dt(n).pipe(Ur(e),Br(e))}function xD(n,e){return new pe(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function TD(n,e){return new pe(t=>{let i;return on(t,e,()=>{i=n[Yd](),on(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){t.error(o);return}s?t.complete():t.next(r)},0,!0)}),()=>se(i?.return)&&i.return()})}function eh(n,e){if(!n)throw new Error("Iterable cannot be null");return new pe(t=>{on(t,e,()=>{let i=n[Symbol.asyncIterator]();on(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function MD(n,e){return eh(Jd(n),e)}function AD(n,e){if(n!=null){if(Gd(n))return DD(n,e);if(qd(n))return xD(n,e);if(Wd(n))return SD(n,e);if(Kd(n))return eh(n,e);if(Zd(n))return TD(n,e);if(Xd(n))return MD(n,e)}throw Qd(n)}function Xe(n,e){return e?AD(n,e):dt(n)}function oe(...n){let e=jr(n);return Xe(n,e)}function aa(n,e){let t=se(n)?n:()=>n,i=r=>r.error(t());return new pe(e?r=>e.schedule(i,0,r):i)}function uy(n){return!!n&&(n instanceof pe||se(n.lift)&&se(n.subscribe))}var Zi=Zo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function de(n,e){return we((t,i)=>{let r=0;t.subscribe(ye(i,s=>{i.next(n.call(e,s,r++))}))})}var{isArray:MF}=Array;function AF(n,e){return MF(e)?n(...e):n(e)}function th(n){return de(e=>AF(n,e))}var{isArray:PF}=Array,{getPrototypeOf:RF,prototype:OF,keys:NF}=Object;function nh(n){if(n.length===1){let e=n[0];if(PF(e))return{args:e,keys:null};if(kF(e)){let t=NF(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function kF(n){return n&&typeof n=="object"&&RF(n)===OF}function ih(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function rh(...n){let e=jr(n),t=Hd(n),{args:i,keys:r}=nh(n);if(i.length===0)return Xe([],e);let s=new pe(FF(i,e,r?o=>ih(r,o):gn));return t?s.pipe(th(t)):s}function FF(n,e,t=gn){return i=>{PD(e,()=>{let{length:r}=n,s=new Array(r),o=r,a=r;for(let c=0;c<r;c++)PD(e,()=>{let l=Xe(n[c],e),d=!1;l.subscribe(ye(i,h=>{s[c]=h,d||(d=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function PD(n,e,t){n?on(t,n,e):e()}function RD(n,e,t,i,r,s,o,a){let c=[],l=0,d=0,h=!1,p=()=>{h&&!c.length&&!l&&e.complete()},g=v=>l<i?y(v):c.push(v),y=v=>{s&&e.next(v),l++;let _=!1;dt(t(v,d++)).subscribe(ye(e,T=>{r?.(T),s?g(T):e.next(T)},()=>{_=!0},void 0,()=>{if(_)try{for(l--;c.length&&l<i;){let T=c.shift();o?on(e,o,()=>y(T)):y(T)}p()}catch(T){e.error(T)}}))};return n.subscribe(ye(e,g,()=>{h=!0,p()})),()=>{a?.()}}function Et(n,e,t=1/0){return se(e)?Et((i,r)=>de((s,o)=>e(i,s,r,o))(dt(n(i,r))),t):(typeof e=="number"&&(t=e),we((i,r)=>RD(i,r,n,t)))}function dy(n=1/0){return Et(gn,n)}function OD(){return dy(1)}function ca(...n){return OD()(Xe(n,jr(n)))}function sh(n){return new pe(e=>{dt(n()).subscribe(e)})}function hy(...n){let e=Hd(n),{args:t,keys:i}=nh(n),r=new pe(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let h=!1;dt(t[d]).subscribe(ye(s,p=>{h||(h=!0,l--),a[d]=p},()=>c--,void 0,()=>{(!c||!h)&&(l||s.next(i?ih(i,a):a),s.complete())}))}});return e?r.pipe(th(e)):r}function Dn(n,e){return we((t,i)=>{let r=0;t.subscribe(ye(i,s=>n.call(e,s,r++)&&i.next(s)))})}function $r(n){return we((e,t)=>{let i=null,r=!1,s;i=e.subscribe(ye(t,void 0,void 0,o=>{s=dt(n(o,$r(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function ND(n,e,t,i,r){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(ye(o,d=>{let h=l++;c=a?n(c,d,h):(a=!0,d),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}function la(n,e){return se(e)?Et(n,e,1):Et(n,1)}function zr(n){return we((e,t)=>{let i=!1;e.subscribe(ye(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Ji(n){return n<=0?()=>mn:we((e,t)=>{let i=0;e.subscribe(ye(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function fy(n){return de(()=>n)}function oh(n=LF){return we((e,t)=>{let i=!1;e.subscribe(ye(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function LF(){return new Zi}function ol(n){return we((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function di(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Dn((r,s)=>n(r,s,i)):gn,Ji(1),t?zr(e):oh(()=>new Zi))}function ua(n){return n<=0?()=>mn:we((e,t)=>{let i=[];e.subscribe(ye(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function py(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Dn((r,s)=>n(r,s,i)):gn,ua(1),t?zr(e):oh(()=>new Zi))}function ah(n,e){return we(ND(n,e,arguments.length>=2,!0))}function ch(...n){let e=jr(n);return we((t,i)=>{(e?ca(n,t,e):ca(n,t)).subscribe(i)})}function qn(n,e){return we((t,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();t.subscribe(ye(i,c=>{r?.unsubscribe();let l=0,d=s++;dt(n(c,d)).subscribe(r=ye(i,h=>i.next(e?e(c,h,d,l++):h),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function gy(n){return we((e,t)=>{dt(n).subscribe(ye(t,()=>t.complete(),rl)),!t.closed&&e.subscribe(t)})}function Ct(n,e,t){let i=se(n)||e||t?{next:n,error:e,complete:t}:n;return i?we((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(ye(s,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),s.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),s.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),s.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):gn}var wS="https://g.co/ng/security#xss",Q=class extends Error{constructor(e,t){super(vv(e,t)),this.code=e}};function vv(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function yl(n){return{toString:n}.toString()}var lh="__parameters__";function VF(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function IS(n,e,t){return yl(()=>{let i=VF(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(c,l,d){let h=c.hasOwnProperty(lh)?c[lh]:Object.defineProperty(c,lh,{value:[]})[lh];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Bs=globalThis;function Ve(n){for(let e in n)if(n[e]===Ve)return e;throw Error("Could not find renamed property on target object.")}function jF(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function en(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(en).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function kD(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var BF=Ve({__forward_ref__:Ve});function Yn(n){return n.__forward_ref__=Yn,n.toString=function(){return en(this())},n}function Xt(n){return ES(n)?n():n}function ES(n){return typeof n=="function"&&n.hasOwnProperty(BF)&&n.__forward_ref__===Yn}function J(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Zs(n){return{providers:n.providers||[],imports:n.imports||[]}}function Hh(n){return FD(n,DS)||FD(n,SS)}function CS(n){return Hh(n)!==null}function FD(n,e){return n.hasOwnProperty(e)?n[e]:null}function UF(n){let e=n&&(n[DS]||n[SS]);return e||null}function LD(n){return n&&(n.hasOwnProperty(VD)||n.hasOwnProperty($F))?n[VD]:null}var DS=Ve({\u0275prov:Ve}),VD=Ve({\u0275inj:Ve}),SS=Ve({ngInjectableDef:Ve}),$F=Ve({ngInjectorDef:Ve}),Y=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=J({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function xS(n){return n&&!!n.\u0275providers}var zF=Ve({\u0275cmp:Ve}),HF=Ve({\u0275dir:Ve}),qF=Ve({\u0275pipe:Ve}),WF=Ve({\u0275mod:Ve}),_h=Ve({\u0275fac:Ve}),ll=Ve({__NG_ELEMENT_ID__:Ve}),jD=Ve({__NG_ENV_ID__:Ve});function ma(n){return typeof n=="string"?n:n==null?"":String(n)}function GF(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ma(n)}function KF(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Q(-200,n)}function _v(n,e){throw new Q(-201,!1)}var fe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(fe||{}),Ay;function TS(){return Ay}function an(n){let e=Ay;return Ay=n,e}function MS(n,e,t){let i=Hh(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&fe.Optional)return null;if(e!==void 0)return e;_v(n,"Injector")}var QF={},ul=QF,Py="__NG_DI_FLAG__",bh="ngTempTokenPath",YF="ngTokenPath",ZF=/\n/gm,JF="\u0275",BD="__source",pa;function XF(){return pa}function Hr(n){let e=pa;return pa=n,e}function eL(n,e=fe.Default){if(pa===void 0)throw new Q(-203,!1);return pa===null?MS(n,void 0,e):pa.get(n,e&fe.Optional?null:void 0,e)}function le(n,e=fe.Default){return(TS()||eL)(Xt(n),e)}function q(n,e=fe.Default){return le(n,qh(e))}function qh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ry(n){let e=[];for(let t=0;t<n.length;t++){let i=Xt(n[t]);if(Array.isArray(i)){if(i.length===0)throw new Q(900,!1);let r,s=fe.Default;for(let o=0;o<i.length;o++){let a=i[o],c=tL(a);typeof c=="number"?c===-1?r=a.token:s|=c:r=a}e.push(le(r,s))}else e.push(le(i))}return e}function AS(n,e){return n[Py]=e,n.prototype[Py]=e,n}function tL(n){return n[Py]}function nL(n,e,t,i){let r=n[bh];throw e[BD]&&r.unshift(e[BD]),n.message=iL(`
`+n.message,r,t,i),n[YF]=r,n[bh]=null,n}function iL(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==JF?n.slice(2):n;let r=en(e);if(Array.isArray(e))r=e.map(en).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):en(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(ZF,`
  `)}`}var nn=AS(IS("Optional"),8);var PS=AS(IS("SkipSelf"),4);function $s(n,e){let t=n.hasOwnProperty(_h);return t?n[_h]:null}function bv(n,e){n.forEach(t=>Array.isArray(t)?bv(t,e):e(t))}function RS(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function wh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function rL(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let s=r-2;n[r]=n[s],r--}n[e]=t,n[e+1]=i}}function sL(n,e,t){let i=vl(n,e);return i>=0?n[i|1]=t:(i=~i,rL(n,i,e,t)),i}function my(n,e){let t=vl(n,e);if(t>=0)return n[t|1]}function vl(n,e){return oL(n,e,1)}function oL(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}var ya={},Sn=[],va=new Y(""),OS=new Y("",-1),NS=new Y(""),Ih=class{get(e,t=ul){if(t===ul){let i=new Error(`NullInjectorError: No provider for ${en(e)}!`);throw i.name="NullInjectorError",i}return t}},kS=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(kS||{}),pi=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(pi||{}),Gr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Gr||{});function aL(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function Oy(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{let s=r,o=t[++i];cL(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function FS(n){return n===3||n===4||n===6}function cL(n){return n.charCodeAt(0)===64}function dl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?UD(n,t,r,null,e[++i]):UD(n,t,r,null,null))}}return n}function UD(n,e,t,i,r){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(i===null){r!==null&&(n[s+1]=r);return}else if(i===n[s+1]){n[s+2]=r;return}}s++,i!==null&&s++,r!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i),r!==null&&n.splice(s++,0,r)}var LS="ng-template";function lL(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&aL(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(wv(n))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&typeof(s=e[r])=="string";)if(s.toLowerCase()===t)return!0}return!1}function wv(n){return n.type===4&&n.value!==LS}function uL(n,e,t){let i=n.type===4&&!t?LS:n.value;return e===i}function dL(n,e,t){let i=4,r=n.attrs,s=r!==null?pL(r):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Wn(i)&&!Wn(c))return!1;if(o&&Wn(c))continue;o=!1,i=c|i&1;continue}if(!o)if(i&4){if(i=2|i&1,c!==""&&!uL(n,c,t)||c===""&&e.length===1){if(Wn(i))return!1;o=!0}}else if(i&8){if(r===null||!lL(n,r,c,t)){if(Wn(i))return!1;o=!0}}else{let l=e[++a],d=hL(c,r,wv(n),t);if(d===-1){if(Wn(i))return!1;o=!0;continue}if(l!==""){let h;if(d>s?h="":h=r[d+1].toLowerCase(),i&2&&l!==h){if(Wn(i))return!1;o=!0}}}}return Wn(i)||o}function Wn(n){return(n&1)===0}function hL(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){let o=e[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return gL(e,n)}function fL(n,e,t=!1){for(let i=0;i<e.length;i++)if(dL(n,e[i],t))return!0;return!1}function pL(n){for(let e=0;e<n.length;e++){let t=n[e];if(FS(t))return e}return n.length}function gL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function $D(n,e){return n?":not("+e.trim()+")":e}function mL(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(i&2){let a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!Wn(o)&&(e+=$D(s,r),r=""),i=o,s=s||!Wn(i);t++}return r!==""&&(e+=$D(s,r)),e}function yL(n){return n.map(mL).join(",")}function vL(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&e.push(s,n[++i]):r===8&&t.push(s);else{if(!Wn(r))break;r=s}i++}return{attrs:e,classes:t}}function ft(n){return yl(()=>{let e=zS(n),t=X($({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===kS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||pi.Emulated,styles:n.styles||Sn,_:null,schemas:n.schemas||null,tView:null,id:""});HS(t);let i=n.dependencies;return t.directiveDefs=HD(i,!1),t.pipeDefs=HD(i,!0),t.id=wL(t),t})}function _L(n){return zs(n)||jS(n)}function bL(n){return n!==null}function Js(n){return yl(()=>({type:n.type,bootstrap:n.bootstrap||Sn,declarations:n.declarations||Sn,imports:n.imports||Sn,exports:n.exports||Sn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function zD(n,e){if(n==null)return ya;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,o,a=Gr.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(t[s]=a!==Gr.None?[i,a]:i,e[s]=o):t[s]=i}return t}function Ke(n){return yl(()=>{let e=zS(n);return HS(e),e})}function VS(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function zs(n){return n[zF]||null}function jS(n){return n[HF]||null}function BS(n){return n[qF]||null}function US(n){let e=zs(n)||jS(n)||BS(n);return e!==null?e.standalone:!1}function $S(n,e){let t=n[WF]||null;if(!t&&e===!0)throw new Error(`Type ${en(n)} does not have '\u0275mod' property.`);return t}function zS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ya,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Sn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:zD(n.inputs,e),outputs:zD(n.outputs),debugInfo:null}}function HS(n){n.features?.forEach(e=>e(n))}function HD(n,e){if(!n)return null;let t=e?BS:_L;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(bL)}function wL(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function vi(n){return{\u0275providers:n}}function IL(...n){return{\u0275providers:qS(!0,n),\u0275fromNgModule:!0}}function qS(n,...e){let t=[],i=new Set,r,s=o=>{t.push(o)};return bv(e,o=>{let a=o;Ny(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&WS(r,s),t}function WS(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];Iv(r,s=>{e(s,i)})}}function Ny(n,e,t,i){if(n=Xt(n),!n)return!1;let r=null,s=LD(n),o=!s&&zs(n);if(!s&&!o){let c=n.ngModule;if(s=LD(c),s)r=c;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Ny(l,e,t,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let l;try{bv(s.imports,d=>{Ny(d,e,t,i)&&(l||=[],l.push(d))})}finally{}l!==void 0&&WS(l,e)}if(!a){let l=$s(r)||(()=>new r);e({provide:r,useFactory:l,deps:Sn},r),e({provide:NS,useValue:r,multi:!0},r),e({provide:va,useValue:()=>le(r),multi:!0},r)}let c=s.providers;if(c!=null&&!a){let l=n;Iv(c,d=>{e(d,l)})}}else return!1;return r!==n&&n.providers!==void 0}function Iv(n,e){for(let t of n)xS(t)&&(t=t.\u0275providers),Array.isArray(t)?Iv(t,e):e(t)}var EL=Ve({provide:String,useValue:Ve});function GS(n){return n!==null&&typeof n=="object"&&EL in n}function CL(n){return!!(n&&n.useExisting)}function DL(n){return!!(n&&n.useFactory)}function _a(n){return typeof n=="function"}function SL(n){return!!n.useClass}var Wh=new Y(""),ph={},xL={},yy;function Ev(){return yy===void 0&&(yy=new Ih),yy}var Mn=class{},hl=class extends Mn{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fy(e,o=>this.processProvider(o)),this.records.set(OS,da(void 0,this)),r.has("environment")&&this.records.set(Mn,da(void 0,this));let s=this.records.get(Wh);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(NS,Sn,fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=De(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),De(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Hr(this),i=an(void 0),r;try{return e()}finally{Hr(t),an(i)}}get(e,t=ul,i=fe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(jD))return e[jD](this);i=qh(i);let r,s=Hr(this),o=an(void 0);try{if(!(i&fe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=RL(e)&&Hh(e);l&&this.injectableDefInScope(l)?c=da(ky(e),ph):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=i&fe.Self?Ev():this.parent;return t=i&fe.Optional&&t===ul?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[bh]=a[bh]||[]).unshift(en(e)),s)throw a;return nL(a,e,"R3InjectorError",this.source)}else throw a}finally{an(o),Hr(s)}}resolveInjectorInitializers(){let e=De(null),t=Hr(this),i=an(void 0),r;try{let s=this.get(va,Sn,fe.Self);for(let o of s)o()}finally{Hr(t),an(i),De(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(en(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){e=Xt(e);let t=_a(e)?e:Xt(e&&e.provide),i=ML(e);if(!_a(e)&&e.multi===!0){let r=this.records.get(t);r||(r=da(void 0,ph,!0),r.factory=()=>Ry(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){let i=De(null);try{return t.value===ph&&(t.value=xL,t.value=t.factory()),typeof t.value=="object"&&t.value&&PL(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{De(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Xt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function ky(n){let e=Hh(n),t=e!==null?e.factory:$s(n);if(t!==null)return t;if(n instanceof Y)throw new Q(204,!1);if(n instanceof Function)return TL(n);throw new Q(204,!1)}function TL(n){if(n.length>0)throw new Q(204,!1);let t=UF(n);return t!==null?()=>t.factory(n):()=>new n}function ML(n){if(GS(n))return da(void 0,n.useValue);{let e=KS(n);return da(e,ph)}}function KS(n,e,t){let i;if(_a(n)){let r=Xt(n);return $s(r)||ky(r)}else if(GS(n))i=()=>Xt(n.useValue);else if(DL(n))i=()=>n.useFactory(...Ry(n.deps||[]));else if(CL(n))i=()=>le(Xt(n.useExisting));else{let r=Xt(n&&(n.useClass||n.provide));if(AL(n))i=()=>new r(...Ry(n.deps));else return $s(r)||ky(r)}return i}function da(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function AL(n){return!!n.deps}function PL(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function RL(n){return typeof n=="function"||typeof n=="object"&&n instanceof Y}function Fy(n,e){for(let t of n)Array.isArray(t)?Fy(t,e):t&&xS(t)?Fy(t.\u0275providers,e):e(t)}function ir(n,e){n instanceof hl&&n.assertNotDestroyed();let t,i=Hr(n),r=an(void 0);try{return e()}finally{Hr(i),an(r)}}function OL(){return TS()!==void 0||XF()!=null}function NL(n){return typeof n=="function"}var rr=0,ge=1,ne=2,tn=3,Gn=4,Zn=5,Eh=6,Ch=7,Kn=8,ba=9,gi=10,Dt=11,fl=12,qD=13,Ta=14,mi=15,wa=16,ha=17,Ia=18,Gh=19,QS=20,qr=21,vy=22,xn=23,Qn=25,YS=1;var Hs=7,Dh=8,Sh=9,Tn=10,xh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(xh||{});function Wr(n){return Array.isArray(n)&&typeof n[YS]=="object"}function sr(n){return Array.isArray(n)&&n[YS]===!0}function ZS(n){return(n.flags&4)!==0}function Kh(n){return n.componentOffset>-1}function Cv(n){return(n.flags&1)===1}function Kr(n){return!!n.template}function Ly(n){return(n[ne]&512)!==0}var Vy=class{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function JS(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}function Yr(){return XS}function XS(n){return n.type.prototype.ngOnChanges&&(n.setInput=FL),kL}Yr.ngInherit=!0;function kL(){let n=tx(this),e=n?.current;if(e){let t=n.previous;if(t===ya)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function FL(n,e,t,i,r){let s=this.declaredInputs[i],o=tx(n)||LL(n,{previous:ya,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Vy(l&&l.currentValue,t,c===ya),JS(n,e,r,t)}var ex="__ngSimpleChanges__";function tx(n){return n[ex]||null}function LL(n,e){return n[ex]=e}var WD=null;var hi=function(n,e,t){WD?.(n,e,t)},nx="svg",VL="math";function yi(n){for(;Array.isArray(n);)n=n[rr];return n}function ix(n,e){return yi(e[n])}function An(n,e){return yi(e[n.index])}function rx(n,e){return n.data[e]}function sx(n,e){return n[e]}function Zr(n,e){let t=e[n];return Wr(t)?t:t[rr]}function Dv(n){return(n[ne]&128)===128}function jL(n){return sr(n[tn])}function Th(n,e){return e==null?null:n[e]}function ox(n){n[ha]=0}function ax(n){n[ne]&1024||(n[ne]|=1024,Dv(n)&&Yh(n))}function BL(n,e){for(;n>0;)e=e[Ta],n--;return e}function Qh(n){return!!(n[ne]&9216||n[xn]?.dirty)}function jy(n){n[gi].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),Qh(n)&&Yh(n)}function Yh(n){n[gi].changeDetectionScheduler?.notify(0);let e=qs(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Dv(e)));)e=qs(e)}function cx(n,e){if((n[ne]&256)===256)throw new Q(911,!1);n[qr]===null&&(n[qr]=[]),n[qr].push(e)}function UL(n,e){if(n[qr]===null)return;let t=n[qr].indexOf(e);t!==-1&&n[qr].splice(t,1)}function qs(n){let e=n[tn];return sr(e)?e[tn]:e}var he={lFrame:vx(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var lx=!1;function $L(){return he.lFrame.elementDepthCount}function zL(){he.lFrame.elementDepthCount++}function HL(){he.lFrame.elementDepthCount--}function ux(){return he.bindingsEnabled}function qL(){return he.skipHydrationRootTNode!==null}function WL(n){return he.skipHydrationRootTNode===n}function GL(){he.skipHydrationRootTNode=null}function xe(){return he.lFrame.lView}function ln(){return he.lFrame.tView}function Jn(n){return he.lFrame.contextLView=n,n[Kn]}function Xn(n){return he.lFrame.contextLView=null,n}function rn(){let n=dx();for(;n!==null&&n.type===64;)n=n.parent;return n}function dx(){return he.lFrame.currentTNode}function KL(){let n=he.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function _l(n,e){let t=he.lFrame;t.currentTNode=n,t.isParent=e}function hx(){return he.lFrame.isParent}function QL(){he.lFrame.isParent=!1}function fx(){return lx}function GD(n){lx=n}function bl(){let n=he.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function YL(){return he.lFrame.bindingIndex}function ZL(n){return he.lFrame.bindingIndex=n}function Zh(){return he.lFrame.bindingIndex++}function px(n){let e=he.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function JL(){return he.lFrame.inI18n}function XL(n,e){let t=he.lFrame;t.bindingIndex=t.bindingRootIndex=n,By(e)}function e2(){return he.lFrame.currentDirectiveIndex}function By(n){he.lFrame.currentDirectiveIndex=n}function t2(n){let e=he.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function gx(n){he.lFrame.currentQueryIndex=n}function n2(n){let e=n[ge];return e.type===2?e.declTNode:e.type===1?n[Zn]:null}function mx(n,e,t){if(t&fe.SkipSelf){let r=e,s=n;for(;r=r.parent,r===null&&!(t&fe.Host);)if(r=n2(s),r===null||(s=s[Ta],r.type&10))break;if(r===null)return!1;e=r,n=s}let i=he.lFrame=yx();return i.currentTNode=e,i.lView=n,!0}function Sv(n){let e=yx(),t=n[ge];he.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function yx(){let n=he.lFrame,e=n===null?null:n.child;return e===null?vx(n):e}function vx(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function _x(){let n=he.lFrame;return he.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var bx=_x;function xv(){let n=_x();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function i2(n){return(he.lFrame.contextLView=BL(n,he.lFrame.contextLView))[Kn]}function Xs(){return he.lFrame.selectedIndex}function Ws(n){he.lFrame.selectedIndex=n}function Tv(){let n=he.lFrame;return rx(n.tView,n.selectedIndex)}function Pn(){he.lFrame.currentNamespace=nx}function ei(){r2()}function r2(){he.lFrame.currentNamespace=null}function s2(){return he.lFrame.currentNamespace}var wx=!0;function Mv(){return wx}function Av(n){wx=n}function o2(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=XS(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Pv(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function gh(n,e,t){Ix(n,e,3,t)}function mh(n,e,t,i){(n[ne]&3)===t&&Ix(n,e,t,i)}function _y(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function Ix(n,e,t,i){let r=i!==void 0?n[ha]&65535:0,s=i??-1,o=e.length-1,a=0;for(let c=r;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(n[ha]+=65536),(a<s||s==-1)&&(a2(n,t,e,c),n[ha]=(n[ha]&4294901760)+c+2),c++}function KD(n,e){hi(4,n,e);let t=De(null);try{e.call(n)}finally{De(t),hi(5,n,e)}}function a2(n,e,t,i){let r=t[i]<0,s=t[i+1],o=r?-t[i]:t[i],a=n[o];r?n[ne]>>14<n[ha]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,KD(a,s)):KD(a,s)}var ga=-1,Gs=class{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}};function c2(n){return n instanceof Gs}function l2(n){return(n.flags&8)!==0}function u2(n){return(n.flags&16)!==0}var by={},Uy=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=qh(i);let r=this.injector.get(e,by,i);return r!==by||t===by?r:this.parentInjector.get(e,t,i)}};function Ex(n){return n!==ga}function Mh(n){return n&32767}function d2(n){return n>>16}function Ah(n,e){let t=d2(n),i=e;for(;t>0;)i=i[Ta],t--;return i}var $y=!0;function Ph(n){let e=$y;return $y=n,e}var h2=256,Cx=h2-1,Dx=5,f2=0,fi={};function p2(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(ll)&&(i=t[ll]),i==null&&(i=t[ll]=f2++);let r=i&Cx,s=1<<r;e.data[n+(r>>Dx)]|=s}function Rh(n,e){let t=Sx(n,e);if(t!==-1)return t;let i=e[ge];i.firstCreatePass&&(n.injectorIndex=e.length,wy(i.data,n),wy(e,null),wy(i.blueprint,null));let r=Rv(n,e),s=n.injectorIndex;if(Ex(r)){let o=Mh(r),a=Ah(r,e),c=a[ge].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function wy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Sx(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Rv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=Px(r),i===null)return ga;if(t++,r=r[Ta],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return ga}function zy(n,e,t){p2(n,e,t)}function g2(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let s=t[r];if(FS(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(s===e)return t[r+1];r=r+2}}}return null}function xx(n,e,t){if(t&fe.Optional||n!==void 0)return n;_v(e,"NodeInjector")}function Tx(n,e,t,i){if(t&fe.Optional&&i===void 0&&(i=null),!(t&(fe.Self|fe.Host))){let r=n[ba],s=an(void 0);try{return r?r.get(e,i,t&fe.Optional):MS(e,i,t&fe.Optional)}finally{an(s)}}return xx(i,e,t)}function Mx(n,e,t,i=fe.Default,r){if(n!==null){if(e[ne]&2048&&!(i&fe.Self)){let o=b2(n,e,t,i,fi);if(o!==fi)return o}let s=Ax(n,e,t,i,fi);if(s!==fi)return s}return Tx(e,t,i,r)}function Ax(n,e,t,i,r){let s=v2(t);if(typeof s=="function"){if(!mx(e,n,i))return i&fe.Host?xx(r,t,i):Tx(e,t,i,r);try{let o;if(o=s(i),o==null&&!(i&fe.Optional))_v(t);else return o}finally{bx()}}else if(typeof s=="number"){let o=null,a=Sx(n,e),c=ga,l=i&fe.Host?e[mi][Zn]:null;for((a===-1||i&fe.SkipSelf)&&(c=a===-1?Rv(n,e):e[a+8],c===ga||!YD(i,!1)?a=-1:(o=e[ge],a=Mh(c),e=Ah(c,e)));a!==-1;){let d=e[ge];if(QD(s,a,d.data)){let h=m2(a,e,t,o,i,l);if(h!==fi)return h}c=e[a+8],c!==ga&&YD(i,e[ge].data[a+8]===l)&&QD(s,a,e)?(o=d,a=Mh(c),e=Ah(c,e)):a=-1}}return r}function m2(n,e,t,i,r,s){let o=e[ge],a=o.data[n+8],c=i==null?Kh(a)&&$y:i!=o&&(a.type&3)!==0,l=r&fe.Host&&s===a,d=y2(a,o,t,c,l);return d!==null?Ea(e,o,d,a):fi}function y2(n,e,t,i,r){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,d=s>>20,h=i?a:a+d,p=r?a+d:l;for(let g=h;g<p;g++){let y=o[g];if(g<c&&t===y||g>=c&&y.type===t)return g}if(r){let g=o[c];if(g&&Kr(g)&&g.type===t)return c}return null}function Ea(n,e,t,i){let r=n[t],s=e.data;if(c2(r)){let o=r;o.resolving&&KF(GF(s[t]));let a=Ph(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?an(o.injectImpl):null,d=mx(n,i,fe.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&o2(t,s[t],e)}finally{l!==null&&an(l),Ph(a),o.resolving=!1,bx()}}return r}function v2(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ll)?n[ll]:void 0;return typeof e=="number"?e>=0?e&Cx:_2:e}function QD(n,e,t){let i=1<<n;return!!(t[e+(n>>Dx)]&i)}function YD(n,e){return!(n&fe.Self)&&!(n&fe.Host&&e)}var Us=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Mx(this._tNode,this._lView,e,qh(i),t)}};function _2(){return new Us(rn(),xe())}function _i(n){return yl(()=>{let e=n.prototype.constructor,t=e[_h]||Hy(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[_h]||Hy(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Hy(n){return ES(n)?()=>{let e=Hy(Xt(n));return e&&e()}:$s(n)}function b2(n,e,t,i,r){let s=n,o=e;for(;s!==null&&o!==null&&o[ne]&2048&&!(o[ne]&512);){let a=Ax(s,o,t,i|fe.Self,fi);if(a!==fi)return a;let c=s.parent;if(!c){let l=o[QS];if(l){let d=l.get(t,fi,i);if(d!==fi)return d}c=Px(o),o=o[Ta]}s=c}return r}function Px(n){let e=n[ge],t=e.type;return t===2?e.declTNode:t===1?n[Zn]:null}function Ov(n){return g2(rn(),n)}function ZD(n,e=null,t=null,i){let r=Rx(n,e,t,i);return r.resolveInjectorInitializers(),r}function Rx(n,e=null,t=null,i,r=new Set){let s=[t||Sn,IL(n)];return i=i||(typeof n=="object"?void 0:en(n)),new hl(s,e||Ev(),i||null,r)}var cn=class n{static{this.THROW_IF_NOT_FOUND=ul}static{this.NULL=new Ih}static create(e,t){if(Array.isArray(e))return ZD({name:""},t,e,"");{let i=e.name??"";return ZD({name:i},e.parent,e.providers,i)}}static{this.\u0275prov=J({token:n,providedIn:"any",factory:()=>le(OS)})}static{this.__NG_ELEMENT_ID__=-1}};var w2=new Y("");w2.__NG_ELEMENT_ID__=n=>{let e=rn();if(e===null)throw new Q(204,!1);if(e.type&2)return e.value;if(n&fe.Optional)return null;throw new Q(204,!1)};var I2="ngOriginalError";function Iy(n){return n[I2]}var Ox=!0,Nx=(()=>{class n{static{this.__NG_ELEMENT_ID__=E2}static{this.__NG_ENV_ID__=t=>t}}return n})(),qy=class extends Nx{constructor(e){super(),this._lView=e}onDestroy(e){return cx(this._lView,e),()=>UL(this._lView,e)}};function E2(){return new qy(xe())}var Ma=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new It(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=J({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Wy=class extends At{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,OL()&&(this.destroyRef=q(Nx,{optional:!0})??void 0,this.pendingTasks=q(Ma,{optional:!0})??void 0)}emit(e){let t=De(null);try{super.next(e)}finally{De(t)}}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof st&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{e(t),i!==void 0&&this.pendingTasks?.remove(i)})}}},ht=Wy;function Oh(...n){}function kx(n){let e,t;function i(){n=Oh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function JD(n){return queueMicrotask(()=>n()),()=>{n=Oh}}var Nv="isAngularZone",Nh=Nv+"_ID",C2=0,ke=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ht(!1),this.onMicrotaskEmpty=new ht(!1),this.onStable=new ht(!1),this.onError=new ht(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=Ox}=e;if(typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&i,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,o.scheduleInRootZone=s,x2(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Nv)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Q(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,D2,Oh,Oh);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},D2={};function kv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function S2(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){kx(()=>{n.callbackScheduled=!1,Gy(n),n.isCheckStableRunning=!0,kv(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Gy(n)}function x2(n){let e=()=>{S2(n)},t=C2++;n._inner=n._inner.fork({name:"angular",properties:{[Nv]:!0,[Nh]:t,[Nh+t]:!0},onInvokeTask:(i,r,s,o,a,c)=>{if(T2(c))return i.invokeTask(s,o,a,c);try{return XD(n),i.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),eS(n)}},onInvoke:(i,r,s,o,a,c,l)=>{try{return XD(n),i.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!M2(c)&&e(),eS(n)}},onHasTask:(i,r,s,o)=>{i.hasTask(s,o),r===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Gy(n),kv(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,r,s,o)=>(i.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Gy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function XD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function eS(n){n._nesting--,kv(n)}var Ky=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ht,this.onMicrotaskEmpty=new ht,this.onStable=new ht,this.onError=new ht}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function T2(n){return Fx(n,"__ignore_ng_zone__")}function M2(n){return Fx(n,"__scheduler_tick__")}function Fx(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Xi=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Iy(e);for(;t&&Iy(t);)t=Iy(t);return t||null}},A2=new Y("",{providedIn:"root",factory:()=>{let n=q(ke),e=q(Xi);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function P2(){return Jh(rn(),xe())}function Jh(n,e){return new ti(An(n,e))}var ti=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=P2}}return n})();function Lx(n){return(n.flags&128)===128}var Vx=new Map,R2=0;function O2(){return R2++}function N2(n){Vx.set(n[Gh],n)}function Qy(n){Vx.delete(n[Gh])}var tS="__ngContext__";function Ks(n,e){Wr(e)?(n[tS]=e[Gh],N2(e)):n[tS]=e}function jx(n){return Ux(n[fl])}function Bx(n){return Ux(n[Gn])}function Ux(n){for(;n!==null&&!sr(n);)n=n[Gn];return n}var Yy;function $x(n){Yy=n}function k2(){if(Yy!==void 0)return Yy;if(typeof document<"u")return document;throw new Q(210,!1)}var Fv=new Y("",{providedIn:"root",factory:()=>F2}),F2="ng",Lv=new Y(""),Jr=new Y("",{providedIn:"platform",factory:()=>"unknown"});var Vv=new Y("",{providedIn:"root",factory:()=>k2().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var L2="h",V2="b";var j2=()=>null;function jv(n,e,t=!1){return j2(n,e,t)}var zx=!1,B2=new Y("",{providedIn:"root",factory:()=>zx});var uh;function U2(){if(uh===void 0&&(uh=null,Bs.trustedTypes))try{uh=Bs.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return uh}function nS(n){return U2()?.createScriptURL(n)||n}var kh=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wS})`}};function wl(n){return n instanceof kh?n.changingThisBreaksApplicationSecurity:n}function Bv(n,e){let t=$2(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${wS})`)}return t===e}function $2(n){return n instanceof kh&&n.getTypeName()||null}var z2=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Hx(n){return n=String(n),n.match(z2)?n:"unsafe:"+n}var Xh=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Xh||{});function Uv(n){let e=Wx();return e?e.sanitize(Xh.URL,n)||"":Bv(n,"URL")?wl(n):Hx(ma(n))}function H2(n){let e=Wx();if(e)return nS(e.sanitize(Xh.RESOURCE_URL,n)||"");if(Bv(n,"ResourceURL"))return nS(wl(n));throw new Q(904,!1)}function q2(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?H2:Uv}function qx(n,e,t){return q2(e,t)(n)}function Wx(){let n=xe();return n&&n[gi].sanitizer}function Gx(n){return n instanceof Function?n():n}var er=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(er||{}),W2;function $v(n,e){return W2(n,e)}function fa(n,e,t,i,r){if(i!=null){let s,o=!1;sr(i)?s=i:Wr(i)&&(o=!0,i=i[rr]);let a=yi(i);n===0&&t!==null?r==null?Jx(e,t,a):Fh(e,t,a,r||null,!0):n===1&&t!==null?Fh(e,t,a,r||null,!0):n===2?aV(e,a,o):n===3&&e.destroyNode(a),s!=null&&lV(e,n,s,t,r)}}function G2(n,e){return n.createText(e)}function K2(n,e,t){n.setValue(e,t)}function Kx(n,e,t){return n.createElement(e,t)}function Q2(n,e){Qx(n,e),e[rr]=null,e[Zn]=null}function Y2(n,e,t,i,r,s){i[rr]=r,i[Zn]=e,ef(n,i,t,1,r,s)}function Qx(n,e){e[gi].changeDetectionScheduler?.notify(9),ef(n,e,e[Dt],2,null,null)}function Z2(n){let e=n[fl];if(!e)return Ey(n[ge],n);for(;e;){let t=null;if(Wr(e))t=e[fl];else{let i=e[Tn];i&&(t=i)}if(!t){for(;e&&!e[Gn]&&e!==n;)Wr(e)&&Ey(e[ge],e),e=e[tn];e===null&&(e=n),Wr(e)&&Ey(e[ge],e),t=e&&e[Gn]}e=t}}function J2(n,e,t,i){let r=Tn+i,s=t.length;i>0&&(t[r-1][Gn]=e),i<s-Tn?(e[Gn]=t[r],RS(t,Tn+i,e)):(t.push(e),e[Gn]=null),e[tn]=t;let o=e[wa];o!==null&&t!==o&&Yx(o,e);let a=e[Ia];a!==null&&a.insertView(n),jy(e),e[ne]|=128}function Yx(n,e){let t=n[Sh],i=e[tn];if(Wr(i))n[ne]|=xh.HasTransplantedViews;else{let r=i[tn][mi];e[mi]!==r&&(n[ne]|=xh.HasTransplantedViews)}t===null?n[Sh]=[e]:t.push(e)}function zv(n,e){let t=n[Sh],i=t.indexOf(e);t.splice(i,1)}function Zy(n,e){if(n.length<=Tn)return;let t=Tn+e,i=n[t];if(i){let r=i[wa];r!==null&&r!==n&&zv(r,i),e>0&&(n[t-1][Gn]=i[Gn]);let s=wh(n,Tn+e);Q2(i[ge],i);let o=s[Ia];o!==null&&o.detachView(s[ge]),i[tn]=null,i[Gn]=null,i[ne]&=-129}return i}function Zx(n,e){if(!(e[ne]&256)){let t=e[Dt];t.destroyNode&&ef(n,e,t,3,null,null),Z2(e)}}function Ey(n,e){if(e[ne]&256)return;let t=De(null);try{e[ne]&=-129,e[ne]|=256,e[xn]&&Ym(e[xn]),eV(n,e),X2(n,e),e[ge].type===1&&e[Dt].destroy();let i=e[wa];if(i!==null&&sr(e[tn])){i!==e[tn]&&zv(i,e);let r=e[Ia];r!==null&&r.detachView(n)}Qy(e)}finally{De(t)}}function X2(n,e){let t=n.cleanup,i=e[Ch];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else{let o=i[t[s+1]];t[s].call(o)}i!==null&&(e[Ch]=null);let r=e[qr];if(r!==null){e[qr]=null;for(let s=0;s<r.length;s++){let o=r[s];o()}}}function eV(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof Gs)){let s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],c=s[o+1];hi(4,a,c);try{c.call(a)}finally{hi(5,a,c)}}else{hi(4,r,s);try{s.call(r)}finally{hi(5,r,s)}}}}}function tV(n,e,t){return nV(n,e.parent,t)}function nV(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[rr];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:s}=n.data[i.directiveStart+r];if(s===pi.None||s===pi.Emulated)return null}return An(i,t)}}function Fh(n,e,t,i,r){n.insertBefore(e,t,i,r)}function Jx(n,e,t){n.appendChild(e,t)}function iS(n,e,t,i,r){i!==null?Fh(n,e,t,i,r):Jx(n,e,t)}function Xx(n,e){return n.parentNode(e)}function iV(n,e){return n.nextSibling(e)}function rV(n,e,t){return oV(n,e,t)}function sV(n,e,t){return n.type&40?An(n,t):null}var oV=sV,rS;function Hv(n,e,t,i){let r=tV(n,i,e),s=e[Dt],o=i.parent||e[Zn],a=rV(o,i,e);if(r!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)iS(s,r,t[c],a,!1);else iS(s,r,t,a,!1);rS!==void 0&&rS(s,i,e,t,r)}function al(n,e){if(e!==null){let t=e.type;if(t&3)return An(e,n);if(t&4)return Jy(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return al(n,i);{let r=n[e.index];return sr(r)?Jy(-1,r):yi(r)}}else{if(t&128)return al(n,e.next);if(t&32)return $v(e,n)()||yi(n[e.index]);{let i=eT(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=qs(n[mi]);return al(r,i)}else return al(n,e.next)}}}return null}function eT(n,e){if(e!==null){let i=n[mi][Zn],r=e.projection;return i.projection[r]}return null}function Jy(n,e){let t=Tn+n+1;if(t<e.length){let i=e[t],r=i[ge].firstChild;if(r!==null)return al(i,r)}return e[Hs]}function aV(n,e,t){n.removeChild(null,e,t)}function qv(n,e,t,i,r,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=i[t.index],c=t.type;if(o&&e===0&&(a&&Ks(yi(a),i),t.flags|=2),(t.flags&32)!==32)if(c&8)qv(n,e,t.child,i,r,s,!1),fa(e,n,r,a,s);else if(c&32){let l=$v(t,i),d;for(;d=l();)fa(e,n,r,d,s);fa(e,n,r,a,s)}else c&16?cV(n,e,i,t,r,s):fa(e,n,r,a,s);t=o?t.projectionNext:t.next}}function ef(n,e,t,i,r,s){qv(t,i,n.firstChild,e,r,s,!1)}function cV(n,e,t,i,r,s){let o=t[mi],c=o[Zn].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];fa(e,n,r,d,s)}else{let l=c,d=o[tn];Lx(i)&&(l.flags|=128),qv(n,e,l,d,r,s,!0)}}function lV(n,e,t,i,r){let s=t[Hs],o=yi(t);s!==o&&fa(e,n,i,s,r);for(let a=Tn;a<t.length;a++){let c=t[a];ef(c[ge],c,n,e,i,s)}}function uV(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=i.indexOf("-")===-1?void 0:er.DashCase;r==null?n.removeStyle(t,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=er.Important),n.setStyle(t,i,r,s))}}function dV(n,e,t){n.setAttribute(e,"style",t)}function tT(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function nT(n,e,t){let{mergedAttrs:i,classes:r,styles:s}=t;i!==null&&Oy(n,e,i),r!==null&&tT(n,e,r),s!==null&&dV(n,e,s)}var or={};function H(n=1){iT(ln(),xe(),Xs()+n,!1)}function iT(n,e,t,i){if(!i)if((e[ne]&3)===3){let s=n.preOrderCheckHooks;s!==null&&gh(e,s,t)}else{let s=n.preOrderHooks;s!==null&&mh(e,s,0,t)}Ws(t)}function W(n,e=fe.Default){let t=xe();if(t===null)return le(n,e);let i=rn();return Mx(i,t,Xt(n),e)}function rT(n,e,t,i,r,s){let o=De(null);try{let a=null;r&Gr.SignalBased&&(a=e[i][Yi]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),r&Gr.HasDecoratorInputTransform&&(s=n.inputTransforms[i].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,i):JS(e,a,i,s)}finally{De(o)}}function hV(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Ws(~r);else{let s=r,o=t[++i],a=t[++i];XL(o,s);let c=e[s];a(2,c)}}}finally{Ws(-1)}}function tf(n,e,t,i,r,s,o,a,c,l,d){let h=e.blueprint.slice();return h[rr]=r,h[ne]=i|4|128|8|64,(l!==null||n&&n[ne]&2048)&&(h[ne]|=2048),ox(h),h[tn]=h[Ta]=n,h[Kn]=t,h[gi]=o||n&&n[gi],h[Dt]=a||n&&n[Dt],h[ba]=c||n&&n[ba]||null,h[Zn]=s,h[Gh]=O2(),h[Eh]=d,h[QS]=l,h[mi]=e.type==2?n[mi]:h,h}function nf(n,e,t,i,r){let s=n.data[e];if(s===null)s=fV(n,e,t,i,r),JL()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=i,s.attrs=r;let o=KL();s.injectorIndex=o===null?-1:o.injectorIndex}return _l(s,!0),s}function fV(n,e,t,i,r){let s=dx(),o=hx(),a=o?s:s&&s.parent,c=n.data[e]=vV(n,a,t,e,i,r);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function sT(n,e,t,i){if(t===0)return-1;let r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function oT(n,e,t,i,r){let s=Xs(),o=i&2;try{Ws(-1),o&&e.length>Qn&&iT(n,e,Qn,!1),hi(o?2:0,r),t(i,r)}finally{Ws(s),hi(o?3:1,r)}}function aT(n,e,t){if(ZS(e)){let i=De(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{De(i)}}}function cT(n,e,t){ux()&&(CV(n,e,t,An(t,e)),(t.flags&64)===64&&pT(n,e,t))}function lT(n,e,t=An){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?t(e,n):n[o];n[r++]=a}}}function uT(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Wv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Wv(n,e,t,i,r,s,o,a,c,l,d){let h=Qn+i,p=h+r,g=pV(h,p),y=typeof l=="function"?l():l;return g[ge]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1,ssrId:d}}function pV(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:or);return t}function gV(n,e,t,i){let s=i.get(B2,zx)||t===pi.ShadowDom,o=n.selectRootElement(e,s);return mV(o),o}function mV(n){yV(n)}var yV=()=>null;function vV(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return qL()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function sS(n,e,t,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;i??={};let a,c=Gr.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(r!==null){if(!r.hasOwnProperty(s))continue;l=r[s]}n===0?oS(i,t,l,a,c):oS(i,t,l,a)}return i}function oS(n,e,t,i,r){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,i):s=n[t]=[e,i],r!==void 0&&s.push(r)}function _V(n,e,t){let i=e.directiveStart,r=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let d=i;d<r;d++){let h=s[d],p=t?t.get(h):null,g=p?p.inputs:null,y=p?p.outputs:null;c=sS(0,h.inputs,d,c,g),l=sS(1,h.outputs,d,l,y);let v=c!==null&&o!==null&&!wv(e)?kV(c,d,o):null;a.push(v)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function bV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function dT(n,e,t,i,r,s,o,a){let c=An(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[i])?(Gv(n,t,d,i,r),Kh(e)&&wV(t,e.index)):e.type&3?(i=bV(i),r=o!=null?o(r,e.value||"",i):r,s.setProperty(c,i,r)):e.type&12}function wV(n,e){let t=Zr(e,n);t[ne]&16||(t[ne]|=64)}function hT(n,e,t,i){if(ux()){let r=i===null?null:{"":-1},s=SV(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&fT(n,e,t,o,r,a),r&&xV(t,i,r)}t.mergedAttrs=dl(t.mergedAttrs,t.attrs)}function fT(n,e,t,i,r,s){for(let l=0;l<i.length;l++)zy(Rh(t,e),n,i[l].type);MV(t,n.data.length,i.length);for(let l=0;l<i.length;l++){let d=i[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=sT(n,e,i.length,null);for(let l=0;l<i.length;l++){let d=i[l];t.mergedAttrs=dl(t.mergedAttrs,d.hostAttrs),AV(n,t,e,c,d),TV(c,d,r),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let h=d.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}_V(n,t,s)}function IV(n,e,t,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;EV(o)!=a&&o.push(a),o.push(t,i,s)}}function EV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function CV(n,e,t,i){let r=t.directiveStart,s=t.directiveEnd;Kh(t)&&PV(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Rh(t,e),Ks(i,e);let o=t.initialInputs;for(let a=r;a<s;a++){let c=n.data[a],l=Ea(e,n,a,t);if(Ks(l,e),o!==null&&NV(e,a-r,l,c,t,o),Kr(c)){let d=Zr(t.index,e);d[Kn]=Ea(e,n,a,t)}}}function pT(n,e,t){let i=t.directiveStart,r=t.directiveEnd,s=t.index,o=e2();try{Ws(s);for(let a=i;a<r;a++){let c=n.data[a],l=e[a];By(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&DV(c,l)}}finally{Ws(-1),By(o)}}function DV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function SV(n,e){let t=n.directiveRegistry,i=null,r=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(fL(e,o.selectors,!1))if(i||(i=[]),Kr(o))if(o.findHostDirectiveDefs!==null){let a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o);let c=a.length;Xy(n,e,c)}else i.unshift(o),Xy(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return i===null?null:[i,r]}function Xy(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function xV(n,e,t){if(e){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let s=t[e[r+1]];if(s==null)throw new Q(-301,!1);i.push(e[r],s)}}}function TV(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Kr(e)&&(t[""]=n)}}function MV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function AV(n,e,t,i,r){n.data[i]=r;let s=r.factory||(r.factory=$s(r.type,!0)),o=new Gs(s,Kr(r),W);n.blueprint[i]=o,t[i]=o,IV(n,e,i,sT(n,t,r.hostVars,or),r)}function PV(n,e,t){let i=An(e,n),r=uT(t),s=n[gi].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=rf(n,tf(n,r,null,o,i,e,null,s.createRenderer(i,t),null,null,null));n[e.index]=a}function RV(n,e,t,i,r,s){let o=An(n,e);OV(e[Dt],o,s,n.value,t,i,r)}function OV(n,e,t,i,r,s,o){if(s==null)n.removeAttribute(e,r,t);else{let a=o==null?ma(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}function NV(n,e,t,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],h=o[a++];rT(i,t,c,l,d,h)}}function kV(n,e,t){let i=null,r=0;for(;r<t.length;){let s=t[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){i===null&&(i=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],t[r+1]);break}}r+=2}return i}function gT(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function mT(n,e){let t=n.contentQueries;if(t!==null){let i=De(null);try{for(let r=0;r<t.length;r+=2){let s=t[r],o=t[r+1];if(o!==-1){let a=n.data[o];gx(s),a.contentQueries(2,e[o],o)}}}finally{De(i)}}}function rf(n,e){return n[fl]?n[qD][Gn]=e:n[fl]=e,n[qD]=e,e}function ev(n,e,t){gx(0);let i=De(null);try{e(n,t)}finally{De(i)}}function FV(n){return n[Ch]??=[]}function LV(n){return n.cleanup??=[]}function yT(n,e){let t=n[ba],i=t?t.get(Xi,null):null;i&&i.handleError(e)}function Gv(n,e,t,i,r){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],d=n.data[o];rT(d,l,i,a,c,r)}}function vT(n,e,t){let i=ix(e,n);K2(n[Dt],i,t)}function VV(n,e){let t=Zr(e,n),i=t[ge];jV(i,t);let r=t[rr];r!==null&&t[Eh]===null&&(t[Eh]=jv(r,t[ba])),Kv(i,t,t[Kn])}function jV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Kv(n,e,t){Sv(e);try{let i=n.viewQuery;i!==null&&ev(1,i,t);let r=n.template;r!==null&&oT(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ia]?.finishViewCreation(n),n.staticContentQueries&&mT(n,e),n.staticViewQueries&&ev(2,n.viewQuery,t);let s=n.components;s!==null&&BV(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[ne]&=-5,xv()}}function BV(n,e){for(let t=0;t<e.length;t++)VV(n,e[t])}function UV(n,e,t,i){let r=De(null);try{let s=e.tView,a=n[ne]&4096?4096:16,c=tf(n,s,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),l=n[e.index];c[wa]=l;let d=n[Ia];return d!==null&&(c[Ia]=d.createEmbeddedView(s)),Kv(s,c,t),c}finally{De(r)}}function aS(n,e){return!e||e.firstChild===null||Lx(n)}function $V(n,e,t,i=!0){let r=e[ge];if(J2(r,e,n,t),i){let o=Jy(t,n),a=e[Dt],c=Xx(a,n[Hs]);c!==null&&Y2(r,n[Zn],a,e,c,o)}let s=e[Eh];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Lh(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&i.push(yi(s)),sr(s)&&zV(s,i);let o=t.type;if(o&8)Lh(n,e,t.child,i);else if(o&32){let a=$v(t,e),c;for(;c=a();)i.push(c)}else if(o&16){let a=eT(e,t);if(Array.isArray(a))i.push(...a);else{let c=qs(e[mi]);Lh(c[ge],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function zV(n,e){for(let t=Tn;t<n.length;t++){let i=n[t],r=i[ge].firstChild;r!==null&&Lh(i[ge],i,r,e)}n[Hs]!==n[rr]&&e.push(n[Hs])}var _T=[];function HV(n){return n[xn]??qV(n)}function qV(n){let e=_T.pop()??Object.create(GV);return e.lView=n,e}function WV(n){n.lView[xn]!==n&&(n.lView=null,_T.push(n))}var GV=X($({},il),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Yh(n.lView)},consumerOnSignalRead(){this.lView[xn]=this}});function KV(n){let e=n[xn]??Object.create(QV);return e.lView=n,e}var QV=X($({},il),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=qs(n.lView);for(;e&&!bT(e[ge]);)e=qs(e);e&&ax(e)},consumerOnSignalRead(){this.lView[xn]=this}});function bT(n){return n.type!==2}var YV=100;function wT(n,e=!0,t=0){let i=n[gi],r=i.rendererFactory,s=!1;s||r.begin?.();try{ZV(n,t)}catch(o){throw e&&yT(n,o),o}finally{s||(r.end?.(),i.inlineEffectRunner?.flush())}}function ZV(n,e){let t=fx();try{GD(!0),tv(n,e);let i=0;for(;Qh(n);){if(i===YV)throw new Q(103,!1);i++,tv(n,1)}}finally{GD(t)}}function JV(n,e,t,i){let r=e[ne];if((r&256)===256)return;let s=!1,o=!1;!s&&e[gi].inlineEffectRunner?.flush(),Sv(e);let a=!0,c=null,l=null;s||(bT(n)?(l=HV(e),c=Rd(l)):ZC()===null?(a=!1,l=KV(e),c=Rd(l)):e[xn]&&(Ym(e[xn]),e[xn]=null));try{ox(e),ZL(n.bindingStartIndex),t!==null&&oT(n,e,t,2,i);let d=(r&3)===3;if(!s)if(d){let g=n.preOrderCheckHooks;g!==null&&gh(e,g,null)}else{let g=n.preOrderHooks;g!==null&&mh(e,g,0,null),_y(e,0)}if(o||XV(e),IT(e,0),n.contentQueries!==null&&mT(n,e),!s)if(d){let g=n.contentCheckHooks;g!==null&&gh(e,g)}else{let g=n.contentHooks;g!==null&&mh(e,g,1),_y(e,1)}hV(n,e);let h=n.components;h!==null&&CT(e,h,0);let p=n.viewQuery;if(p!==null&&ev(2,p,i),!s)if(d){let g=n.viewCheckHooks;g!==null&&gh(e,g)}else{let g=n.viewHooks;g!==null&&mh(e,g,2),_y(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[vy]){for(let g of e[vy])g();e[vy]=null}s||(e[ne]&=-73)}catch(d){throw s||Yh(e),d}finally{l!==null&&(Km(l,c),a&&WV(l)),xv()}}function IT(n,e){for(let t=jx(n);t!==null;t=Bx(t))for(let i=Tn;i<t.length;i++){let r=t[i];ET(r,e)}}function XV(n){for(let e=jx(n);e!==null;e=Bx(e)){if(!(e[ne]&xh.HasTransplantedViews))continue;let t=e[Sh];for(let i=0;i<t.length;i++){let r=t[i];ax(r)}}}function ej(n,e,t){let i=Zr(e,n);ET(i,t)}function ET(n,e){Dv(n)&&tv(n,e)}function tv(n,e){let i=n[ge],r=n[ne],s=n[xn],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&Qm(s)),o||=!1,s&&(s.dirty=!1),n[ne]&=-9217,o)JV(i,n,i.template,n[Kn]);else if(r&8192){IT(n,1);let a=i.components;a!==null&&CT(n,a,1)}}function CT(n,e,t){for(let i=0;i<e.length;i++)ej(n,e[i],t)}function Qv(n,e){let t=fx()?64:1088;for(n[gi].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let i=qs(n);if(Ly(n)&&!i)return n;n=i}return null}var Qs=class{get rootNodes(){let e=this._lView,t=e[ge];return Lh(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Kn]}set context(e){this._lView[Kn]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[tn];if(sr(e)){let t=e[Dh],i=t?t.indexOf(this):-1;i>-1&&(Zy(e,i),wh(t,i))}this._attachedToViewContainer=!1}Zx(this._lView[ge],this._lView)}onDestroy(e){cx(this._lView,e)}markForCheck(){Qv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){jy(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,wT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ly(this._lView),t=this._lView[wa];t!==null&&!e&&zv(t,this._lView),Qx(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e;let t=Ly(this._lView),i=this._lView[wa];i!==null&&!t&&Yx(i,this._lView),jy(this._lView)}},sf=(()=>{class n{static{this.__NG_ELEMENT_ID__=ij}}return n})(),tj=sf,nj=class extends tj{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=UV(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new Qs(r)}};function ij(){return rj(rn(),xe())}function rj(n,e){return n.type&4?new nj(e,n,Jh(n,e)):null}var Pee=new RegExp(`^(\\d+)*(${V2}|${L2})*(.*)`);var sj=()=>null;function cS(n,e){return sj(n,e)}var Ca=class{},of=new Y("",{providedIn:"root",factory:()=>!1});var DT=new Y(""),ST=new Y(""),nv=class{},Vh=class{};function oj(n){let e=Error(`No component factory found for ${en(n)}.`);return e[aj]=n,e}var aj="ngComponent";var iv=class{resolveComponentFactory(e){throw oj(e)}},Da=class{static{this.NULL=new iv}},Sa=class{},bi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>cj()}}return n})();function cj(){let n=xe(),e=rn(),t=Zr(e.index,n);return(Wr(t)?t:n)[Dt]}var lj=(()=>{class n{static{this.\u0275prov=J({token:n,providedIn:"root",factory:()=>null})}}return n})();function rv(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=kD(r,a);else if(s==2){let c=a,l=e[++o];i=kD(i,c+": "+l+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}var jh=class extends Da{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=zs(e);return new pl(t,this.ngModule)}};function lS(n,e){let t=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let r=n[i];if(r===void 0)continue;let s=Array.isArray(r),o=s?r[0]:r,a=s?r[1]:Gr.None;e?t.push({propName:o,templateName:i,isSignal:(a&Gr.SignalBased)!==0}):t.push({propName:o,templateName:i})}return t}function uj(n){let e=n.toLowerCase();return e==="svg"?nx:e==="math"?VL:null}var pl=class extends Vh{get inputs(){let e=this.componentDef,t=e.inputTransforms,i=lS(e.inputs,!0);if(t!==null)for(let r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return lS(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=yL(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=De(null);try{r=r||this.ngModule;let o=r instanceof Mn?r:r?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Uy(e,o):e,c=a.get(Sa,null);if(c===null)throw new Q(407,!1);let l=a.get(lj,null),d=a.get(Ca,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},p=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",y=i?gV(p,i,this.componentDef.encapsulation,a):Kx(p,g,uj(g)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let _=null;y!==null&&(_=jv(y,a,!0));let T=Wv(0,null,null,1,0,null,null,null,null,null,null),P=tf(null,T,null,v,null,null,h,p,a,null,_);Sv(P);let N,j,L=null;try{let k=this.componentDef,C,w=null;k.findHostDirectiveDefs?(C=[],w=new Map,k.findHostDirectiveDefs(k,C,w),C.push(k)):C=[k];let I=dj(P,y);L=hj(I,y,k,C,P,h,p),j=rx(T,Qn),y&&gj(p,k,y,i),t!==void 0&&mj(j,this.ngContentSelectors,t),N=pj(L,k,C,w,P,[yj]),Kv(T,P,null)}catch(k){throw L!==null&&Qy(L),Qy(P),k}finally{xv()}return new sv(this.componentType,N,Jh(j,P),P,j)}finally{De(s)}}},sv=class extends nv{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Qs(r,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;Gv(s[ge],s,r,e,t),this.previousInputValues.set(e,t);let o=Zr(this._tNode.index,s);Qv(o,1)}}get injector(){return new Us(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function dj(n,e){let t=n[ge],i=Qn;return n[i]=e,nf(t,i,2,"#host",null)}function hj(n,e,t,i,r,s,o){let a=r[ge];fj(i,n,e,o);let c=null;e!==null&&(c=jv(e,r[ba]));let l=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let h=tf(r,uT(t),null,d,r[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Xy(a,n,i.length-1),rf(r,h),r[n.index]=h}function fj(n,e,t,i){for(let r of n)e.mergedAttrs=dl(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(rv(e,e.mergedAttrs,!0),t!==null&&nT(i,t,e))}function pj(n,e,t,i,r,s){let o=rn(),a=r[ge],c=An(o,r);fT(a,r,o,t,null,i);for(let d=0;d<t.length;d++){let h=o.directiveStart+d,p=Ea(r,a,h,o);Ks(p,r)}pT(a,r,o),c&&Ks(c,r);let l=Ea(r,a,o.directiveStart+o.componentOffset,o);if(n[Kn]=r[Kn]=l,s!==null)for(let d of s)d(l,e);return aT(a,o,r),l}function gj(n,e,t,i){if(i)Oy(n,t,["ng-version","18.2.11"]);else{let{attrs:r,classes:s}=vL(e.selectors[0]);r&&Oy(n,t,r),s&&s.length>0&&tT(n,t,s.join(" "))}}function mj(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let s=t[r];i.push(s!=null?Array.from(s):null)}}function yj(){let n=rn();Pv(xe()[ge],n)}var Aa=(()=>{class n{static{this.__NG_ELEMENT_ID__=vj}}return n})();function vj(){let n=rn();return bj(n,xe())}var _j=Aa,xT=class extends _j{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Jh(this._hostTNode,this._hostLView)}get injector(){return new Us(this._hostTNode,this._hostLView)}get parentInjector(){let e=Rv(this._hostTNode,this._hostLView);if(Ex(e)){let t=Ah(e,this._hostLView),i=Mh(e),r=t[ge].data[i+8];return new Us(r,t)}else return new Us(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=uS(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Tn}createEmbeddedView(e,t,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=cS(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,aS(this._hostTNode,o)),a}createComponent(e,t,i,r,s){let o=e&&!NL(e),a;if(o)a=t;else{let y=t||{};a=y.index,i=y.injector,r=y.projectableNodes,s=y.environmentInjector||y.ngModuleRef}let c=o?e:new pl(zs(e)),l=i||this.parentInjector;if(!s&&c.ngModule==null){let v=(o?l:this.parentInjector).get(Mn,null);v&&(s=v)}let d=zs(c.componentType??{}),h=cS(this._lContainer,d?.id??null),p=h?.firstChild??null,g=c.create(l,r,p,s);return this.insertImpl(g.hostView,a,aS(this._hostTNode,h)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(jL(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[tn],l=new xT(c,c[Zn],c[tn]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return $V(o,r,s,i),e.attachToViewContainerRef(),RS(Cy(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=uS(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=Zy(this._lContainer,t);i&&(wh(Cy(this._lContainer),t),Zx(i[ge],i))}detach(e){let t=this._adjustIndex(e,-1),i=Zy(this._lContainer,t);return i&&wh(Cy(this._lContainer),t)!=null?new Qs(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function uS(n){return n[Dh]}function Cy(n){return n[Dh]||(n[Dh]=[])}function bj(n,e){let t,i=e[n.index];return sr(i)?t=i:(t=gT(i,e,null,n),e[n.index]=t,rf(e,t)),Ij(t,e,n,i),new xT(t,n,e)}function wj(n,e){let t=n[Dt],i=t.createComment(""),r=An(e,n),s=Xx(t,r);return Fh(t,s,i,iV(t,r),!1),i}var Ij=Dj,Ej=()=>!1;function Cj(n,e,t){return Ej(n,e,t)}function Dj(n,e,t,i){if(n[Hs])return;let r;t.type&8?r=yi(i):r=wj(e,t),n[Hs]=r}var dS=new Set;function Il(n){dS.has(n)||(dS.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Sj(n){return typeof n=="function"&&n[Yi]!==void 0}function El(n,e){Il("NgSignals");let t=cD(n),i=t[Yi];return e?.equal&&(i.equal=e.equal),t.set=r=>Zm(i,r),t.update=r=>lD(i,r),t.asReadonly=xj.bind(t),t}function xj(){let n=this[Yi];if(n.readonlyFn===void 0){let e=()=>this();e[Yi]=n,n.readonlyFn=e}return n.readonlyFn}function TT(n){return Sj(n)&&typeof n.set=="function"}function Tj(n){return Object.getPrototypeOf(n.prototype).constructor}function yn(n){let e=Tj(n.type),t=!0,i=[n];for(;e;){let r;if(Kr(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let o=n;o.inputs=dh(n.inputs),o.inputTransforms=dh(n.inputTransforms),o.declaredInputs=dh(n.declaredInputs),o.outputs=dh(n.outputs);let a=r.hostBindings;a&&Oj(n,a);let c=r.viewQuery,l=r.contentQueries;if(c&&Pj(n,c),l&&Rj(n,l),Mj(n,r),jF(n.outputs,r.outputs),Kr(r)&&r.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===yn&&(t=!1)}}e=Object.getPrototypeOf(e)}Aj(i)}function Mj(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];if(i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=e.inputTransforms[r]}}}function Aj(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=dl(r.hostAttrs,t=dl(t,r.hostAttrs))}}function dh(n){return n===ya?{}:n===Sn?[]:n}function Pj(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function Rj(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,s)=>{e(i,r,s),t(i,r,s)}:n.contentQueries=e}function Oj(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function Yv(n){let e=n.inputConfig,t={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(t[i]=r[3])}n.inputTransforms=t}var Qr=class{},gl=class{};var ov=class extends Qr{constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jh(this);let s=$S(e);this._bootstrapComponents=Gx(s.bootstrap),this._r3Injector=Rx(e,t,[{provide:Qr,useValue:this},{provide:Da,useValue:this.componentFactoryResolver},...i],en(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},av=class extends gl{constructor(e){super(),this.moduleType=e}create(e){return new ov(this.moduleType,e,[])}};var Bh=class extends Qr{constructor(e){super(),this.componentFactoryResolver=new jh(this),this.instance=null;let t=new hl([...e.providers,{provide:Qr,useValue:this},{provide:Da,useValue:this.componentFactoryResolver}],e.parent||Ev(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Zv(n,e,t=null){return new Bh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function MT(n){return kj(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Nj(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function kj(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Jv(n,e,t){return n[e]=t}function tr(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function Xv(n,e,t,i){let r=tr(n,e,t);return tr(n,e+1,i)||r}function Fj(n,e,t,i,r){let s=Xv(n,e,t,i);return tr(n,e+2,r)||s}function Lj(n){return(n.flags&32)===32}function Vj(n,e,t,i,r,s,o,a,c){let l=e.consts,d=nf(e,n,4,o||null,a||null);hT(e,t,d,Th(l,c)),Pv(e,d);let h=d.tView=Wv(2,d,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}function jj(n,e,t,i,r,s,o,a,c,l){let d=t+Qn,h=e.firstCreatePass?Vj(d,e,n,i,r,s,o,a,c):e.data[d];_l(h,!1);let p=Bj(e,n,h,t);Mv()&&Hv(e,n,p,h),Ks(p,n);let g=gT(p,n,p,h);return n[d]=g,rf(n,g),Cj(g,h,n),Cv(h)&&cT(e,n,h),c!=null&&lT(n,h,l),h}function Pt(n,e,t,i,r,s,o,a){let c=xe(),l=ln(),d=Th(l.consts,s);return jj(c,l,n,e,t,i,r,d,o,a),Pt}var Bj=Uj;function Uj(n,e,t,i){return Av(!0),e[Dt].createComment("")}var cl=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(cl||{}),$j=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=J({token:n,providedIn:"root",factory:()=>new n})}}return n})(),hS=class n{constructor(){this.ngZone=q(ke),this.scheduler=q(Ca),this.errorHandler=q(Xi,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[cl.EarlyRead,cl.Write,cl.MixedReadWrite,cl.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(i){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=J({token:n,providedIn:"root",factory:()=>new n})}};function ar(n,e,t,i){let r=xe(),s=Zh();if(tr(r,s,e)){let o=ln(),a=Tv();RV(a,r,n,e,t,i)}return ar}function zj(n,e,t,i){return tr(n,Zh(),t)?e+ma(t)+i:or}function Hj(n,e,t,i,r,s){let o=YL(),a=Xv(n,o,t,r);return px(2),a?e+ma(t)+i+ma(r)+s:or}function hh(n,e){return n<<17|e<<2}function Ys(n){return n>>17&32767}function qj(n){return(n&2)==2}function Wj(n,e){return n&131071|e<<17}function cv(n){return n|2}function xa(n){return(n&131068)>>2}function Dy(n,e){return n&-131069|e<<2}function Gj(n){return(n&1)===1}function lv(n){return n|1}function Kj(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Ys(o),c=xa(o);n[i]=t;let l=!1,d;if(Array.isArray(t)){let h=t;d=h[1],(d===null||vl(h,d)>0)&&(l=!0)}else d=t;if(r)if(c!==0){let p=Ys(n[a+1]);n[i+1]=hh(p,a),p!==0&&(n[p+1]=Dy(n[p+1],i)),n[a+1]=Wj(n[a+1],i)}else n[i+1]=hh(a,0),a!==0&&(n[a+1]=Dy(n[a+1],i)),a=i;else n[i+1]=hh(c,0),a===0?a=i:n[c+1]=Dy(n[c+1],i),c=i;l&&(n[i+1]=cv(n[i+1])),fS(n,d,i,!0),fS(n,d,i,!1),Qj(e,d,n,i,s),o=hh(a,c),s?e.classBindings=o:e.styleBindings=o}function Qj(n,e,t,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&vl(s,e)>=0&&(t[i+1]=lv(t[i+1]))}function fS(n,e,t,i){let r=n[t+1],s=e===null,o=i?Ys(r):xa(r),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];Yj(c,e)&&(a=!0,n[o+1]=i?lv(l):cv(l)),o=i?Ys(l):xa(l)}a&&(n[t+1]=i?cv(r):lv(r))}function Yj(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?vl(n,e)>=0:!1}function Ie(n,e,t){let i=xe(),r=Zh();if(tr(i,r,e)){let s=ln(),o=Tv();dT(s,o,i,n,e,i[Dt],t,!1)}return Ie}function pS(n,e,t,i,r){let s=e.inputs,o=r?"class":"style";Gv(n,t,s[o],o,i)}function af(n,e,t){return AT(n,e,t,!1),af}function cr(n,e){return AT(n,e,null,!0),cr}function AT(n,e,t,i){let r=xe(),s=ln(),o=px(2);if(s.firstUpdatePass&&Jj(s,n,o,i),e!==or&&tr(r,o,e)){let a=s.data[Xs()];iB(s,a,r,r[Dt],n,r[o+1]=rB(e,t),i,o)}}function Zj(n,e){return e>=n.expandoStartIndex}function Jj(n,e,t,i){let r=n.data;if(r[t+1]===null){let s=r[Xs()],o=Zj(n,t);sB(s,i)&&e===null&&!o&&(e=!1),e=Xj(r,s,e,i),Kj(r,s,e,t,o,i)}}function Xj(n,e,t,i){let r=t2(n),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=Sy(null,n,e,t,i),t=ml(t,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==r)if(t=Sy(r,n,e,t,i),s===null){let c=eB(n,e,i);c!==void 0&&Array.isArray(c)&&(c=Sy(null,n,e,c[1],i),c=ml(c,e.attrs,i),tB(n,e,i,c))}else s=nB(n,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),t}function eB(n,e,t){let i=t?e.classBindings:e.styleBindings;if(xa(i)!==0)return n[Ys(i)]}function tB(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[Ys(r)]=i}function nB(n,e,t){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=n[s].hostAttrs;i=ml(i,o,t)}return ml(i,e.attrs,t)}function Sy(n,e,t,i,r){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],i=ml(i,s.hostAttrs,r),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function ml(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),sL(n,o,t?!0:e[++s]))}return n===void 0?null:n}function iB(n,e,t,i,r,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=Gj(l)?gS(c,e,t,r,xa(l),o):void 0;if(!Uh(d)){Uh(s)||qj(l)&&(s=gS(c,null,t,r,a,o));let h=ix(Xs(),t);uV(i,o,h,r,s)}}function gS(n,e,t,i,r,s){let o=e===null,a;for(;r>0;){let c=n[r],l=Array.isArray(c),d=l?c[1]:c,h=d===null,p=t[r+1];p===or&&(p=h?Sn:void 0);let g=h?my(p,i):d===i?p:void 0;if(l&&!Uh(g)&&(g=my(c,i)),Uh(g)&&(a=g,o))return a;let y=n[r+1];r=o?Ys(y):xa(y)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=my(c,i))}return a}function Uh(n){return n!==void 0}function rB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=en(wl(n)))),n}function sB(n,e){return(n.flags&(e?8:16))!==0}function oB(n,e,t,i,r,s){let o=e.consts,a=Th(o,r),c=nf(e,n,2,i,a);return hT(e,t,c,Th(o,s)),c.attrs!==null&&rv(c,c.attrs,!1),c.mergedAttrs!==null&&rv(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function M(n,e,t,i){let r=xe(),s=ln(),o=Qn+n,a=r[Dt],c=s.firstCreatePass?oB(o,s,r,e,t,i):s.data[o],l=aB(s,r,c,a,e,n);r[o]=l;let d=Cv(c);return _l(c,!0),nT(a,l,c),!Lj(c)&&Mv()&&Hv(s,r,l,c),$L()===0&&Ks(l,r),zL(),d&&(cT(s,r,c),aT(s,c,r)),i!==null&&lT(r,c),M}function R(){let n=rn();hx()?QL():(n=n.parent,_l(n,!1));let e=n;WL(e)&&GL(),HL();let t=ln();return t.firstCreatePass&&(Pv(t,n),ZS(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&l2(e)&&pS(t,e,xe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&u2(e)&&pS(t,e,xe(),e.stylesWithoutHost,!1),R}function Te(n,e,t,i){return M(n,e,t,i),R(),Te}var aB=(n,e,t,i,r,s)=>(Av(!0),Kx(i,r,s2()));function Pa(){return xe()}var js=void 0;function cB(n){let e=n,t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&i===0?1:5}var lB=["en",[["a","p"],["AM","PM"],js],[["AM","PM"],js,js],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],js,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],js,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",js,"{1} 'at' {0}",js],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",cB],xy={};function Rn(n){let e=uB(n),t=mS(e);if(t)return t;let i=e.split("-")[0];if(t=mS(i),t)return t;if(i==="en")return lB;throw new Q(701,!1)}function mS(n){return n in xy||(xy[n]=Bs.ng&&Bs.ng.common&&Bs.ng.common.locales&&Bs.ng.common.locales[n]),xy[n]}var lt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(lt||{});function uB(n){return n.toLowerCase().replace(/_/g,"-")}var $h="en-US";var dB=$h;function hB(n){typeof n=="string"&&(dB=n.toLowerCase().replace(/_/g,"-"))}var fB=(n,e,t)=>{};function ie(n,e,t,i){let r=xe(),s=ln(),o=rn();return PT(s,r,r[Dt],o,n,e,i),ie}function pB(n,e,t,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===t&&r[s+1]===i){let a=e[Ch],c=r[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function PT(n,e,t,i,r,s,o){let a=Cv(i),l=n.firstCreatePass&&LV(n),d=e[Kn],h=FV(e),p=!0;if(i.type&3||o){let v=An(i,e),_=o?o(v):v,T=h.length,P=o?j=>o(yi(j[i.index])):i.index,N=null;if(!o&&a&&(N=pB(n,e,r,i.index)),N!==null){let j=N.__ngLastListenerFn__||N;j.__ngNextListenerFn__=s,N.__ngLastListenerFn__=s,p=!1}else{s=vS(i,e,d,s),fB(v,r,s);let j=t.listen(_,r,s);h.push(s,j),l&&l.push(r,P,T,T+1)}}else s=vS(i,e,d,s);let g=i.outputs,y;if(p&&g!==null&&(y=g[r])){let v=y.length;if(v)for(let _=0;_<v;_+=2){let T=y[_],P=y[_+1],L=e[T][P].subscribe(s),k=h.length;h.push(s,L),l&&l.push(r,i.index,k,-(k+1))}}}function yS(n,e,t,i){let r=De(null);try{return hi(6,e,t),t(i)!==!1}catch(s){return yT(n,s),!1}finally{hi(7,e,t),De(r)}}function vS(n,e,t,i){return function r(s){if(s===Function)return i;let o=n.componentOffset>-1?Zr(n.index,e):e;Qv(o,5);let a=yS(e,t,i,s),c=r.__ngNextListenerFn__;for(;c;)a=yS(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function St(n=1){return i2(n)}function gB(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function V(n,e=""){let t=xe(),i=ln(),r=n+Qn,s=i.firstCreatePass?nf(i,r,1,e,null):i.data[r],o=mB(i,t,s,e,n);t[r]=o,Mv()&&Hv(i,t,o,s),_l(s,!1)}var mB=(n,e,t,i,r)=>(Av(!0),G2(e[Dt],i));function Ft(n){return wi("",n,""),Ft}function wi(n,e,t){let i=xe(),r=zj(i,n,e,t);return r!==or&&vT(i,Xs(),r),wi}function e_(n,e,t,i,r){let s=xe(),o=Hj(s,n,e,t,i,r);return o!==or&&vT(s,Xs(),o),e_}function Qe(n,e,t){TT(e)&&(e=e());let i=xe(),r=Zh();if(tr(i,r,e)){let s=ln(),o=Tv();dT(s,o,i,n,e,i[Dt],t,!1)}return Qe}function et(n,e){let t=TT(n);return t&&n.set(e),t}function Ye(n,e){let t=xe(),i=ln(),r=rn();return PT(i,t,t[Dt],r,n,e),Ye}function yB(n,e,t){let i=ln();if(i.firstCreatePass){let r=Kr(n);uv(t,i.data,i.blueprint,r,!0),uv(e,i.data,i.blueprint,r,!1)}}function uv(n,e,t,i,r){if(n=Xt(n),Array.isArray(n))for(let s=0;s<n.length;s++)uv(n[s],e,t,i,r);else{let s=ln(),o=xe(),a=rn(),c=_a(n)?n:Xt(n.provide),l=KS(n),d=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if(_a(n)||!n.multi){let g=new Gs(l,r,W),y=My(c,e,r?d:d+p,h);y===-1?(zy(Rh(a,o),s,c),Ty(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(g),o.push(g)):(t[y]=g,o[y]=g)}else{let g=My(c,e,d+p,h),y=My(c,e,d,d+p),v=g>=0&&t[g],_=y>=0&&t[y];if(r&&!_||!r&&!v){zy(Rh(a,o),s,c);let T=bB(r?_B:vB,t.length,r,i,l);!r&&_&&(t[y].providerFactory=T),Ty(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(T),o.push(T)}else{let T=RT(t[r?y:g],l,!r&&i);Ty(s,n,g>-1?g:y,T)}!r&&i&&_&&t[y].componentProviders++}}}function Ty(n,e,t,i){let r=_a(e),s=SL(e);if(r||s){let c=(s?Xt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[i,c]):l[d+1].push(i,c)}else l.push(t,c)}}}function RT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function My(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function vB(n,e,t,i){return dv(this.multi,[])}function _B(n,e,t,i){let r=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Ea(t,t[ge],this.providerFactory.index,i);s=a.slice(0,o),dv(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],dv(r,s);return s}function dv(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function bB(n,e,t,i,r){let s=new Gs(n,t,W);return s.multi=[],s.index=e,s.componentProviders=0,RT(s,r,i&&!t),s}function lr(n,e=[]){return t=>{t.providersResolver=(i,r)=>yB(i,r?r(n):n,e)}}var wB=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=qS(!1,t.type),r=i.length>0?Zv([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=J({token:n,providedIn:"environment",factory:()=>new n(le(Mn))})}}return n})();function pt(n){Il("NgStandalone"),n.getStandaloneInjector=e=>e.get(wB).getOrCreateStandaloneInjector(n)}function On(n,e,t,i){return kT(xe(),bl(),n,e,t,i)}function OT(n,e,t,i,r){return FT(xe(),bl(),n,e,t,i,r)}function NT(n,e,t,i,r,s){return IB(xe(),bl(),n,e,t,i,r,s)}function t_(n,e){let t=n[e];return t===or?void 0:t}function kT(n,e,t,i,r,s){let o=e+t;return tr(n,o,r)?Jv(n,o+1,s?i.call(s,r):i(r)):t_(n,o+1)}function FT(n,e,t,i,r,s,o){let a=e+t;return Xv(n,a,r,s)?Jv(n,a+2,o?i.call(o,r,s):i(r,s)):t_(n,a+2)}function IB(n,e,t,i,r,s,o,a){let c=e+t;return Fj(n,c,r,s,o)?Jv(n,c+3,a?i.call(a,r,s,o):i(r,s,o)):t_(n,c+3)}function Ra(n,e){let t=ln(),i,r=n+Qn;t.firstCreatePass?(i=EB(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let s=i.factory||(i.factory=$s(i.type,!0)),o,a=an(W);try{let c=Ph(!1),l=s();return Ph(c),gB(t,xe(),r,l),l}finally{an(a)}}function EB(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function cf(n,e,t){let i=n+Qn,r=xe(),s=sx(r,i);return VT(r,i)?kT(r,bl(),e,s.transform,t,s):s.transform(t)}function LT(n,e,t,i){let r=n+Qn,s=xe(),o=sx(s,r);return VT(s,r)?FT(s,bl(),e,o.transform,t,i,o):o.transform(t,i)}function VT(n,e){return n[ge].data[e].pure}var nr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},jT=new nr("18.2.11");var lf=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var BT=new Y("");function eo(n){return!!n&&typeof n.then=="function"}function UT(n){return!!n&&typeof n.subscribe=="function"}var $T=new Y(""),zT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=q($T,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let s=r();if(eo(s))t.push(s);else if(UT(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),n_=new Y("");function CB(){aD(()=>{throw new Q(600,!1)})}function DB(n){return n.isBoundToModule}var SB=10;function xB(n,e,t){try{let i=t();return eo(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var to=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=q(A2),this.afterRenderManager=q($j),this.zonelessEnabled=q(of),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new At,this.afterTick=new At,this.componentTypes=[],this.components=[],this.isStable=q(Ma).hasPendingTasks.pipe(de(t=>!t)),this._injector=q(Mn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,i){let r=t instanceof Vh;if(!this._injector.get(zT).done){let p=!r&&US(t),g=!1;throw new Q(405,g)}let o;r?o=t:o=this._injector.get(Da).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=DB(o)?void 0:this._injector.get(Qr),c=i||o.selector,l=o.create(cn.NULL,[],c,a),d=l.location.nativeElement,h=l.injector.get(BT,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),yh(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Q(101,!1);let t=De(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,De(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Sa,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<SB;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:r,notifyErrorHandler:s}of this._views)TB(r,s,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Qh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;yh(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let i=this._injector.get(n_,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>yh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function TB(n,e,t,i){if(!t&&!Qh(n))return;wT(n,e,t&&!i?0:1)}var hv=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},i_=(()=>{class n{compileModuleSync(t){return new av(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=$S(t),s=Gx(r.declarations).reduce((o,a)=>{let c=zs(a);return c&&o.push(new pl(c)),o},[]);return new hv(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var MB=(()=>{class n{constructor(){this.zone=q(ke),this.changeDetectionScheduler=q(Ca),this.applicationRef=q(to)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),AB=new Y("",{factory:()=>!1});function HT({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ke(X($({},WT()),{scheduleInRootZone:t})),[{provide:ke,useFactory:n},{provide:va,multi:!0,useFactory:()=>{let i=q(MB,{optional:!0});return()=>i.initialize()}},{provide:va,multi:!0,useFactory:()=>{let i=q(PB);return()=>{i.initialize()}}},e===!0?{provide:DT,useValue:!0}:[],{provide:ST,useValue:t??Ox}]}function qT(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,i=HT({ngZoneFactory:()=>{let r=WT(n);return r.scheduleInRootZone=t,r.shouldCoalesceEventChangeDetection&&Il("NgZone_CoalesceEvent"),new ke(r)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return vi([{provide:AB,useValue:!0},{provide:of,useValue:!1},i])}function WT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var PB=(()=>{class n{constructor(){this.subscription=new st,this.initialized=!1,this.zone=q(ke),this.pendingTasks=q(Ma)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ke.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ke.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var RB=(()=>{class n{constructor(){this.appRef=q(to),this.taskService=q(Ma),this.ngZone=q(ke),this.zonelessEnabled=q(of),this.disableScheduling=q(DT,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new st,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Nh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(q(ST,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ky||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?JD:kx;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Nh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,JD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function OB(){return typeof $localize<"u"&&$localize.locale||$h}var uf=new Y("",{providedIn:"root",factory:()=>q(uf,fe.Optional|fe.SkipSelf)||OB()});var fv=new Y("");function fh(n){return!n.moduleRef}function NB(n){let e=fh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ke);return t.run(()=>{fh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Xi,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:s=>{i.handleError(s)}})}),fh(n)){let s=()=>e.destroy(),o=n.platformInjector.get(fv);o.add(s),e.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(fv);o.add(s),n.moduleRef.onDestroy(()=>{yh(n.allPlatformModules,n.moduleRef),r.unsubscribe(),o.delete(s)})}return xB(i,t,()=>{let s=e.get(zT);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(uf,$h);if(hB(o||$h),fh(n)){let a=e.get(to);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return kB(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function kB(n,e){let t=n.injector.get(to);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Q(-403,!1);e.push(n)}var vh=null;function FB(n=[],e){return cn.create({name:e,providers:[{provide:Wh,useValue:"platform"},{provide:fv,useValue:new Set([()=>vh=null])},...n]})}function LB(n=[]){if(vh)return vh;let e=FB(n);return vh=e,CB(),VB(e),e}function VB(n){n.get(Lv,null)?.forEach(t=>t())}var no=(()=>{class n{static{this.__NG_ELEMENT_ID__=jB}}return n})();function jB(n){return BB(rn(),xe(),(n&16)===16)}function BB(n,e,t){if(Kh(n)&&!t){let i=Zr(n.index,e);return new Qs(i,i)}else if(n.type&175){let i=e[mi];return new Qs(i,e)}return null}var pv=class{constructor(){}supports(e){return MT(e)}create(e){return new gv(e)}},UB=(n,e)=>e,gv=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||UB}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){let o=!i||t&&t.currentIndex<_S(i,r,s)?t:i,a=_S(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,o.previousIndex==null)r++;else{s||(s=[]);let l=a-r,d=c-r;if(l!=d){for(let p=0;p<l;p++){let g=p<s.length?s[p]:s[p]=0,y=g+p;d<=y&&y<l&&(s[p]=g+1)}let h=o.previousIndex;s[h]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!MT(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),i=!0):(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else r=0,Nj(e,a=>{o=this._trackByFn(r,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new mv(t,i),s,r)),e}_verifyReinsertion(e,t,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,s=e._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new zh),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new zh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},mv=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},yv=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},zh=class{constructor(){this.map=new Map}put(e){let t=e.trackById,i=this.map.get(t);i||(i=new yv,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function _S(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function bS(){return new r_([new pv])}var r_=(()=>{class n{static{this.\u0275prov=J({token:n,providedIn:"root",factory:bS})}constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||bS()),deps:[[n,new PS,new nn]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new Q(901,!1)}}return n})();function GT(n){try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=LB(i),s=[HT({}),{provide:Ca,useExisting:RB},...t||[]],o=new Bh({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return NB({r3Injector:o.injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}}function Xr(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Cl(n,e){Il("NgSignals");let t=rD(n);return e?.equal&&(t[Yi].equal=e.equal),t}function ur(n){let e=De(null);try{return n()}finally{De(e)}}var eM=null;function fr(){return eM}function tM(n){eM??=n}var _f=class{};var kn=new Y(""),nM=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:()=>q($B),providedIn:"platform"})}}return n})();var $B=(()=>{class n extends nM{constructor(){super(),this._doc=q(kn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fr().getBaseHref(this._doc)}onPopState(t){let i=fr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=fr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function iM(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function KT(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,i=t-(n[t-1]==="/"?1:0);return n.slice(0,i)+n.slice(t)}function io(n){return n&&n[0]!=="?"?"?"+n:n}var Oa=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:()=>q(rM),providedIn:"root"})}}return n})(),zB=new Y(""),rM=(()=>{class n extends Oa{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??q(kn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return iM(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+io(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+io(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+io(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(le(nM),le(zB,8))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Dl=(()=>{class n{constructor(t){this._subject=new ht,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=WB(KT(QT(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+io(i))}normalize(t){return n.stripTrailingSlash(qB(this._basePath,QT(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+io(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+io(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static{this.normalizeQueryParams=io}static{this.joinWithSlash=iM}static{this.stripTrailingSlash=KT}static{this.\u0275fac=function(i){return new(i||n)(le(Oa))}}static{this.\u0275prov=J({token:n,factory:()=>HB(),providedIn:"root"})}}return n})();function HB(){return new Dl(le(Oa))}function qB(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function QT(n){return n.replace(/\/index.html$/,"")}function WB(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var sn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(sn||{}),je=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(je||{}),vn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(vn||{}),es={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function GB(n){return Rn(n)[lt.LocaleId]}function KB(n,e,t){let i=Rn(n),r=[i[lt.DayPeriodsFormat],i[lt.DayPeriodsStandalone]],s=Nn(r,e);return Nn(s,t)}function QB(n,e,t){let i=Rn(n),r=[i[lt.DaysFormat],i[lt.DaysStandalone]],s=Nn(r,e);return Nn(s,t)}function YB(n,e,t){let i=Rn(n),r=[i[lt.MonthsFormat],i[lt.MonthsStandalone]],s=Nn(r,e);return Nn(s,t)}function ZB(n,e){let i=Rn(n)[lt.Eras];return Nn(i,e)}function df(n,e){let t=Rn(n);return Nn(t[lt.DateFormat],e)}function hf(n,e){let t=Rn(n);return Nn(t[lt.TimeFormat],e)}function ff(n,e){let i=Rn(n)[lt.DateTimeFormat];return Nn(i,e)}function If(n,e){let t=Rn(n),i=t[lt.NumberSymbols][e];if(typeof i>"u"){if(e===es.CurrencyDecimal)return t[lt.NumberSymbols][es.Decimal];if(e===es.CurrencyGroup)return t[lt.NumberSymbols][es.Group]}return i}function sM(n){if(!n[lt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[lt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function JB(n){let e=Rn(n);return sM(e),(e[lt.ExtraData][2]||[]).map(i=>typeof i=="string"?s_(i):[s_(i[0]),s_(i[1])])}function XB(n,e,t){let i=Rn(n);sM(i);let r=[i[lt.ExtraData][0],i[lt.ExtraData][1]],s=Nn(r,e)||[];return Nn(s,t)||[]}function Nn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function s_(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var eU=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,pf={},tU=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,hr=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(hr||{}),Pe=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Pe||{}),Ae=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Ae||{});function nU(n,e,t,i){let r=dU(n);e=dr(t,e)||e;let o=[],a;for(;e;)if(a=tU.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=r.getTimezoneOffset();i&&(c=aM(i,c),r=uU(r,i,!0));let l="";return o.forEach(d=>{let h=cU(d);l+=h?h(r,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function bf(n,e,t){let i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function dr(n,e){let t=GB(n);if(pf[t]??={},pf[t][e])return pf[t][e];let i="";switch(e){case"shortDate":i=df(n,vn.Short);break;case"mediumDate":i=df(n,vn.Medium);break;case"longDate":i=df(n,vn.Long);break;case"fullDate":i=df(n,vn.Full);break;case"shortTime":i=hf(n,vn.Short);break;case"mediumTime":i=hf(n,vn.Medium);break;case"longTime":i=hf(n,vn.Long);break;case"fullTime":i=hf(n,vn.Full);break;case"short":let r=dr(n,"shortTime"),s=dr(n,"shortDate");i=gf(ff(n,vn.Short),[r,s]);break;case"medium":let o=dr(n,"mediumTime"),a=dr(n,"mediumDate");i=gf(ff(n,vn.Medium),[o,a]);break;case"long":let c=dr(n,"longTime"),l=dr(n,"longDate");i=gf(ff(n,vn.Long),[c,l]);break;case"full":let d=dr(n,"fullTime"),h=dr(n,"fullDate");i=gf(ff(n,vn.Full),[d,h]);break}return i&&(pf[t][e]=i),i}function gf(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return e!=null&&i in e?e[i]:t})),n}function ni(n,e,t="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function iU(n,e){return ni(n,3).substring(0,e)}function gt(n,e,t=0,i=!1,r=!1){return function(s,o){let a=rU(n,s);if((t>0||a>-t)&&(a+=t),n===Pe.Hours)a===0&&t===-12&&(a=12);else if(n===Pe.FractionalSeconds)return iU(a,e);let c=If(o,es.MinusSign);return ni(a,e,c,i,r)}}function rU(n,e){switch(n){case Pe.FullYear:return e.getFullYear();case Pe.Month:return e.getMonth();case Pe.Date:return e.getDate();case Pe.Hours:return e.getHours();case Pe.Minutes:return e.getMinutes();case Pe.Seconds:return e.getSeconds();case Pe.FractionalSeconds:return e.getMilliseconds();case Pe.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function $e(n,e,t=sn.Format,i=!1){return function(r,s){return sU(r,s,n,e,t,i)}}function sU(n,e,t,i,r,s){switch(t){case Ae.Months:return YB(e,r,i)[n.getMonth()];case Ae.Days:return QB(e,r,i)[n.getDay()];case Ae.DayPeriods:let o=n.getHours(),a=n.getMinutes();if(s){let l=JB(e),d=XB(e,r,i),h=l.findIndex(p=>{if(Array.isArray(p)){let[g,y]=p,v=o>=g.hours&&a>=g.minutes,_=o<y.hours||o===y.hours&&a<y.minutes;if(g.hours<y.hours){if(v&&_)return!0}else if(v||_)return!0}else if(p.hours===o&&p.minutes===a)return!0;return!1});if(h!==-1)return d[h]}return KB(e,r,i)[o<12?0:1];case Ae.Eras:return ZB(e,i)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function mf(n){return function(e,t,i){let r=-1*i,s=If(t,es.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case hr.Short:return(r>=0?"+":"")+ni(o,2,s)+ni(Math.abs(r%60),2,s);case hr.ShortGMT:return"GMT"+(r>=0?"+":"")+ni(o,1,s);case hr.Long:return"GMT"+(r>=0?"+":"")+ni(o,2,s)+":"+ni(Math.abs(r%60),2,s);case hr.Extended:return i===0?"Z":(r>=0?"+":"")+ni(o,2,s)+":"+ni(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var oU=0,vf=4;function aU(n){let e=bf(n,oU,1).getDay();return bf(n,0,1+(e<=vf?vf:vf+7)-e)}function oM(n){let e=n.getDay(),t=e===0?-3:vf-e;return bf(n.getFullYear(),n.getMonth(),n.getDate()+t)}function o_(n,e=!1){return function(t,i){let r;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();r=1+Math.floor((o+s)/7)}else{let s=oM(t),o=aU(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return ni(r,n,If(i,es.MinusSign))}}function yf(n,e=!1){return function(t,i){let s=oM(t).getFullYear();return ni(s,n,If(i,es.MinusSign),e)}}var a_={};function cU(n){if(a_[n])return a_[n];let e;switch(n){case"G":case"GG":case"GGG":e=$e(Ae.Eras,je.Abbreviated);break;case"GGGG":e=$e(Ae.Eras,je.Wide);break;case"GGGGG":e=$e(Ae.Eras,je.Narrow);break;case"y":e=gt(Pe.FullYear,1,0,!1,!0);break;case"yy":e=gt(Pe.FullYear,2,0,!0,!0);break;case"yyy":e=gt(Pe.FullYear,3,0,!1,!0);break;case"yyyy":e=gt(Pe.FullYear,4,0,!1,!0);break;case"Y":e=yf(1);break;case"YY":e=yf(2,!0);break;case"YYY":e=yf(3);break;case"YYYY":e=yf(4);break;case"M":case"L":e=gt(Pe.Month,1,1);break;case"MM":case"LL":e=gt(Pe.Month,2,1);break;case"MMM":e=$e(Ae.Months,je.Abbreviated);break;case"MMMM":e=$e(Ae.Months,je.Wide);break;case"MMMMM":e=$e(Ae.Months,je.Narrow);break;case"LLL":e=$e(Ae.Months,je.Abbreviated,sn.Standalone);break;case"LLLL":e=$e(Ae.Months,je.Wide,sn.Standalone);break;case"LLLLL":e=$e(Ae.Months,je.Narrow,sn.Standalone);break;case"w":e=o_(1);break;case"ww":e=o_(2);break;case"W":e=o_(1,!0);break;case"d":e=gt(Pe.Date,1);break;case"dd":e=gt(Pe.Date,2);break;case"c":case"cc":e=gt(Pe.Day,1);break;case"ccc":e=$e(Ae.Days,je.Abbreviated,sn.Standalone);break;case"cccc":e=$e(Ae.Days,je.Wide,sn.Standalone);break;case"ccccc":e=$e(Ae.Days,je.Narrow,sn.Standalone);break;case"cccccc":e=$e(Ae.Days,je.Short,sn.Standalone);break;case"E":case"EE":case"EEE":e=$e(Ae.Days,je.Abbreviated);break;case"EEEE":e=$e(Ae.Days,je.Wide);break;case"EEEEE":e=$e(Ae.Days,je.Narrow);break;case"EEEEEE":e=$e(Ae.Days,je.Short);break;case"a":case"aa":case"aaa":e=$e(Ae.DayPeriods,je.Abbreviated);break;case"aaaa":e=$e(Ae.DayPeriods,je.Wide);break;case"aaaaa":e=$e(Ae.DayPeriods,je.Narrow);break;case"b":case"bb":case"bbb":e=$e(Ae.DayPeriods,je.Abbreviated,sn.Standalone,!0);break;case"bbbb":e=$e(Ae.DayPeriods,je.Wide,sn.Standalone,!0);break;case"bbbbb":e=$e(Ae.DayPeriods,je.Narrow,sn.Standalone,!0);break;case"B":case"BB":case"BBB":e=$e(Ae.DayPeriods,je.Abbreviated,sn.Format,!0);break;case"BBBB":e=$e(Ae.DayPeriods,je.Wide,sn.Format,!0);break;case"BBBBB":e=$e(Ae.DayPeriods,je.Narrow,sn.Format,!0);break;case"h":e=gt(Pe.Hours,1,-12);break;case"hh":e=gt(Pe.Hours,2,-12);break;case"H":e=gt(Pe.Hours,1);break;case"HH":e=gt(Pe.Hours,2);break;case"m":e=gt(Pe.Minutes,1);break;case"mm":e=gt(Pe.Minutes,2);break;case"s":e=gt(Pe.Seconds,1);break;case"ss":e=gt(Pe.Seconds,2);break;case"S":e=gt(Pe.FractionalSeconds,1);break;case"SS":e=gt(Pe.FractionalSeconds,2);break;case"SSS":e=gt(Pe.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=mf(hr.Short);break;case"ZZZZZ":e=mf(hr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=mf(hr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=mf(hr.Long);break;default:return null}return a_[n]=e,e}function aM(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function lU(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function uU(n,e,t){let i=t?-1:1,r=n.getTimezoneOffset(),s=aM(e,r);return lU(n,i*(s-r))}function dU(n){if(YT(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,s=1,o=1]=n.split("-").map(a=>+a);return bf(r,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(eU))return hU(i)}let e=new Date(n);if(!YT(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function hU(n){let e=new Date(0),t=0,i=0,r=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-i,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,l),e}function YT(n){return n instanceof Date&&!isNaN(n.valueOf())}function cM(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,s]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var c_=/\s+/,ZT=[],Na=(()=>{class n{constructor(t,i){this._ngEl=t,this._renderer=i,this.initialClasses=ZT,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(c_):ZT}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(c_):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(c_).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static{this.\u0275fac=function(i){return new(i||n)(W(ti),W(bi))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var l_=class{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ts=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new l_(r.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)i.remove(s===null?void 0:s);else if(s!==null){let a=i.get(s);i.move(a,o),JT(a,r)}});for(let r=0,s=i.length;r<s;r++){let a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let s=i.get(r.currentIndex);JT(s,r)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(W(Aa),W(sf),W(r_))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function JT(n,e){n.context.$implicit=e.item}var ka=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new u_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){XT("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){XT("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(W(Aa),W(sf))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),u_=class{constructor(){this.$implicit=null,this.ngIf=null}};function XT(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${en(e)}'.`)}function fU(n,e){return new Q(2100,!1)}var pU="mediumDate",gU=new Y(""),mU=new Y(""),Ef=(()=>{class n{constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,s){if(t==null||t===""||t!==t)return null;try{let o=i??this.defaultOptions?.dateFormat??pU,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return nU(t,o,s||this.locale,a)}catch(o){throw fU(n,o.message)}}static{this.\u0275fac=function(i){return new(i||n)(W(uf,16),W(gU,24),W(mU,24))}}static{this.\u0275pipe=VS({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var lM="browser",yU="server";function d_(n){return n===yU}var wf=class{};var p_=class extends _f{constructor(){super(...arguments),this.supportsDOMEvents=!0}},g_=class n extends p_{static makeCurrent(){tM(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=_U();return t==null?null:bU(t)}resetBaseElement(){Sl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return cM(document.cookie,e)}},Sl=null;function _U(){return Sl=Sl||document.querySelector("base"),Sl?Sl.getAttribute("href"):null}function bU(n){return new URL(n,document.baseURI).pathname}var wU=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),m_=new Y(""),fM=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new Q(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(le(m_),le(ke))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),Cf=class{constructor(e){this._doc=e}},h_="ng-app-id",pM=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=d_(s),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${h_}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(h_),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(h_,this.appId),t.appendChild(o),o}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(le(kn),le(Fv),le(Vv,8),le(Jr))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),f_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},v_=/%COMP%/g,gM="%COMP%",IU=`_nghost-${gM}`,EU=`_ngcontent-${gM}`,CU=!0,DU=new Y("",{providedIn:"root",factory:()=>CU});function SU(n){return EU.replace(v_,n)}function xU(n){return IU.replace(v_,n)}function mM(n,e){return e.map(t=>t.replace(v_,n))}var uM=(()=>{class n{constructor(t,i,r,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=d_(a),this.defaultRenderer=new xl(t,o,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===pi.ShadowDom&&(i=X($({},i),{encapsulation:pi.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof Df?r.applyToHost(t):r instanceof Tl&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case pi.Emulated:s=new Df(c,l,i,this.appId,d,o,a,h);break;case pi.ShadowDom:return new y_(c,l,t,i,o,a,this.nonce,h);default:s=new Tl(c,l,i,d,o,a,h);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(le(fM),le(pM),le(Fv),le(DU),le(kn),le(Jr),le(ke),le(Vv))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),xl=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(f_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(dM(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(dM(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Q(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=f_[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=f_[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(er.DashCase|er.Important)?e.style.setProperty(t,i,r&er.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&er.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=fr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function dM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var y_=class extends xl{constructor(e,t,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=mM(r.id,r.styles);for(let d of l){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Tl=class extends xl{constructor(e,t,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?mM(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Df=class extends Tl{constructor(e,t,i,r,s,o,a,c){let l=r+"-"+i.id;super(e,t,i,s,o,a,c,l),this.contentAttr=SU(l),this.hostAttr=xU(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},TU=(()=>{class n extends Cf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(le(kn))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})(),hM=["alt","control","meta","shift"],MU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},AU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},PU=(()=>{class n extends Cf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fr().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),hM.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),o+=l+".")}),o+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=MU[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),hM.forEach(o=>{if(o!==r){let a=AU[o];a(t)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(le(kn))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac})}}return n})();function yM(n,e){return GT($({rootComponent:n},RU(e)))}function RU(n){return{appProviders:[...LU,...n?.providers??[]],platformProviders:FU}}function OU(){g_.makeCurrent()}function NU(){return new Xi}function kU(){return $x(document),document}var FU=[{provide:Jr,useValue:lM},{provide:Lv,useValue:OU,multi:!0},{provide:kn,useFactory:kU,deps:[]}];var LU=[{provide:Wh,useValue:"root"},{provide:Xi,useFactory:NU,deps:[]},{provide:m_,useClass:TU,multi:!0,deps:[kn,ke,Jr]},{provide:m_,useClass:PU,multi:!0,deps:[kn]},uM,pM,fM,{provide:Sa,useExisting:uM},{provide:wf,useClass:wU,deps:[]},[]];var vM=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(le(kn))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ue="primary",Hl=Symbol("RouteTitle"),E_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ua(n){return new E_(n)}function jU(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function BU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ii(n[t],e[t]))return!1;return!0}function Ii(n,e){let t=n?C_(n):void 0,i=e?C_(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!SM(n[r],e[r]))return!1;return!0}function C_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function SM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function xM(n){return n.length>0?n[n.length-1]:null}function is(n){return uy(n)?n:eo(n)?Xe(Promise.resolve(n)):oe(n)}var UU={exact:MM,subset:AM},TM={exact:$U,subset:zU,ignored:()=>!0};function _M(n,e,t){return UU[t.paths](n.root,e.root,t.matrixParams)&&TM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function $U(n,e){return Ii(n,e)}function MM(n,e,t){if(!so(n.segments,e.segments)||!Tf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!MM(n.children[i],e.children[i],t))return!1;return!0}function zU(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>SM(n[t],e[t]))}function AM(n,e,t){return PM(n,e,e.segments,t)}function PM(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!so(r,t)||e.hasChildren()||!Tf(r,t,i))}else if(n.segments.length===t.length){if(!so(n.segments,t)||!Tf(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!AM(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!so(n.segments,r)||!Tf(n.segments,r,i)||!n.children[ue]?!1:PM(n.children[ue],e,s,i)}}function Tf(n,e,t){return e.every((i,r)=>TM[t](n[r].parameters,i.parameters))}var gr=class{constructor(e=new Re([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Ua(this.queryParams),this._queryParamMap}toString(){return WU.serialize(this)}},Re=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mf(this)}},ro=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ua(this.parameters),this._parameterMap}toString(){return OM(this)}};function HU(n,e){return so(n,e)&&n.every((t,i)=>Ii(t.parameters,e[i].parameters))}function so(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function qU(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===ue&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==ue&&(t=t.concat(e(r,i)))}),t}var Y_=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:()=>new kl,providedIn:"root"})}}return n})(),kl=class{parse(e){let t=new S_(e);return new gr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ml(e.root,!0)}`,i=QU(e.queryParams),r=typeof e.fragment=="string"?`#${GU(e.fragment)}`:"";return`${t}${i}${r}`}},WU=new kl;function Mf(n){return n.segments.map(e=>OM(e)).join("/")}function Ml(n,e){if(!n.hasChildren())return Mf(n);if(e){let t=n.children[ue]?Ml(n.children[ue],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==ue&&i.push(`${r}:${Ml(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=qU(n,(i,r)=>r===ue?[Ml(n.children[ue],!1)]:[`${r}:${Ml(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[ue]!=null?`${Mf(n)}/${t[0]}`:`${Mf(n)}/(${t.join("//")})`}}function RM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sf(n){return RM(n).replace(/%3B/gi,";")}function GU(n){return encodeURI(n)}function D_(n){return RM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Af(n){return decodeURIComponent(n)}function bM(n){return Af(n.replace(/\+/g,"%20"))}function OM(n){return`${D_(n.path)}${KU(n.parameters)}`}function KU(n){return Object.entries(n).map(([e,t])=>`;${D_(e)}=${D_(t)}`).join("")}function QU(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Sf(t)}=${Sf(r)}`).join("&"):`${Sf(t)}=${Sf(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var YU=/^[^\/()?;#]+/;function __(n){let e=n.match(YU);return e?e[0]:""}var ZU=/^[^\/()?;=#]+/;function JU(n){let e=n.match(ZU);return e?e[0]:""}var XU=/^[^=?&#]+/;function e4(n){let e=n.match(XU);return e?e[0]:""}var t4=/^[^&#]+/;function n4(n){let e=n.match(t4);return e?e[0]:""}var S_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Re([],{}):new Re([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ue]=new Re(e,t)),i}parseSegment(){let e=__(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new ro(Af(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=JU(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=__(this.remaining);r&&(i=r,this.capture(i))}e[Af(t)]=Af(i)}parseQueryParam(e){let t=e4(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=n4(this.remaining);o&&(i=o,this.capture(i))}let r=bM(t),s=bM(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=__(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Q(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ue);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ue]:new Re([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function NM(n){return n.segments.length>0?new Re([],{[ue]:n}):n}function kM(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=kM(r);if(i===ue&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new Re(n.segments,e);return i4(t)}function i4(n){if(n.numberOfChildren===1&&n.children[ue]){let e=n.children[ue];return new Re(n.segments.concat(e.segments),e.children)}return n}function oo(n){return n instanceof gr}function r4(n,e,t=null,i=null){let r=FM(n);return LM(r,e,t,i)}function FM(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new Re(s.url,o);return s===n&&(e=a),a}let i=t(n.root),r=NM(i);return e??r}function LM(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return b_(r,r,r,t,i);let s=s4(e);if(s.toRoot())return b_(r,r,new Re([],{}),t,i);let o=o4(s,r,n),a=o.processChildren?Rl(o.segmentGroup,o.index,s.commands):jM(o.segmentGroup,o.index,s.commands);return b_(r,o.segmentGroup,a,t,i)}function Pf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Fl(n){return typeof n=="object"&&n!=null&&n.outlets}function b_(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;n===e?o=t:o=VM(n,e,t);let a=NM(kM(o));return new gr(a,s,r)}function VM(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=VM(s,e,t)}),new Re(n.segments,i)}var Rf=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Pf(i[0]))throw new Q(4003,!1);let r=i.find(Fl);if(r&&r!==xM(i))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function s4(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Rf(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new Rf(t,e,i)}var Va=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function o4(n,e,t){if(n.isAbsolute)return new Va(e,!0,0);if(!t)return new Va(e,!1,NaN);if(t.parent===null)return new Va(t,!0,0);let i=Pf(n.commands[0])?0:1,r=t.segments.length-1+i;return a4(t,r,n.numberOfDoubleDots)}function a4(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Q(4005,!1);r=i.segments.length}return new Va(i,!1,r-s)}function c4(n){return Fl(n[0])?n[0].outlets:{[ue]:n}}function jM(n,e,t){if(n??=new Re([],{}),n.segments.length===0&&n.hasChildren())return Rl(n,e,t);let i=l4(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new Re(n.segments.slice(0,i.pathIndex),{});return s.children[ue]=new Re(n.segments.slice(i.pathIndex),n.children),Rl(s,0,r)}else return i.match&&r.length===0?new Re(n.segments,{}):i.match&&!n.hasChildren()?x_(n,e,t):i.match?Rl(n,0,r):x_(n,e,t)}function Rl(n,e,t){if(t.length===0)return new Re(n.segments,{});{let i=c4(t),r={};if(Object.keys(i).some(s=>s!==ue)&&n.children[ue]&&n.numberOfChildren===1&&n.children[ue].segments.length===0){let s=Rl(n.children[ue],e,t);return new Re(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=jM(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new Re(n.segments,r)}}function l4(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],a=t[i];if(Fl(a))break;let c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!IM(c,l,o))return s;i+=2}else{if(!IM(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function x_(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(Fl(s)){let c=u4(s.outlets);return new Re(i,c)}if(r===0&&Pf(t[0])){let c=n.segments[e];i.push(new ro(c.path,wM(t[0]))),r++;continue}let o=Fl(s)?s.outlets[ue]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Pf(a)?(i.push(new ro(o,wM(a))),r+=2):(i.push(new ro(o,{})),r++)}return new Re(i,{})}function u4(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=x_(new Re([],{}),0,i))}),e}function wM(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function IM(n,e,t){return n==t.path&&Ii(e,t.parameters)}var Ol="imperative",Lt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Lt||{}),Fn=class{constructor(e,t){this.id=e,this.url=t}},Ll=class extends Fn{constructor(e,t,i="imperative",r=null){super(e,t),this.type=Lt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ns=class extends Fn{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=Lt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},bn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(bn||{}),T_=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(T_||{}),pr=class extends Fn{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Lt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ao=class extends Fn{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Lt.NavigationSkipped}},Vl=class extends Fn{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=Lt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Of=class extends Fn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Lt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},M_=class extends Fn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Lt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},A_=class extends Fn{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=Lt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},P_=class extends Fn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Lt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},R_=class extends Fn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Lt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},O_=class{constructor(e){this.route=e,this.type=Lt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},N_=class{constructor(e){this.route=e,this.type=Lt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},k_=class{constructor(e){this.snapshot=e,this.type=Lt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},F_=class{constructor(e){this.snapshot=e,this.type=Lt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},L_=class{constructor(e){this.snapshot=e,this.type=Lt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},V_=class{constructor(e){this.snapshot=e,this.type=Lt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var jl=class{},$a=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function d4(n,e){return n.providers&&!n._injector&&(n._injector=Zv(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ii(n){return n.outlet||ue}function h4(n,e){let t=n.filter(i=>ii(i)===e);return t.push(...n.filter(i=>ii(i)!==e)),t}function ql(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var j_=class{get injector(){return ql(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Bf(this.rootInjector),this.attachRef=null}},Bf=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new j_(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)(le(Mn))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Nf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=B_(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=B_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=U_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return U_(e,this._root).map(t=>t.value)}};function B_(n,e){if(n===e.value)return e;for(let t of e.children){let i=B_(n,t);if(i)return i}return null}function U_(n,e){if(n===e.value)return[e];for(let t of e.children){let i=U_(n,t);if(i.length)return i.unshift(e),i}return[]}var _n=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function La(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var kf=class extends Nf{constructor(e,t){super(e),this.snapshot=t,Z_(this,e)}toString(){return this.snapshot.toString()}};function BM(n){let e=f4(n),t=new It([new ro("",{})]),i=new It({}),r=new It({}),s=new It({}),o=new It(""),a=new co(t,i,s,o,r,ue,n,e.root);return a.snapshot=e.root,new kf(new _n(a,[]),e)}function f4(n){let e={},t={},i={},r="",s=new ja([],e,i,r,t,ue,n,null,{});return new Lf("",new _n(s,[]))}var co=class{constructor(e,t,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(de(l=>l[Hl]))??oe(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(de(e=>Ua(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(de(e=>Ua(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ff(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:$($({},e.params),n.params),data:$($({},e.data),n.data),resolve:$($($($({},n.data),e.data),r?.data),n._resolvedData)}:i={params:$({},n.params),data:$({},n.data),resolve:$($({},n.data),n._resolvedData??{})},r&&$M(r)&&(i.resolve[Hl]=r.title),i}var ja=class{get title(){return this.data?.[Hl]}constructor(e,t,i,r,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ua(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ua(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Lf=class extends Nf{constructor(e,t){super(t),this.url=e,Z_(this,t)}toString(){return UM(this._root)}};function Z_(n,e){e.value._routerState=n,e.children.forEach(t=>Z_(n,t))}function UM(n){let e=n.children.length>0?` { ${n.children.map(UM).join(", ")} } `:"";return`${n.value}${e}`}function w_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ii(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ii(e.params,t.params)||n.paramsSubject.next(t.params),BU(e.url,t.url)||n.urlSubject.next(t.url),Ii(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function $_(n,e){let t=Ii(n.params,e.params)&&HU(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||$_(n.parent,e.parent))}function $M(n){return typeof n.title=="string"||n.title===null}var J_=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ue,this.activateEvents=new ht,this.deactivateEvents=new ht,this.attachEvents=new ht,this.detachEvents=new ht,this.parentContexts=q(Bf),this.location=q(Aa),this.changeDetector=q(no),this.inputBinder=q(X_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=t;let r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new z_(t,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ke({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Yr]})}}return n})(),z_=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===co?this.route:e===Bf?this.childContexts:this.parent.get(e,t)}},X_=new Y("");function p4(n,e,t){let i=Bl(n,e._root,t?t._root:void 0);return new kf(i,e)}function Bl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=g4(n,e,t);return new _n(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Bl(n,a)),o}}let i=m4(e.value),r=e.children.map(s=>Bl(n,s));return new _n(i,r)}}function g4(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Bl(n,i,r);return Bl(n,i)})}function m4(n){return new co(new It(n.url),new It(n.params),new It(n.queryParams),new It(n.fragment),new It(n.data),n.outlet,n.component,n)}var Ul=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},zM="ngNavigationCancelingError";function Vf(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=oo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=HM(!1,bn.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function HM(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[zM]=!0,t.cancellationCode=e,t}function y4(n){return qM(n)&&oo(n.url)}function qM(n){return!!n&&n[zM]}var v4=(n,e,t,i)=>de(r=>(new H_(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),H_=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),w_(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=La(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=La(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=La(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=La(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new V_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new F_(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(w_(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),w_(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},jf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ba=class{constructor(e,t){this.component=e,this.route=t}};function _4(n,e,t){let i=n._root,r=e?e._root:null;return Al(i,r,t,[i.value])}function b4(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ha(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!CS(n)?n:e.get(n):i}function Al(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=La(e);return n.children.forEach(o=>{w4(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Nl(a,t.getContext(o),r)),r}function w4(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=I4(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new jf(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Al(n,e,a?a.children:null,i,r):Al(n,e,t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Ba(a.outlet.component,o))}else o&&Nl(e,a,r),r.canActivateChecks.push(new jf(i)),s.component?Al(n,null,a?a.children:null,i,r):Al(n,null,t,i,r);return r}function I4(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!so(n.url,e.url);case"pathParamsOrQueryParamsChange":return!so(n.url,e.url)||!Ii(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$_(n,e)||!Ii(n.queryParams,e.queryParams);case"paramsChange":default:return!$_(n,e)}}function Nl(n,e,t){let i=La(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Nl(o,e.children.getContext(s),t):Nl(o,null,t):Nl(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ba(e.outlet.component,r)):t.canDeactivateChecks.push(new Ba(null,r)):t.canDeactivateChecks.push(new Ba(null,r))}function Wl(n){return typeof n=="function"}function E4(n){return typeof n=="boolean"}function C4(n){return n&&Wl(n.canLoad)}function D4(n){return n&&Wl(n.canActivate)}function S4(n){return n&&Wl(n.canActivateChild)}function x4(n){return n&&Wl(n.canDeactivate)}function T4(n){return n&&Wl(n.canMatch)}function WM(n){return n instanceof Zi||n?.name==="EmptyError"}var xf=Symbol("INITIAL_VALUE");function za(){return qn(n=>rh(n.map(e=>e.pipe(Ji(1),ch(xf)))).pipe(de(e=>{for(let t of e)if(t!==!0){if(t===xf)return xf;if(t===!1||M4(t))return t}return!0}),Dn(e=>e!==xf),Ji(1)))}function M4(n){return oo(n)||n instanceof Ul}function A4(n,e){return Et(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?oe(X($({},t),{guardsResult:!0})):P4(o,i,r,n).pipe(Et(a=>a&&E4(a)?R4(i,s,n,e):oe(a)),de(a=>X($({},t),{guardsResult:a})))})}function P4(n,e,t,i){return Xe(n).pipe(Et(r=>L4(r.component,r.route,t,e,i)),di(r=>r!==!0,!0))}function R4(n,e,t,i){return Xe(e).pipe(la(r=>ca(N4(r.route.parent,i),O4(r.route,i),F4(n,r.path,t),k4(n,r.route,t))),di(r=>r!==!0,!0))}function O4(n,e){return n!==null&&e&&e(new L_(n)),oe(!0)}function N4(n,e){return n!==null&&e&&e(new k_(n)),oe(!0)}function k4(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return oe(!0);let r=i.map(s=>sh(()=>{let o=ql(e)??t,a=Ha(s,o),c=D4(a)?a.canActivate(e,n):ir(o,()=>a(e,n));return is(c).pipe(di())}));return oe(r).pipe(za())}function F4(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>b4(o)).filter(o=>o!==null).map(o=>sh(()=>{let a=o.guards.map(c=>{let l=ql(o.node)??t,d=Ha(c,l),h=S4(d)?d.canActivateChild(i,n):ir(l,()=>d(i,n));return is(h).pipe(di())});return oe(a).pipe(za())}));return oe(s).pipe(za())}function L4(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return oe(!0);let o=s.map(a=>{let c=ql(e)??r,l=Ha(a,c),d=x4(l)?l.canDeactivate(n,e,t,i):ir(c,()=>l(n,e,t,i));return is(d).pipe(di())});return oe(o).pipe(za())}function V4(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return oe(!0);let s=r.map(o=>{let a=Ha(o,n),c=C4(a)?a.canLoad(e,t):ir(n,()=>a(e,t));return is(c)});return oe(s).pipe(za(),GM(i))}function GM(n){return jd(Ct(e=>{if(typeof e!="boolean")throw Vf(n,e)}),de(e=>e===!0))}function j4(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return oe(!0);let s=r.map(o=>{let a=Ha(o,n),c=T4(a)?a.canMatch(e,t):ir(n,()=>a(e,t));return is(c)});return oe(s).pipe(za(),GM(i))}var $l=class{constructor(e){this.segmentGroup=e||null}},zl=class extends Error{constructor(e){super(),this.urlTree=e}};function Fa(n){return aa(new $l(n))}function B4(n){return aa(new Q(4e3,!1))}function U4(n){return aa(HM(!1,bn.GuardRejected))}var q_=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return oe(i);if(r.numberOfChildren>1||!r.children[ue])return B4(`${e.redirectTo}`);r=r.children[ue]}}applyRedirectCommands(e,t,i,r,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:h,outlet:p,params:g,data:y,title:v}=r,_=ir(s,()=>a({params:g,data:y,queryParams:c,fragment:l,routeConfig:d,url:h,outlet:p,title:v}));if(_ instanceof gr)throw new zl(_);t=_}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new zl(o);return o}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new gr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new Re(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Q(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},W_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $4(n,e,t,i,r){let s=KM(n,e,t);return s.matched?(i=d4(e,i),j4(i,e,t,r).pipe(de(o=>o===!0?s:$({},W_)))):oe(s)}function KM(n,e,t){if(e.path==="**")return z4(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?$({},W_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||jU)(t,n,e);if(!r)return $({},W_);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?$($({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function z4(n){return{matched:!0,parameters:n.length>0?xM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function EM(n,e,t,i){return t.length>0&&W4(n,t,i)?{segmentGroup:new Re(e,q4(i,new Re(t,n.children))),slicedSegments:[]}:t.length===0&&G4(n,t,i)?{segmentGroup:new Re(n.segments,H4(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Re(n.segments,n.children),slicedSegments:t}}function H4(n,e,t,i){let r={};for(let s of t)if(Uf(n,e,s)&&!i[ii(s)]){let o=new Re([],{});r[ii(s)]=o}return $($({},i),r)}function q4(n,e){let t={};t[ue]=e;for(let i of n)if(i.path===""&&ii(i)!==ue){let r=new Re([],{});t[ii(i)]=r}return t}function W4(n,e,t){return t.some(i=>Uf(n,e,i)&&ii(i)!==ue)}function G4(n,e,t){return t.some(i=>Uf(n,e,i))}function Uf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function K4(n,e,t){return e.length===0&&!n.children[t]}var G_=class{};function Q4(n,e,t,i,r,s,o="emptyOnly"){return new K_(n,e,t,i,r,o,s).recognize()}var Y4=31,K_=class{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new q_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){let e=EM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(de(({children:t,rootSnapshot:i})=>{let r=new _n(i,t),s=new Lf("",r),o=r4(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new ja([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ue,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ue,t).pipe(de(i=>({children:i,rootSnapshot:t})),$r(i=>{if(i instanceof zl)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof $l?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(de(o=>o instanceof _n?[o]:[]))}processChildren(e,t,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return Xe(s).pipe(la(o=>{let a=i.children[o],c=h4(t,o);return this.processSegmentGroup(e,c,a,o,r)}),ah((o,a)=>(o.push(...a),o)),zr(null),py(),Et(o=>{if(o===null)return Fa(i);let a=QM(o);return Z4(a),oe(a)}))}processSegment(e,t,i,r,s,o,a){return Xe(t).pipe(la(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,i,r,s,o,a).pipe($r(l=>{if(l instanceof $l)return oe(null);throw l}))),di(c=>!!c),$r(c=>{if(WM(c))return K4(i,r,s)?oe(new G_):Fa(i);throw c}))}processSegmentAgainstRoute(e,t,i,r,s,o,a,c){return ii(i)!==o&&(o===ue||!Uf(r,s,i))?Fa(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,c):Fa(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:h,remainingSegments:p}=KM(t,r,s);if(!c)return Fa(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Y4&&(this.allowRedirects=!1));let g=new ja(s,l,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,CM(r),ii(r),r.component??r._loadedComponent??null,r,DM(r)),y=Ff(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(y.params),g.data=Object.freeze(y.data);let v=this.applyRedirects.applyRedirectCommands(d,r.redirectTo,h,g,e);return this.applyRedirects.lineralizeSegments(r,v).pipe(Et(_=>this.processSegment(e,i,t,_.concat(p),o,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let a=$4(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(qn(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(qn(({routes:l})=>{let d=i._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=c,y=new ja(p,h,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,CM(i),ii(i),i.component??i._loadedComponent??null,i,DM(i)),v=Ff(y,o,this.paramsInheritanceStrategy);y.params=Object.freeze(v.params),y.data=Object.freeze(v.data);let{segmentGroup:_,slicedSegments:T}=EM(t,p,g,l);if(T.length===0&&_.hasChildren())return this.processChildren(d,l,_,y).pipe(de(N=>new _n(y,N)));if(l.length===0&&T.length===0)return oe(new _n(y,[]));let P=ii(i)===s;return this.processSegment(d,l,_,T,P?ue:s,!0,y).pipe(de(N=>new _n(y,N instanceof _n?[N]:[])))}))):Fa(t)))}getChildConfig(e,t,i){return t.children?oe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?oe({routes:t._loadedRoutes,injector:t._loadedInjector}):V4(e,t,i,this.urlSerializer).pipe(Et(r=>r?this.configLoader.loadChildren(e,t).pipe(Ct(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):U4(t))):oe({routes:[],injector:e})}};function Z4(n){n.sort((e,t)=>e.value.outlet===ue?-1:t.value.outlet===ue?1:e.value.outlet.localeCompare(t.value.outlet))}function J4(n){let e=n.value.routeConfig;return e&&e.path===""}function QM(n){let e=[],t=new Set;for(let i of n){if(!J4(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=QM(i.children);e.push(new _n(i.value,r))}return e.filter(i=>!t.has(i))}function CM(n){return n.data||{}}function DM(n){return n.resolve||{}}function X4(n,e,t,i,r,s){return Et(o=>Q4(n,e,t,i,o.extractedUrl,r,s).pipe(de(({state:a,tree:c})=>X($({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function e3(n,e){return Et(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return oe(t);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of YM(c))o.add(l);let a=0;return Xe(o).pipe(la(c=>s.has(c)?t3(c,i,n,e):(c.data=Ff(c,c.parent,n).resolve,oe(void 0))),Ct(()=>a++),ua(1),Et(c=>a===o.size?oe(t):mn))})}function YM(n){let e=n.children.map(t=>YM(t)).flat();return[n,...e]}function t3(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!$M(r)&&(s[Hl]=r.title),n3(s,n,e,i).pipe(de(o=>(n._resolvedData=o,n.data=Ff(n,n.parent,t).resolve,null)))}function n3(n,e,t,i){let r=C_(n);if(r.length===0)return oe({});let s={};return Xe(r).pipe(Et(o=>i3(n[o],e,t,i).pipe(di(),Ct(a=>{if(a instanceof Ul)throw Vf(new kl,a);s[o]=a}))),ua(1),fy(s),$r(o=>WM(o)?mn:aa(o)))}function i3(n,e,t,i){let r=ql(e)??i,s=Ha(n,r),o=s.resolve?s.resolve(e,t):ir(r,()=>s(e,t));return is(o)}function I_(n){return qn(e=>{let t=n(e);return t?Xe(t).pipe(de(()=>e)):oe(e)})}var ZM=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===ue);return i}getResolvedTitleForRoute(t){return t.data[Hl]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:()=>q(r3),providedIn:"root"})}}return n})(),r3=(()=>{class n extends ZM{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(le(vM))}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),e0=new Y("",{providedIn:"root",factory:()=>({})}),s3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=ft({type:n,selectors:[["ng-component"]],standalone:!0,features:[pt],decls:1,vars:0,template:function(i,r){i&1&&Te(0,"router-outlet")},dependencies:[J_],encapsulation:2})}}return n})();function t0(n){let e=n.children&&n.children.map(t0),t=e?X($({},n),{children:e}):$({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ue&&(t.component=s3),t}var n0=new Y(""),o3=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=q(i_)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return oe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=is(t.loadComponent()).pipe(de(JM),Ct(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),ol(()=>{this.componentLoaders.delete(t)})),r=new ia(i,()=>new At).pipe(na());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return oe({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=a3(i,this.compiler,t,this.onLoadEndListener).pipe(ol(()=>{this.childrenLoaders.delete(i)})),o=new ia(s,()=>new At).pipe(na());return this.childrenLoaders.set(i,o),o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function a3(n,e,t,i){return is(n.loadChildren()).pipe(de(JM),Et(r=>r instanceof gl||Array.isArray(r)?oe(r):Xe(e.compileModuleAsync(r))),de(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(t).injector,o=s.get(n0,[],{optional:!0,self:!0}).flat()),{routes:o.map(t0),injector:s}}))}function c3(n){return n&&typeof n=="object"&&"default"in n}function JM(n){return c3(n)?n.default:n}var i0=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:()=>q(l3),providedIn:"root"})}}return n})(),l3=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),u3=new Y("");var d3=new Y(""),h3=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new At,this.transitionAbortSubject=new At,this.configLoader=q(o3),this.environmentInjector=q(Mn),this.urlSerializer=q(Y_),this.rootContexts=q(Bf),this.location=q(Dl),this.inputBindingEnabled=q(X_,{optional:!0})!==null,this.titleStrategy=q(ZM),this.options=q(e0,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=q(i0),this.createViewTransition=q(u3,{optional:!0}),this.navigationErrorHandler=q(d3,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>oe(void 0),this.rootComponentType=null;let t=r=>this.events.next(new O_(r)),i=r=>this.events.next(new N_(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(X($($({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new It({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ol,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Dn(s=>s.id!==0),de(s=>X($({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),qn(s=>{let o=!1,a=!1;return oe(s).pipe(qn(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",bn.SupersededByNewNavigation),mn;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?X($({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new ao(c.id,this.urlSerializer.serialize(c.rawUrl),h,T_.IgnoredSameUrlNavigation)),c.resolve(!1),mn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return oe(c).pipe(qn(h=>{let p=this.transitions?.getValue();return this.events.next(new Ll(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),p!==this.transitions?.getValue()?mn:Promise.resolve(h)}),X4(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ct(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=X($({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let p=new Of(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:p,source:g,restoredState:y,extras:v}=c,_=new Ll(h,this.urlSerializer.serialize(p),g,y);this.events.next(_);let T=BM(this.rootComponentType).snapshot;return this.currentTransition=s=X($({},c),{targetSnapshot:T,urlAfterRedirects:p,extras:X($({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,oe(s)}else{let h="";return this.events.next(new ao(c.id,this.urlSerializer.serialize(c.extractedUrl),h,T_.IgnoredByUrlHandlingStrategy)),c.resolve(!1),mn}}),Ct(c=>{let l=new M_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),de(c=>(this.currentTransition=s=X($({},c),{guards:_4(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),A4(this.environmentInjector,c=>this.events.next(c)),Ct(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Vf(this.urlSerializer,c.guardsResult);let l=new A_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Dn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",bn.GuardRejected),!1)),I_(c=>{if(c.guards.canActivateChecks.length)return oe(c).pipe(Ct(l=>{let d=new P_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),qn(l=>{let d=!1;return oe(l).pipe(e3(this.paramsInheritanceStrategy,this.environmentInjector),Ct({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",bn.NoDataFromResolver)}}))}),Ct(l=>{let d=new R_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),I_(c=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ct(p=>{d.component=p}),de(()=>{})));for(let p of d.children)h.push(...l(p));return h};return rh(l(c.targetSnapshot.root)).pipe(zr(null),Ji(1))}),I_(()=>this.afterPreactivation()),qn(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?Xe(d).pipe(de(()=>s)):oe(s)}),de(c=>{let l=p4(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=X($({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Ct(()=>{this.events.next(new jl)}),v4(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Ji(1),Ct({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ns(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),gy(this.transitionAbortSubject.pipe(Ct(c=>{throw c}))),ol(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",bn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),$r(c=>{if(a=!0,qM(c))this.events.next(new pr(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),y4(c)?this.events.next(new $a(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Vl(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let d=ir(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof Ul){let{message:h,cancellationCode:p}=Vf(this.urlSerializer,d);this.events.next(new pr(s.id,this.urlSerializer.serialize(s.extractedUrl),h,p)),this.events.next(new $a(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let h=t.errorHandler(c);s.resolve(!!h)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return mn}))}))}cancelNavigationTransition(t,i,r){let s=new pr(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function f3(n){return n!==Ol}var p3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:()=>q(g3),providedIn:"root"})}}return n})(),Q_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},g3=(()=>{class n extends Q_{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=_i(n)))(r||n)}})()}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),XM=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:()=>q(m3),providedIn:"root"})}}return n})(),m3=(()=>{class n extends XM{constructor(){super(...arguments),this.location=q(Dl),this.urlSerializer=q(Y_),this.options=q(e0,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=q(i0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new gr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=BM(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof Ll)this.stateMemento=this.createStateMemento();else if(t instanceof ao)this.rawUrlTree=i.initialUrl;else if(t instanceof Of){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof jl?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof pr&&(t.code===bn.GuardRejected||t.code===bn.NoDataFromResolver)?this.restoreHistory(i):t instanceof Vl?this.restoreHistory(i,!0):t instanceof ns&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof gr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let s=this.browserPageId,o=$($({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(r,"",o)}else{let s=$($({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=_i(n)))(r||n)}})()}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Pl=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Pl||{});function y3(n,e){n.events.pipe(Dn(t=>t instanceof ns||t instanceof pr||t instanceof Vl||t instanceof ao),de(t=>t instanceof ns||t instanceof ao?Pl.COMPLETE:(t instanceof pr?t.code===bn.Redirect||t.code===bn.SupersededByNewNavigation:!1)?Pl.REDIRECTING:Pl.FAILED),Dn(t=>t!==Pl.REDIRECTING),Ji(1)).subscribe(()=>{e()})}function v3(n){throw n}var _3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},b3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ri=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=q(lf),this.stateManager=q(XM),this.options=q(e0,{optional:!0})||{},this.pendingTasks=q(Ma),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=q(h3),this.urlSerializer=q(Y_),this.location=q(Dl),this.urlHandlingStrategy=q(i0),this._events=new At,this.errorHandler=this.options.errorHandler||v3,this.navigated=!1,this.routeReuseStrategy=q(p3),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=q(n0,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!q(X_,{optional:!0}),this.eventsSubscription=new st,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof pr&&i.code!==bn.Redirect&&i.code!==bn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof ns)this.navigated=!0;else if(i instanceof $a){let o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c=$({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||f3(r.source)},o);this.scheduleNavigation(a,Ol,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}I3(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ol,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let c=$({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(t0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=$($({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let p=r?r.snapshot:this.routerState.snapshot.root;h=FM(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return LM(h,t,d,l??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=oo(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Ol,null,i)}navigate(t,i={skipLocationChange:!1}){return w3(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=$({},_3):i===!1?r=$({},b3):r=i,oo(t))return _M(this.currentUrlTree,t,r);let s=this.parseUrl(t);return _M(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((h,p)=>{a=h,c=p});let d=this.pendingTasks.add();return y3(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function w3(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Q(4008,!1)}function I3(n){return!(n instanceof jl)&&!(n instanceof $a)}var eA=(()=>{class n{constructor(t,i,r,s,o,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new At,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof ns&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(oo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||i||r||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let i=this.href===null?null:qx(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){let r=this.renderer,s=this.el.nativeElement;i!==null?r.setAttribute(s,t,i):r.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:oo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)(W(ri),W(co),Ov("tabindex"),W(bi),W(ti),W(Oa))}}static{this.\u0275dir=Ke({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&ie("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),i&2&&ar("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Xr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Xr],replaceUrl:[2,"replaceUrl","replaceUrl",Xr],routerLink:"routerLink"},standalone:!0,features:[Yv,Yr]})}}return n})();var E3=new Y("");function tA(n,...e){return vi([{provide:n0,multi:!0,useValue:n},[],{provide:co,useFactory:C3,deps:[ri]},{provide:n_,multi:!0,useFactory:D3},e.map(t=>t.\u0275providers)])}function C3(n){return n.routerState.root}function D3(){let n=q(cn);return e=>{let t=n.get(to);if(e!==t.components[0])return;let i=n.get(ri),r=n.get(S3);n.get(x3)===1&&i.initialNavigation(),n.get(T3,null,fe.Optional)?.setUpPreloading(),n.get(E3,null,fe.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var S3=new Y("",{factory:()=>new At}),x3=new Y("",{providedIn:"root",factory:()=>1});var T3=new Y("");var iA=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},M3=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],a=n[t++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},rA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,l=c?n[r+2]:0,d=s>>2,h=(s&3)<<4|a>>4,p=(a&15)<<2|l>>6,g=l&63;c||(g=64,o||(p=64)),i.push(t[d],t[h],t[p],t[g])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(iA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):M3(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;let l=r<n.length?t[n.charAt(r)]:64;++r;let h=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||l==null||h==null)throw new s0;let p=s<<2|a>>4;if(i.push(p),l!==64){let g=a<<4&240|l>>2;if(i.push(g),h!==64){let y=l<<6&192|h;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},s0=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},A3=function(n){let e=iA(n);return rA.encodeByteArray(e,!0)},Gl=function(n){return A3(n).replace(/\./g,"")},a0=function(n){try{return rA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function P3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var R3=()=>P3().__FIREBASE_DEFAULTS__,O3=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},N3=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&a0(n[1]);return e&&JSON.parse(e)},Hf=()=>{try{return R3()||O3()||N3()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},c0=n=>{var e,t;return(t=(e=Hf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},sA=n=>{let e=c0(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},l0=()=>{var n;return(n=Hf())===null||n===void 0?void 0:n.config},u0=n=>{var e;return(e=Hf())===null||e===void 0?void 0:e[`_${n}`]};var zf=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function oA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Gl(JSON.stringify(t)),Gl(JSON.stringify(o)),""].join(".")}function Rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function k3(){var n;let e=(n=Hf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lA(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function uA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dA(){let n=Rt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function hA(){return!k3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function d0(){try{return typeof indexedDB=="object"}catch{return!1}}function fA(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var F3="FirebaseError",wn=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=F3,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mr.prototype.create)}},mr=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?L3(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new wn(r,a,i)}};function L3(n,e){return n.replace(V3,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var V3=/\{\$([^}]+)}/g;function pA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function lo(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(nA(s)&&nA(o)){if(!lo(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function nA(n){return n!==null&&typeof n=="object"}function Kl(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function qa(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Wa(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function gA(n,e){let t=new o0(n,e);return t.subscribe.bind(t)}var o0=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");j3(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=r0),r.error===void 0&&(r.error=r0),r.complete===void 0&&(r.complete=r0);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function j3(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function r0(){}var Xte=4*60*60*1e3;function mt(n){return n&&n._delegate?n._delegate:n}var Ln=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var uo="[DEFAULT]";var h0=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new zf;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(U3(e))try{this.getOrInitializeService({instanceIdentifier:uo})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=uo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=uo){return this.instances.has(e)}getOptions(e=uo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:B3(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=uo){return this.component?this.component.multipleInstances?e:uo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function B3(n){return n===uo?void 0:n}function U3(n){return n.instantiationMode==="EAGER"}var qf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new h0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var $3=[],ve=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ve||{}),z3={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},H3=ve.INFO,q3={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},W3=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=q3[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},rs=class{constructor(e){this.name=e,this._logLevel=H3,this._logHandler=W3,this._userLogHandler=null,$3.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}};var G3=(n,e)=>e.some(t=>n instanceof t),mA,yA;function K3(){return mA||(mA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Q3(){return yA||(yA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var vA=new WeakMap,p0=new WeakMap,_A=new WeakMap,f0=new WeakMap,m0=new WeakMap;function Y3(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ei(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&vA.set(t,n)}).catch(()=>{}),m0.set(e,n),e}function Z3(n){if(p0.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});p0.set(n,e)}var g0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return p0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||_A.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ei(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bA(n){g0=n(g0)}function J3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(Wf(this),e,...t);return _A.set(i,e.sort?e.sort():[e]),Ei(i)}:Q3().includes(n)?function(...e){return n.apply(Wf(this),e),Ei(vA.get(this))}:function(...e){return Ei(n.apply(Wf(this),e))}}function X3(n){return typeof n=="function"?J3(n):(n instanceof IDBTransaction&&Z3(n),G3(n,K3())?new Proxy(n,g0):n)}function Ei(n){if(n instanceof IDBRequest)return Y3(n);if(f0.has(n))return f0.get(n);let e=X3(n);return e!==n&&(f0.set(n,e),m0.set(e,n)),e}var Wf=n=>m0.get(n);function IA(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),a=Ei(o);return i&&o.addEventListener("upgradeneeded",c=>{i(Ei(o.result),c.oldVersion,c.newVersion,Ei(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var e$=["get","getKey","getAll","getAllKeys","count"],t$=["put","add","delete","clear"],y0=new Map;function wA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(y0.get(e))return y0.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=t$.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||e$.includes(t)))return;let s=function(o,...a){return E(this,null,function*(){let c=this.transaction(o,r?"readwrite":"readonly"),l=c.store;return i&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),r&&c.done]))[0]})};return y0.set(e,s),s}bA(n=>X($({},n),{get:(e,t,i)=>wA(e,t)||n.get(e,t,i),has:(e,t)=>!!wA(e,t)||n.has(e,t)}));var _0=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(n$(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function n$(n){let e=n.getComponent();return e?.type==="VERSION"}var b0="@firebase/app",EA="0.10.13";var yr=new rs("@firebase/app"),i$="@firebase/app-compat",r$="@firebase/analytics-compat",s$="@firebase/analytics",o$="@firebase/app-check-compat",a$="@firebase/app-check",c$="@firebase/auth",l$="@firebase/auth-compat",u$="@firebase/database",d$="@firebase/data-connect",h$="@firebase/database-compat",f$="@firebase/functions",p$="@firebase/functions-compat",g$="@firebase/installations",m$="@firebase/installations-compat",y$="@firebase/messaging",v$="@firebase/messaging-compat",_$="@firebase/performance",b$="@firebase/performance-compat",w$="@firebase/remote-config",I$="@firebase/remote-config-compat",E$="@firebase/storage",C$="@firebase/storage-compat",D$="@firebase/firestore",S$="@firebase/vertexai-preview",x$="@firebase/firestore-compat",T$="firebase",M$="10.14.1";var w0="[DEFAULT]",A$={[b0]:"fire-core",[i$]:"fire-core-compat",[s$]:"fire-analytics",[r$]:"fire-analytics-compat",[a$]:"fire-app-check",[o$]:"fire-app-check-compat",[c$]:"fire-auth",[l$]:"fire-auth-compat",[u$]:"fire-rtdb",[d$]:"fire-data-connect",[h$]:"fire-rtdb-compat",[f$]:"fire-fn",[p$]:"fire-fn-compat",[g$]:"fire-iid",[m$]:"fire-iid-compat",[y$]:"fire-fcm",[v$]:"fire-fcm-compat",[_$]:"fire-perf",[b$]:"fire-perf-compat",[w$]:"fire-rc",[I$]:"fire-rc-compat",[E$]:"fire-gcs",[C$]:"fire-gcs-compat",[D$]:"fire-fst",[x$]:"fire-fst-compat",[S$]:"fire-vertex","fire-js":"fire-js",[T$]:"fire-js-all"};var Ql=new Map,P$=new Map,I0=new Map;function CA(n,e){try{n.container.addComponent(e)}catch(t){yr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function os(n){let e=n.name;if(I0.has(e))return yr.debug(`There were multiple attempts to register component ${e}.`),!1;I0.set(e,n);for(let t of Ql.values())CA(t,n);for(let t of P$.values())CA(t,n);return!0}function Zl(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function si(n){return n.settings!==void 0}var R$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ss=new mr("app","Firebase",R$);var E0=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ln("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}};var as=M$;function S0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:w0,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw ss.create("bad-app-name",{appName:String(r)});if(t||(t=l0()),!t)throw ss.create("no-options");let s=Ql.get(r);if(s){if(lo(t,s.options)&&lo(i,s.config))return s;throw ss.create("duplicate-app",{appName:r})}let o=new qf(r);for(let c of I0.values())o.addComponent(c);let a=new E0(t,i,o);return Ql.set(r,a),a}function Ga(n=w0){let e=Ql.get(n);if(!e&&n===w0&&l0())return S0();if(!e)throw ss.create("no-app",{appName:n});return e}function Gf(){return Array.from(Ql.values())}function xt(n,e,t){var i;let r=(i=A$[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yr.warn(a.join(" "));return}os(new Ln(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var O$="firebase-heartbeat-database",N$=1,Yl="firebase-heartbeat-store",v0=null;function TA(){return v0||(v0=IA(O$,N$,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yl)}catch(t){console.warn(t)}}}}).catch(n=>{throw ss.create("idb-open",{originalErrorMessage:n.message})})),v0}function k$(n){return E(this,null,function*(){try{let t=(yield TA()).transaction(Yl),i=yield t.objectStore(Yl).get(MA(n));return yield t.done,i}catch(e){if(e instanceof wn)yr.warn(e.message);else{let t=ss.create("idb-get",{originalErrorMessage:e?.message});yr.warn(t.message)}}})}function DA(n,e){return E(this,null,function*(){try{let i=(yield TA()).transaction(Yl,"readwrite");yield i.objectStore(Yl).put(e,MA(n)),yield i.done}catch(t){if(t instanceof wn)yr.warn(t.message);else{let i=ss.create("idb-set",{originalErrorMessage:t?.message});yr.warn(i.message)}}})}function MA(n){return`${n.name}!${n.options.appId}`}var F$=1024,L$=30*24*60*60*1e3,C0=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new D0(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return E(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=SA();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=L$}),this._storage.overwrite(this._heartbeatsCache))}catch(i){yr.warn(i)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=SA(),{heartbeatsToSend:i,unsentEntries:r}=V$(this._heartbeatsCache.heartbeats),s=Gl(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return yr.warn(t),""}})}};function SA(){return new Date().toISOString().substring(0,10)}function V$(n,e=F$){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),xA(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),xA(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var D0=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return d0()?fA().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield k$(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return DA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return DA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function xA(n){return Gl(JSON.stringify({version:2,heartbeats:n})).length}function j$(n){os(new Ln("platform-logger",e=>new _0(e),"PRIVATE")),os(new Ln("heartbeat",e=>new C0(e),"PRIVATE")),xt(b0,EA,n),xt(b0,EA,"esm2017"),xt("fire-js","")}j$("");var B$="firebase",U$="10.14.1";xt(B$,U$,"app");var fo=new nr("ANGULARFIRE2_VERSION");function Qf(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Jl=(n,e)=>{let t=e?[e]:Gf(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Qa=class{constructor(){return Jl($$)}},$$="app-check";function Ka(){}var Kf=class{zone;delegate;constructor(e,t=cy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,i)}},x0=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ka,{},Ka,Ka)),t.pipe(Ct({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ya=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Kf(Zone.current)),this.insideAngular=t.run(()=>new Kf(Zone.current,ay)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(le(ke))};static \u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Yf(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function z$(n){return Yf().ngZone.runOutsideAngular(()=>n())}function ho(n){return Yf().ngZone.run(()=>n())}function H$(n){return q$(Yf())(n)}function q$(n){return function(t){return t=t.lift(new x0(n.ngZone)),t.pipe(Ur(n.outsideAngular),Br(n.insideAngular))}}var W$=(n,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ho(()=>n.apply(void 0,i))},Tt=(n,e)=>function(){let t,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(t||=ho(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ka,{},Ka,Ka))),i[s]=W$(i[s],t));let r=z$(()=>n.apply(this,i));if(!e)if(r instanceof pe){let s=Yf();return r.pipe(Ur(s.outsideAngular),Br(s.insideAngular))}else return ho(()=>r);return r instanceof pe?r.pipe(H$):r instanceof Promise?ho(()=>new Promise((s,o)=>r.then(a=>ho(()=>s(a)),a=>ho(()=>o(a))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:ho(()=>r)};var vr=class{constructor(e){return e}},po=class{constructor(){return Gf()}};function G$(n){return n&&n.length===1?n[0]:new vr(Ga())}var T0=new Y("angularfire2._apps"),K$={provide:vr,useFactory:G$,deps:[[new nn,T0]]},Q$={provide:po,deps:[[new nn,T0]]};function Y$(n){return(e,t)=>{let i=t.get(Jr);xt("angularfire",fo.full,"core"),xt("angularfire",fo.full,"app"),xt("angular",jT.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new vr(r)}}function AA(n,...e){return vi([K$,Q$,{provide:T0,useFactory:Y$(n),multi:!0,deps:[ke,cn,Ya,...e]}])}var PA=Tt(S0,!0);function KA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var QA=KA,YA=new mr("auth","Firebase",KA());var np=new rs("@firebase/auth");function Z$(n,...e){np.logLevel<=ve.WARN&&np.warn(`Auth (${as}): ${n}`,...e)}function Jf(n,...e){np.logLevel<=ve.ERROR&&np.error(`Auth (${as}): ${n}`,...e)}function Di(n,...e){throw Z0(n,...e)}function go(n,...e){return Z0(n,...e)}function ZA(n,e,t){let i=Object.assign(Object.assign({},QA()),{[e]:t});return new mr("auth","Firebase",i).create(e,{appName:n.name})}function wr(n){return ZA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Z0(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return YA.create(n,...e)}function ee(n,e,...t){if(!n)throw Z0(e,...t)}function _r(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Jf(e),new Error(e)}function ls(n,e){n||_r(e)}function R0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function J$(){return RA()==="http:"||RA()==="https:"}function RA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function X$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(J$()||lA()||"connection"in navigator)?navigator.onLine:!0}function e5(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var mo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ls(t>e,"Short delay should be less than long delay!"),this.isMobile=aA()||uA()}get(){return X$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function J0(n,e){ls(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ip=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var t5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var n5=new mo(3e4,6e4);function us(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ds(s,o,a,c){return E(this,arguments,function*(n,e,t,i,r={}){return JA(n,r,()=>E(this,null,function*(){let l={},d={};i&&(e==="GET"?d=i:l={body:JSON.stringify(i)});let h=Kl(Object.assign({key:n.config.apiKey},d)).slice(1),p=yield n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);let g=Object.assign({method:e,headers:p},l);return cA()||(g.referrerPolicy="no-referrer"),ip.fetch()(XA(n,n.config.apiHost,t,h),g)}))})}function JA(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},t5),e);try{let r=new O0(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Zf(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zf(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Zf(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Zf(n,"user-disabled",o);let d=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw ZA(n,d,l);Di(n,d)}}catch(r){if(r instanceof wn)throw r;Di(n,"network-request-failed",{message:String(r)})}})}function ou(s,o,a,c){return E(this,arguments,function*(n,e,t,i,r={}){let l=yield ds(n,e,t,i,r);return"mfaPendingCredential"in l&&Di(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function XA(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?J0(n.config,r):`${n.config.apiScheme}://${r}`}function i5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var O0=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(go(this.auth,"network-request-failed")),n5.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Zf(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=go(n,e,i);return r.customData._tokenResponse=t,r}function OA(n){return n!==void 0&&n.enterprise!==void 0}var N0=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return i5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function r5(n,e){return E(this,null,function*(){return ds(n,"GET","/v2/recaptchaConfig",us(n,e))})}function s5(n,e){return E(this,null,function*(){return ds(n,"POST","/v1/accounts:delete",e)})}function e1(n,e){return E(this,null,function*(){return ds(n,"POST","/v1/accounts:lookup",e)})}function Xl(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function X0(n,e=!1){return E(this,null,function*(){let t=mt(n),i=yield t.getIdToken(e),r=eb(i);ee(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Xl(M0(r.auth_time)),issuedAtTime:Xl(M0(r.iat)),expirationTime:Xl(M0(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function M0(n){return Number(n)*1e3}function eb(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Jf("JWT malformed, contained fewer than 3 sections"),null;try{let r=a0(t);return r?JSON.parse(r):(Jf("Failed to decode base64 JWT payload"),null)}catch(r){return Jf("Caught error parsing JWT payload as JSON",r?.toString()),null}}function NA(n){let e=eb(n);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function tu(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof wn&&o5(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function o5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var k0=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var nu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xl(this.lastLoginAt),this.creationTime=Xl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function rp(n){return E(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield tu(n,e1(t,{idToken:i}));ee(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?t1(s.providerUserInfo):[],a=a5(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,d=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new nu(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,h)})}function tb(n){return E(this,null,function*(){let e=mt(n);yield rp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function a5(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function t1(n){return n.map(e=>{var{providerId:t}=e,i=ly(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function c5(n,e){return E(this,null,function*(){let t=yield JA(n,{},()=>E(this,null,function*(){let i=Kl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=XA(n,r,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ip.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function l5(n,e){return E(this,null,function*(){return ds(n,"POST","/v2/accounts:revokeToken",us(n,e))})}var eu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ee(e.length!==0,"internal-error");let t=NA(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield c5(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(ee(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ee(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return _r("not implemented")}};function cs(n,e){ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Za=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=ly(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new k0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new nu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield tu(this,this.stsTokenManager.getToken(this.auth,e));return ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return X0(this,e)}reload(){return tb(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield rp(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(si(this.auth.app))return Promise.reject(wr(this.auth));let e=yield this.getIdToken();return yield tu(this,s5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,c,l,d;let h=(i=t.displayName)!==null&&i!==void 0?i:void 0,p=(r=t.email)!==null&&r!==void 0?r:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=t.photoURL)!==null&&o!==void 0?o:void 0,v=(a=t.tenantId)!==null&&a!==void 0?a:void 0,_=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,T=(l=t.createdAt)!==null&&l!==void 0?l:void 0,P=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:N,emailVerified:j,isAnonymous:L,providerData:k,stsTokenManager:C}=t;ee(N&&C,e,"internal-error");let w=eu.fromJSON(this.name,C);ee(typeof N=="string",e,"internal-error"),cs(h,e.name),cs(p,e.name),ee(typeof j=="boolean",e,"internal-error"),ee(typeof L=="boolean",e,"internal-error"),cs(g,e.name),cs(y,e.name),cs(v,e.name),cs(_,e.name),cs(T,e.name),cs(P,e.name);let I=new n({uid:N,auth:e,email:p,emailVerified:j,displayName:h,isAnonymous:L,photoURL:y,phoneNumber:g,tenantId:v,stsTokenManager:w,createdAt:T,lastLoginAt:P});return k&&Array.isArray(k)&&(I.providerData=k.map(S=>Object.assign({},S))),_&&(I._redirectEventId=_),I}static _fromIdTokenResponse(e,t,i=!1){return E(this,null,function*(){let r=new eu;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield rp(s),s})}static _fromGetAccountInfoResponse(e,t,i){return E(this,null,function*(){let r=t.users[0];ee(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?t1(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new eu;a.updateFromIdToken(i);let c=new n({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new nu(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var kA=new Map;function br(n){ls(n instanceof Function,"Expected a class definition");let e=kA.get(n);return e?(ls(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,kA.set(n,e),e)}var u5=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,i){return E(this,null,function*(){this.storage[t]=i})}_get(t){return E(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),F0=u5;function Xf(n,e,t){return`firebase:${n}:${e}:${t}`}var sp=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Xf(this.userKey,r.apiKey,s),this.fullPersistenceKey=Xf("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Za._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return E(this,null,function*(){if(!t.length)return new n(br(F0),e,i);let r=(yield Promise.all(t.map(l=>E(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=r[0]||br(F0),o=Xf(i,e.config.apiKey,e.name),a=null;for(let l of t)try{let d=yield l._get(o);if(d){let h=Za._fromJSON(e,d);l!==s&&(a=h),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,i):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>E(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,i))})}};function FA(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(s1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(n1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(a1(e))return"Blackberry";if(c1(e))return"Webos";if(i1(e))return"Safari";if((e.includes("chrome/")||r1(e))&&!e.includes("edge/"))return"Chrome";if(o1(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function n1(n=Rt()){return/firefox\//i.test(n)}function i1(n=Rt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function r1(n=Rt()){return/crios\//i.test(n)}function s1(n=Rt()){return/iemobile/i.test(n)}function o1(n=Rt()){return/android/i.test(n)}function a1(n=Rt()){return/blackberry/i.test(n)}function c1(n=Rt()){return/webos/i.test(n)}function nb(n=Rt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function d5(n=Rt()){var e;return nb(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function h5(){return dA()&&document.documentMode===10}function l1(n=Rt()){return nb(n)||o1(n)||c1(n)||a1(n)||/windows phone/i.test(n)||s1(n)}function u1(n,e=[]){let t;switch(n){case"Browser":t=FA(Rt());break;case"Worker":t=`${FA(Rt())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${as}/${i}`}var L0=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function f5(t){return E(this,arguments,function*(n,e={}){return ds(n,"GET","/v2/passwordPolicy",us(n,e))})}var p5=6,V0=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:p5,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var j0=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new op(this),this.idTokenSubscription=new op(this),this.beforeStateQueue=new L0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=br(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield sp.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield e1(this,{idToken:e}),i=yield Za._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(si(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield rp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=e5()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(si(this.app))return Promise.reject(wr(this));let t=e?mt(e):null;return t&&ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return si(this.app)?Promise.reject(wr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return si(this.app)?Promise.reject(wr(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(br(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield f5(this),t=new V0(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mr("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield l5(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&br(e)||this._popupRedirectResolver;ee(t,this,"argument-error"),this.redirectPersistenceManager=yield sp.create(this,[br(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,i,r);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=u1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return E(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Z$(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function vo(n){return mt(n)}var op=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=gA(t=>this.observer=t)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var fp={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function g5(n){fp=n}function d1(n){return fp.loadJS(n)}function m5(){return fp.recaptchaEnterpriseScript}function y5(){return fp.gapiScript}function h1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var v5="recaptcha-enterprise",_5="NO_RECAPTCHA",B0=class{constructor(e){this.type=v5,this.auth=vo(e)}verify(e="verify",t=!1){return E(this,null,function*(){function i(s){return E(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>E(this,null,function*(){r5(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new N0(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function r(s,o,a){let c=window.grecaptcha;OA(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(_5)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!t&&OA(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=m5();c.length!==0&&(c+=a),d1(c).then(()=>{r(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function LA(n,e,t,i=!1){return E(this,null,function*(){let r=new B0(n),s;try{s=yield r.verify(t)}catch{s=yield r.verify(t,!0)}let o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function U0(n,e,t,i){return E(this,null,function*(){var r;if(!((r=n._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield LA(n,e,t,t==="getOobCode");return i(n,s)}else return i(n,e).catch(s=>E(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield LA(n,e,t,t==="getOobCode");return i(n,o)}else return Promise.reject(s)}))})}function ib(n,e){let t=Zl(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(lo(s,e??{}))return r;Di(r,"already-initialized")}return t.initialize({options:e})}function b5(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(br);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function rb(n,e,t){let i=vo(n);ee(i._canInitEmulator,i,"emulator-config-failed"),ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=f1(e),{host:o,port:a}=w5(e),c=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||I5()}function f1(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function w5(n){let e=f1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:VA(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:VA(o)}}}function VA(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function I5(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var iu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _r("not implemented")}_getIdTokenResponse(e){return _r("not implemented")}_linkToIdToken(e,t){return _r("not implemented")}_getReauthenticationResolver(e){return _r("not implemented")}};function E5(n,e){return E(this,null,function*(){return ds(n,"POST","/v1/accounts:signUp",e)})}function C5(n,e){return E(this,null,function*(){return ou(n,"POST","/v1/accounts:signInWithPassword",us(n,e))})}function D5(n,e){return E(this,null,function*(){return ou(n,"POST","/v1/accounts:signInWithEmailLink",us(n,e))})}function S5(n,e){return E(this,null,function*(){return ou(n,"POST","/v1/accounts:signInWithEmailLink",us(n,e))})}var ru=class n extends iu{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return E(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return U0(e,t,"signInWithPassword",C5);case"emailLink":return D5(e,{email:this._email,oobCode:this._password});default:Di(e,"internal-error")}})}_linkToIdToken(e,t){return E(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return U0(e,i,"signUpPassword",E5);case"emailLink":return S5(e,{idToken:t,email:this._email,oobCode:this._password});default:Di(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function A0(n,e){return E(this,null,function*(){return ou(n,"POST","/v1/accounts:signInWithIdp",us(n,e))})}function x5(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function T5(n){let e=qa(Wa(n)).link,t=e?qa(Wa(e)).deep_link_id:null,i=qa(Wa(n)).deep_link_id;return(i?qa(Wa(i)).link:null)||i||t||e||n}var ap=class n{constructor(e){var t,i,r,s,o,a;let c=qa(Wa(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,d=(i=c.oobCode)!==null&&i!==void 0?i:null,h=x5((r=c.mode)!==null&&r!==void 0?r:null);ee(l&&d&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=T5(e);try{return new n(t)}catch{return null}}};var p1=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return ru._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){let r=ap.parseLink(i);return ee(r,"argument-error"),ru._fromEmailAndCode(t,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),cp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var $0=class extends cp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function M5(n,e){return E(this,null,function*(){return ou(n,"POST","/v1/accounts:signUp",us(n,e))})}var Ja=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return E(this,null,function*(){let s=yield Za._fromIdTokenResponse(e,i,r),o=jA(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return E(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=jA(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function jA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var z0=class n extends wn{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function g1(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?z0._fromErrorAndOperation(n,s,e,i):s})}function A5(n,e,t=!1){return E(this,null,function*(){let i=yield tu(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ja._forOperation(n,"link",i)})}function P5(n,e,t=!1){return E(this,null,function*(){let{auth:i}=n;if(si(i.app))return Promise.reject(wr(i));let r="reauthenticate";try{let s=yield tu(n,g1(i,r,e,n),t);ee(s.idToken,i,"internal-error");let o=eb(s.idToken);ee(o,i,"internal-error");let{sub:a}=o;return ee(n.uid===a,i,"user-mismatch"),Ja._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Di(i,"user-mismatch"),s}})}function m1(n,e,t=!1){return E(this,null,function*(){if(si(n.app))return Promise.reject(wr(n));let i="signIn",r=yield g1(n,i,e),s=yield Ja._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function sb(n,e){return E(this,null,function*(){return m1(vo(n),e)})}function y1(n){return E(this,null,function*(){let e=vo(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function ob(n,e,t){return E(this,null,function*(){if(si(n.app))return Promise.reject(wr(n));let i=vo(n),o=yield U0(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",M5).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&y1(n),c}),a=yield Ja._fromIdTokenResponse(i,"signIn",o);return yield i._updateCurrentUser(a.user),a})}function ab(n,e,t){return si(n.app)?Promise.reject(wr(n)):sb(mt(n),p1.credential(e,t)).catch(i=>E(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&y1(n),i}))}function pp(n,e,t,i){return mt(n).onIdTokenChanged(e,t,i)}function cb(n,e,t){return mt(n).beforeAuthStateChanged(e,t)}function gp(n,e,t,i){return mt(n).onAuthStateChanged(e,t,i)}var lp="__sak";var up=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lp,"1"),this.storage.removeItem(lp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var R5=1e3,O5=10,N5=(()=>{class n extends up{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=l1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);h5()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,O5):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},R5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return E(this,null,function*(){yield Vr(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return E(this,null,function*(){let i=yield Vr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return E(this,null,function*(){yield Vr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),mp=N5;var k5=(()=>{class n extends up{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),au=k5;function F5(n){return Promise.all(n.map(e=>E(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var L5=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let i=t,{eventId:r,eventType:s,data:o}=i.data,a=this.handlersMap[s];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let c=Array.from(a).map(d=>E(this,null,function*(){return d(i.origin,o)})),l=yield F5(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function v1(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var H0=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return E(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=v1("",20);r.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(h){let p=h;if(p.data.eventId===l)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Ci(){return window}function V5(n){Ci().location.href=n}function _1(){return typeof Ci().WorkerGlobalScope<"u"&&typeof Ci().importScripts=="function"}function j5(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function B5(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function U5(){return _1()?self:null}var b1="firebaseLocalStorageDb",$5=1,dp="firebaseLocalStorage",w1="fbase_key",yo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function yp(n,e){return n.transaction([dp],e?"readwrite":"readonly").objectStore(dp)}function z5(){let n=indexedDB.deleteDatabase(b1);return new yo(n).toPromise()}function q0(){let n=indexedDB.open(b1,$5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(dp,{keyPath:w1})}catch(r){t(r)}}),n.addEventListener("success",()=>E(this,null,function*(){let i=n.result;i.objectStoreNames.contains(dp)?e(i):(i.close(),yield z5(),e(yield q0()))}))})}function BA(n,e,t){return E(this,null,function*(){let i=yp(n,!0).put({[w1]:e,value:t});return new yo(i).toPromise()})}function H5(n,e){return E(this,null,function*(){let t=yp(n,!1).get(e),i=yield new yo(t).toPromise();return i===void 0?null:i.value})}function UA(n,e){let t=yp(n,!0).delete(e);return new yo(t).toPromise()}var q5=800,W5=3,G5=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield q0(),this.db)})}_withRetries(t){return E(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>W5)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return _1()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=L5._getInstance(U5()),this.receiver._subscribe("keyChanged",(t,i)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,i;if(this.activeServiceWorker=yield j5(),!this.activeServiceWorker)return;this.sender=new H0(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||B5()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield q0();return yield BA(t,lp,"1"),yield UA(t,lp),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>BA(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let i=yield this._withRetries(r=>H5(r,t));return this.localCache[t]=i,i})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>UA(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(s=>{let o=yp(s,!1).getAll();return new yo(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),q5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),I1=G5;var Wne=h1("rcb"),Gne=new mo(3e4,6e4);function K5(n,e){return e?br(e):(ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var su=class extends iu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return A0(e,this._buildIdpRequest())}_linkToIdToken(e,t){return A0(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return A0(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Q5(n){return m1(n.auth,new su(n),n.bypassAuthState)}function Y5(n){let{auth:e,user:t}=n;return ee(t,e,"internal-error"),P5(t,new su(n),n.bypassAuthState)}function Z5(n){return E(this,null,function*(){let{auth:e,user:t}=n;return ee(t,e,"internal-error"),A5(t,new su(n),n.bypassAuthState)})}var W0=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Q5;case"linkViaPopup":case"linkViaRedirect":return Z5;case"reauthViaPopup":case"reauthViaRedirect":return Y5;default:Di(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Kne=new mo(2e3,1e4);var J5="pendingRedirect",ep=new Map,G0=class n extends W0{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return E(this,null,function*(){let e=ep.get(this.auth._key());if(!e){try{let i=(yield X5(this.resolver,this.auth))?yield Vr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ep.set(this.auth._key(),e)}return this.bypassAuthState||ep.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return Vr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Vr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function X5(n,e){return E(this,null,function*(){let t=nz(e),i=tz(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function ez(n,e){ep.set(n._key(),e)}function tz(n){return br(n._redirectPersistence)}function nz(n){return Xf(J5,n.config.apiKey,n.name)}function iz(n,e,t=!1){return E(this,null,function*(){if(si(n.app))return Promise.reject(wr(n));let i=vo(n),r=K5(i,e),o=yield new G0(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var rz=10*60*1e3,K0=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sz(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!E1(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(go(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rz&&this.cachedEventUids.clear(),this.cachedEventUids.has($A(e))}saveEventToCache(e){this.cachedEventUids.add($A(e)),this.lastProcessedEventTime=Date.now()}};function $A(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function E1({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function sz(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return E1(n);default:return!1}}function oz(t){return E(this,arguments,function*(n,e={}){return ds(n,"GET","/v1/projects",e)})}var az=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cz=/^https?/;function lz(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield oz(n);for(let t of e)try{if(uz(t))return}catch{}Di(n,"unauthorized-domain")})}function uz(n){let e=R0(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!cz.test(t))return!1;if(az.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var dz=new mo(3e4,6e4);function zA(){let n=Ci().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function hz(n){return new Promise((e,t)=>{var i,r,s;function o(){zA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zA(),t(go(n,"network-request-failed"))},timeout:dz.get()})}if(!((r=(i=Ci().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Ci().gapi)===null||s===void 0)&&s.load)o();else{let a=h1("iframefcb");return Ci()[a]=()=>{gapi.load?o():t(go(n,"network-request-failed"))},d1(`${y5()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw tp=null,e})}var tp=null;function fz(n){return tp=tp||hz(n),tp}var pz=new mo(5e3,15e3),gz="__/auth/iframe",mz="emulator/auth/iframe",yz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _z(n){let e=n.config;ee(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?J0(e,mz):`https://${n.config.authDomain}/${gz}`,i={apiKey:e.apiKey,appName:n.name,v:as},r=vz.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${Kl(i).slice(1)}`}function bz(n){return E(this,null,function*(){let e=yield fz(n),t=Ci().gapi;return ee(t,n,"internal-error"),e.open({where:document.body,url:_z(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yz,dontclear:!0},i=>new Promise((r,s)=>E(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=go(n,"network-request-failed"),a=Ci().setTimeout(()=>{s(o)},pz.get());function c(){Ci().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})})))})}var wz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Iz=500,Ez=600,Cz="_blank",Dz="http://localhost",hp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Sz(n,e,t,i=Iz,r=Ez){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",c=Object.assign(Object.assign({},wz),{width:i.toString(),height:r.toString(),top:s,left:o}),l=Rt().toLowerCase();t&&(a=r1(l)?Cz:t),n1(l)&&(e=e||Dz,c.scrollbars="yes");let d=Object.entries(c).reduce((p,[g,y])=>`${p}${g}=${y},`,"");if(d5(l)&&a!=="_self")return xz(e||"",a),new hp(null);let h=window.open(e||"",a,d);ee(h,n,"popup-blocked");try{h.focus()}catch{}return new hp(h)}function xz(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var Tz="__/auth/handler",Mz="emulator/auth/handler",Az=encodeURIComponent("fac");function HA(n,e,t,i,r,s){return E(this,null,function*(){ee(n.config.authDomain,n,"auth-domain-config-required"),ee(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:as,eventId:r};if(e instanceof cp){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",pA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof $0){let d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),l=c?`#${Az}=${encodeURIComponent(c)}`:"";return`${Pz(n)}?${Kl(a).slice(1)}${l}`})}function Pz({config:n}){return n.emulator?J0(n,Mz):`https://${n.authDomain}/${Tz}`}var P0="webStorageSupport",Q0=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=au,this._completeRedirectFn=iz,this._overrideRedirectResult=ez}_openPopup(e,t,i,r){return E(this,null,function*(){var s;ls((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield HA(e,t,i,R0(),r);return Sz(e,o,v1())})}_openRedirect(e,t,i,r){return E(this,null,function*(){yield this._originValidation(e);let s=yield HA(e,t,i,R0(),r);return V5(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(ls(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return E(this,null,function*(){let t=yield bz(e),i=new K0(e);return t.register("authEvent",r=>(ee(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(P0,{type:P0},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[P0];o!==void 0&&t(!!o),Di(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lz(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return l1()||i1()||nb()}},C1=Q0;var qA="@firebase/auth",WA="1.7.9";var Y0=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Rz(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Oz(n){os(new Ln("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:u1(n)},l=new j0(i,r,s,c);return b5(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),os(new Ln("auth-internal",e=>{let t=vo(e.getProvider("auth").getImmediate());return(i=>new Y0(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xt(qA,WA,Rz(n)),xt(qA,WA,"esm2017")}var Nz=5*60,kz=u0("authIdTokenMaxAge")||Nz,GA=null,Fz=n=>e=>E(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>kz)return;let r=t?.token;GA!==r&&(GA=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function lb(n=Ga()){let e=Zl(n,"auth");if(e.isInitialized())return e.getImmediate();let t=ib(n,{popupRedirectResolver:C1,persistence:[I1,mp,au]}),i=u0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=Fz(s.toString());cb(t,o,()=>o(t.currentUser)),pp(t,a=>o(a))}}let r=c0("auth");return r&&rb(t,`http://${r}`),t}function Lz(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}g5({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=go("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",Lz().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Oz("Browser");function S1(n){return new pe(function(e){var t=gp(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var x1="auth",_o=class{constructor(e){return e}},cu=class{constructor(){return Jl(x1)}};var ub=new Y("angularfire2.auth-instances");function SH(n,e){let t=Qf(x1,n,e);return t&&new _o(t)}function xH(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new _o(i)}}var TH={provide:cu,deps:[[new nn,ub]]},MH={provide:_o,useFactory:SH,deps:[[new nn,ub],vr]};function T1(n,...e){return xt("angularfire",fo.full,"auth"),vi([MH,TH,{provide:ub,useFactory:xH(n),multi:!0,deps:[ke,cn,Ya,po,[new nn,Qa],...e]}])}var M1=Tt(S1,!0);var A1=Tt(ob,!0);var P1=Tt(lb,!0);var R1=Tt(ab,!0);var O1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},N1={};var hs,db;(function(){var n;function e(C,w){function I(){}I.prototype=w.prototype,C.D=w.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(S,x,A){for(var D=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)D[Je-2]=arguments[Je];return w.prototype[x].apply(S,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(C,w,I){I||(I=0);var S=Array(16);if(typeof w=="string")for(var x=0;16>x;++x)S[x]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(x=0;16>x;++x)S[x]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=C.g[0],I=C.g[1],x=C.g[2];var A=C.g[3],D=w+(A^I&(x^A))+S[0]+3614090360&4294967295;w=I+(D<<7&4294967295|D>>>25),D=A+(x^w&(I^x))+S[1]+3905402710&4294967295,A=w+(D<<12&4294967295|D>>>20),D=x+(I^A&(w^I))+S[2]+606105819&4294967295,x=A+(D<<17&4294967295|D>>>15),D=I+(w^x&(A^w))+S[3]+3250441966&4294967295,I=x+(D<<22&4294967295|D>>>10),D=w+(A^I&(x^A))+S[4]+4118548399&4294967295,w=I+(D<<7&4294967295|D>>>25),D=A+(x^w&(I^x))+S[5]+1200080426&4294967295,A=w+(D<<12&4294967295|D>>>20),D=x+(I^A&(w^I))+S[6]+2821735955&4294967295,x=A+(D<<17&4294967295|D>>>15),D=I+(w^x&(A^w))+S[7]+4249261313&4294967295,I=x+(D<<22&4294967295|D>>>10),D=w+(A^I&(x^A))+S[8]+1770035416&4294967295,w=I+(D<<7&4294967295|D>>>25),D=A+(x^w&(I^x))+S[9]+2336552879&4294967295,A=w+(D<<12&4294967295|D>>>20),D=x+(I^A&(w^I))+S[10]+4294925233&4294967295,x=A+(D<<17&4294967295|D>>>15),D=I+(w^x&(A^w))+S[11]+2304563134&4294967295,I=x+(D<<22&4294967295|D>>>10),D=w+(A^I&(x^A))+S[12]+1804603682&4294967295,w=I+(D<<7&4294967295|D>>>25),D=A+(x^w&(I^x))+S[13]+4254626195&4294967295,A=w+(D<<12&4294967295|D>>>20),D=x+(I^A&(w^I))+S[14]+2792965006&4294967295,x=A+(D<<17&4294967295|D>>>15),D=I+(w^x&(A^w))+S[15]+1236535329&4294967295,I=x+(D<<22&4294967295|D>>>10),D=w+(x^A&(I^x))+S[1]+4129170786&4294967295,w=I+(D<<5&4294967295|D>>>27),D=A+(I^x&(w^I))+S[6]+3225465664&4294967295,A=w+(D<<9&4294967295|D>>>23),D=x+(w^I&(A^w))+S[11]+643717713&4294967295,x=A+(D<<14&4294967295|D>>>18),D=I+(A^w&(x^A))+S[0]+3921069994&4294967295,I=x+(D<<20&4294967295|D>>>12),D=w+(x^A&(I^x))+S[5]+3593408605&4294967295,w=I+(D<<5&4294967295|D>>>27),D=A+(I^x&(w^I))+S[10]+38016083&4294967295,A=w+(D<<9&4294967295|D>>>23),D=x+(w^I&(A^w))+S[15]+3634488961&4294967295,x=A+(D<<14&4294967295|D>>>18),D=I+(A^w&(x^A))+S[4]+3889429448&4294967295,I=x+(D<<20&4294967295|D>>>12),D=w+(x^A&(I^x))+S[9]+568446438&4294967295,w=I+(D<<5&4294967295|D>>>27),D=A+(I^x&(w^I))+S[14]+3275163606&4294967295,A=w+(D<<9&4294967295|D>>>23),D=x+(w^I&(A^w))+S[3]+4107603335&4294967295,x=A+(D<<14&4294967295|D>>>18),D=I+(A^w&(x^A))+S[8]+1163531501&4294967295,I=x+(D<<20&4294967295|D>>>12),D=w+(x^A&(I^x))+S[13]+2850285829&4294967295,w=I+(D<<5&4294967295|D>>>27),D=A+(I^x&(w^I))+S[2]+4243563512&4294967295,A=w+(D<<9&4294967295|D>>>23),D=x+(w^I&(A^w))+S[7]+1735328473&4294967295,x=A+(D<<14&4294967295|D>>>18),D=I+(A^w&(x^A))+S[12]+2368359562&4294967295,I=x+(D<<20&4294967295|D>>>12),D=w+(I^x^A)+S[5]+4294588738&4294967295,w=I+(D<<4&4294967295|D>>>28),D=A+(w^I^x)+S[8]+2272392833&4294967295,A=w+(D<<11&4294967295|D>>>21),D=x+(A^w^I)+S[11]+1839030562&4294967295,x=A+(D<<16&4294967295|D>>>16),D=I+(x^A^w)+S[14]+4259657740&4294967295,I=x+(D<<23&4294967295|D>>>9),D=w+(I^x^A)+S[1]+2763975236&4294967295,w=I+(D<<4&4294967295|D>>>28),D=A+(w^I^x)+S[4]+1272893353&4294967295,A=w+(D<<11&4294967295|D>>>21),D=x+(A^w^I)+S[7]+4139469664&4294967295,x=A+(D<<16&4294967295|D>>>16),D=I+(x^A^w)+S[10]+3200236656&4294967295,I=x+(D<<23&4294967295|D>>>9),D=w+(I^x^A)+S[13]+681279174&4294967295,w=I+(D<<4&4294967295|D>>>28),D=A+(w^I^x)+S[0]+3936430074&4294967295,A=w+(D<<11&4294967295|D>>>21),D=x+(A^w^I)+S[3]+3572445317&4294967295,x=A+(D<<16&4294967295|D>>>16),D=I+(x^A^w)+S[6]+76029189&4294967295,I=x+(D<<23&4294967295|D>>>9),D=w+(I^x^A)+S[9]+3654602809&4294967295,w=I+(D<<4&4294967295|D>>>28),D=A+(w^I^x)+S[12]+3873151461&4294967295,A=w+(D<<11&4294967295|D>>>21),D=x+(A^w^I)+S[15]+530742520&4294967295,x=A+(D<<16&4294967295|D>>>16),D=I+(x^A^w)+S[2]+3299628645&4294967295,I=x+(D<<23&4294967295|D>>>9),D=w+(x^(I|~A))+S[0]+4096336452&4294967295,w=I+(D<<6&4294967295|D>>>26),D=A+(I^(w|~x))+S[7]+1126891415&4294967295,A=w+(D<<10&4294967295|D>>>22),D=x+(w^(A|~I))+S[14]+2878612391&4294967295,x=A+(D<<15&4294967295|D>>>17),D=I+(A^(x|~w))+S[5]+4237533241&4294967295,I=x+(D<<21&4294967295|D>>>11),D=w+(x^(I|~A))+S[12]+1700485571&4294967295,w=I+(D<<6&4294967295|D>>>26),D=A+(I^(w|~x))+S[3]+2399980690&4294967295,A=w+(D<<10&4294967295|D>>>22),D=x+(w^(A|~I))+S[10]+4293915773&4294967295,x=A+(D<<15&4294967295|D>>>17),D=I+(A^(x|~w))+S[1]+2240044497&4294967295,I=x+(D<<21&4294967295|D>>>11),D=w+(x^(I|~A))+S[8]+1873313359&4294967295,w=I+(D<<6&4294967295|D>>>26),D=A+(I^(w|~x))+S[15]+4264355552&4294967295,A=w+(D<<10&4294967295|D>>>22),D=x+(w^(A|~I))+S[6]+2734768916&4294967295,x=A+(D<<15&4294967295|D>>>17),D=I+(A^(x|~w))+S[13]+1309151649&4294967295,I=x+(D<<21&4294967295|D>>>11),D=w+(x^(I|~A))+S[4]+4149444226&4294967295,w=I+(D<<6&4294967295|D>>>26),D=A+(I^(w|~x))+S[11]+3174756917&4294967295,A=w+(D<<10&4294967295|D>>>22),D=x+(w^(A|~I))+S[2]+718787259&4294967295,x=A+(D<<15&4294967295|D>>>17),D=I+(A^(x|~w))+S[9]+3951481745&4294967295,C.g[0]=C.g[0]+w&4294967295,C.g[1]=C.g[1]+(x+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+x&4294967295,C.g[3]=C.g[3]+A&4294967295}i.prototype.u=function(C,w){w===void 0&&(w=C.length);for(var I=w-this.blockSize,S=this.B,x=this.h,A=0;A<w;){if(x==0)for(;A<=I;)r(this,C,A),A+=this.blockSize;if(typeof C=="string"){for(;A<w;)if(S[x++]=C.charCodeAt(A++),x==this.blockSize){r(this,S),x=0;break}}else for(;A<w;)if(S[x++]=C[A++],x==this.blockSize){r(this,S),x=0;break}}this.h=x,this.o+=w},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var w=1;w<C.length-8;++w)C[w]=0;var I=8*this.o;for(w=C.length-8;w<C.length;++w)C[w]=I&255,I/=256;for(this.u(C),C=Array(16),w=I=0;4>w;++w)for(var S=0;32>S;S+=8)C[I++]=this.g[w]>>>S&255;return C};function s(C,w){var I=a;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=w(C)}function o(C,w){this.h=w;for(var I=[],S=!0,x=C.length-1;0<=x;x--){var A=C[x]|0;S&&A==w||(I[x]=A,S=!1)}this.g=I}var a={};function c(C){return-128<=C&&128>C?s(C,function(w){return new o([w|0],0>w?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return _(l(-C));for(var w=[],I=1,S=0;C>=I;S++)w[S]=C/I|0,I*=4294967296;return new o(w,0)}function d(C,w){if(C.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(C.charAt(0)=="-")return _(d(C.substring(1),w));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(w,8)),S=h,x=0;x<C.length;x+=8){var A=Math.min(8,C.length-x),D=parseInt(C.substring(x,x+A),w);8>A?(A=l(Math.pow(w,A)),S=S.j(A).add(l(D))):(S=S.j(I),S=S.add(l(D)))}return S}var h=c(0),p=c(1),g=c(16777216);n=o.prototype,n.m=function(){if(v(this))return-_(this).m();for(var C=0,w=1,I=0;I<this.g.length;I++){var S=this.i(I);C+=(0<=S?S:4294967296+S)*w,w*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(y(this))return"0";if(v(this))return"-"+_(this).toString(C);for(var w=l(Math.pow(C,6)),I=this,S="";;){var x=j(I,w).g;I=T(I,x.j(w));var A=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=x,y(I))return A+S;for(;6>A.length;)A="0"+A;S=A+S}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function y(C){if(C.h!=0)return!1;for(var w=0;w<C.g.length;w++)if(C.g[w]!=0)return!1;return!0}function v(C){return C.h==-1}n.l=function(C){return C=T(this,C),v(C)?-1:y(C)?0:1};function _(C){for(var w=C.g.length,I=[],S=0;S<w;S++)I[S]=~C.g[S];return new o(I,~C.h).add(p)}n.abs=function(){return v(this)?_(this):this},n.add=function(C){for(var w=Math.max(this.g.length,C.g.length),I=[],S=0,x=0;x<=w;x++){var A=S+(this.i(x)&65535)+(C.i(x)&65535),D=(A>>>16)+(this.i(x)>>>16)+(C.i(x)>>>16);S=D>>>16,A&=65535,D&=65535,I[x]=D<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function T(C,w){return C.add(_(w))}n.j=function(C){if(y(this)||y(C))return h;if(v(this))return v(C)?_(this).j(_(C)):_(_(this).j(C));if(v(C))return _(this.j(_(C)));if(0>this.l(g)&&0>C.l(g))return l(this.m()*C.m());for(var w=this.g.length+C.g.length,I=[],S=0;S<2*w;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(var x=0;x<C.g.length;x++){var A=this.i(S)>>>16,D=this.i(S)&65535,Je=C.i(x)>>>16,be=C.i(x)&65535;I[2*S+2*x]+=D*be,P(I,2*S+2*x),I[2*S+2*x+1]+=A*be,P(I,2*S+2*x+1),I[2*S+2*x+1]+=D*Je,P(I,2*S+2*x+1),I[2*S+2*x+2]+=A*Je,P(I,2*S+2*x+2)}for(S=0;S<w;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=w;S<2*w;S++)I[S]=0;return new o(I,0)};function P(C,w){for(;(C[w]&65535)!=C[w];)C[w+1]+=C[w]>>>16,C[w]&=65535,w++}function N(C,w){this.g=C,this.h=w}function j(C,w){if(y(w))throw Error("division by zero");if(y(C))return new N(h,h);if(v(C))return w=j(_(C),w),new N(_(w.g),_(w.h));if(v(w))return w=j(C,_(w)),new N(_(w.g),w.h);if(30<C.g.length){if(v(C)||v(w))throw Error("slowDivide_ only works with positive integers.");for(var I=p,S=w;0>=S.l(C);)I=L(I),S=L(S);var x=k(I,1),A=k(S,1);for(S=k(S,2),I=k(I,2);!y(S);){var D=A.add(S);0>=D.l(C)&&(x=x.add(I),A=D),S=k(S,1),I=k(I,1)}return w=T(C,x.j(w)),new N(x,w)}for(x=h;0<=C.l(w);){for(I=Math.max(1,Math.floor(C.m()/w.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),A=l(I),D=A.j(w);v(D)||0<D.l(C);)I-=S,A=l(I),D=A.j(w);y(A)&&(A=p),x=x.add(A),C=T(C,D)}return new N(x,C)}n.A=function(C){return j(this,C).h},n.and=function(C){for(var w=Math.max(this.g.length,C.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)&C.i(S);return new o(I,this.h&C.h)},n.or=function(C){for(var w=Math.max(this.g.length,C.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)|C.i(S);return new o(I,this.h|C.h)},n.xor=function(C){for(var w=Math.max(this.g.length,C.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)^C.i(S);return new o(I,this.h^C.h)};function L(C){for(var w=C.g.length+1,I=[],S=0;S<w;S++)I[S]=C.i(S)<<1|C.i(S-1)>>>31;return new o(I,C.h)}function k(C,w){var I=w>>5;w%=32;for(var S=C.g.length-I,x=[],A=0;A<S;A++)x[A]=0<w?C.i(A+I)>>>w|C.i(A+I+1)<<32-w:C.i(A+I);return new o(x,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,db=N1.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,hs=N1.Integer=o}).apply(typeof O1<"u"?O1:typeof self<"u"?self:typeof window<"u"?window:{});var vp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ir={};var hb,PH,Xa,fb,lu,_p,pb,gb,mb;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof vp=="object"&&vp];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var i=t(this);function r(u,f){if(f)e:{var m=i;u=u.split(".");for(var b=0;b<u.length-1;b++){var O=u[b];if(!(O in m))break e;m=m[O]}u=u[u.length-1],b=m[u],f=f(b),f!=b&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,b=!1,O={next:function(){if(!b&&m<u.length){var F=m++;return{value:f(F,u[F]),done:!1}}return b=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}r("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function l(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,m){return u.call.apply(u.bind,arguments)}function h(u,f,m){if(!u)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,b),u.apply(f,O)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var b=m.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function y(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(b,O,F){for(var z=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)z[Le-2]=arguments[Le];return f.prototype[O].apply(b,z)}}function v(u){let f=u.length;if(0<f){let m=Array(f);for(let b=0;b<f;b++)m[b]=u[b];return m}return[]}function _(u,f){for(let m=1;m<arguments.length;m++){let b=arguments[m];if(c(b)){let O=u.length||0,F=b.length||0;u.length=O+F;for(let z=0;z<F;z++)u[O+z]=b[z]}else u.push(b)}}class T{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function P(u){return/^[\s\xa0]*$/.test(u)}function N(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function j(u){return j[" "](u),u}j[" "]=function(){};var L=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function k(u,f,m){for(let b in u)f.call(m,u[b],b,u)}function C(u,f){for(let m in u)f.call(void 0,u[m],m,u)}function w(u){let f={};for(let m in u)f[m]=u[m];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(u,f){let m,b;for(let O=1;O<arguments.length;O++){b=arguments[O];for(m in b)u[m]=b[m];for(let F=0;F<I.length;F++)m=I[F],Object.prototype.hasOwnProperty.call(b,m)&&(u[m]=b[m])}}function x(u){var f=1;u=u.split(":");let m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function A(u){a.setTimeout(()=>{throw u},0)}function D(){var u=ut;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Je{constructor(){this.h=this.g=null}add(f,m){let b=be.get();b.set(f,m),this.h?this.h.next=b:this.g=b,this.h=b}}var be=new T(()=>new Ue,u=>u.reset());class Ue{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Fe,Nt=!1,ut=new Je,qi=()=>{let u=a.Promise.resolve(void 0);Fe=()=>{u.then(Wo)}};var Wo=()=>{for(var u;u=D();){try{u.h.call(u.g)}catch(m){A(m)}var f=be;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}Nt=!1};function Yt(){this.s=this.s,this.C=this.C}Yt.prototype.s=!1,Yt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Yt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function it(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}it.prototype.h=function(){this.defaultPrevented=!0};var Wi=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function $n(u,f){if(it.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(L){e:{try{j(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Gi[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&$n.aa.h.call(this)}}y($n,it);var Gi={2:"touch",3:"pen",4:"mouse"};$n.prototype.h=function(){$n.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Uc="closure_listenable_"+(1e6*Math.random()|0),Tk=0;function Mk(u,f,m,b,O){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!b,this.ha=O,this.key=++Tk,this.da=this.fa=!1}function hd(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function fd(u){this.src=u,this.g={},this.h=0}fd.prototype.add=function(u,f,m,b,O){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var z=Im(u,f,b,O);return-1<z?(f=u[z],m||(f.fa=!1)):(f=new Mk(f,this.src,F,!!b,O),f.fa=m,u.push(f)),f};function wm(u,f){var m=f.type;if(m in u.g){var b=u.g[m],O=Array.prototype.indexOf.call(b,f,void 0),F;(F=0<=O)&&Array.prototype.splice.call(b,O,1),F&&(hd(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Im(u,f,m,b){for(var O=0;O<u.length;++O){var F=u[O];if(!F.da&&F.listener==f&&F.capture==!!m&&F.ha==b)return O}return-1}var Em="closure_lm_"+(1e6*Math.random()|0),Cm={};function KE(u,f,m,b,O){if(b&&b.once)return YE(u,f,m,b,O);if(Array.isArray(f)){for(var F=0;F<f.length;F++)KE(u,f[F],m,b,O);return null}return m=Tm(m),u&&u[Uc]?u.K(f,m,l(b)?!!b.capture:!!b,O):QE(u,f,m,!1,b,O)}function QE(u,f,m,b,O,F){if(!f)throw Error("Invalid event type");var z=l(O)?!!O.capture:!!O,Le=Sm(u);if(Le||(u[Em]=Le=new fd(u)),m=Le.add(f,m,b,z,F),m.proxy)return m;if(b=Ak(),m.proxy=b,b.src=u,b.listener=m,u.addEventListener)Wi||(O=z),O===void 0&&(O=!1),u.addEventListener(f.toString(),b,O);else if(u.attachEvent)u.attachEvent(JE(f.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Ak(){function u(m){return f.call(u.src,u.listener,m)}let f=Pk;return u}function YE(u,f,m,b,O){if(Array.isArray(f)){for(var F=0;F<f.length;F++)YE(u,f[F],m,b,O);return null}return m=Tm(m),u&&u[Uc]?u.L(f,m,l(b)?!!b.capture:!!b,O):QE(u,f,m,!0,b,O)}function ZE(u,f,m,b,O){if(Array.isArray(f))for(var F=0;F<f.length;F++)ZE(u,f[F],m,b,O);else b=l(b)?!!b.capture:!!b,m=Tm(m),u&&u[Uc]?(u=u.i,f=String(f).toString(),f in u.g&&(F=u.g[f],m=Im(F,m,b,O),-1<m&&(hd(F[m]),Array.prototype.splice.call(F,m,1),F.length==0&&(delete u.g[f],u.h--)))):u&&(u=Sm(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Im(f,m,b,O)),(m=-1<u?f[u]:null)&&Dm(m))}function Dm(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Uc])wm(f.i,u);else{var m=u.type,b=u.proxy;f.removeEventListener?f.removeEventListener(m,b,u.capture):f.detachEvent?f.detachEvent(JE(m),b):f.addListener&&f.removeListener&&f.removeListener(b),(m=Sm(f))?(wm(m,u),m.h==0&&(m.src=null,f[Em]=null)):hd(u)}}}function JE(u){return u in Cm?Cm[u]:Cm[u]="on"+u}function Pk(u,f){if(u.da)u=!0;else{f=new $n(f,this);var m=u.listener,b=u.ha||u.src;u.fa&&Dm(u),u=m.call(b,f)}return u}function Sm(u){return u=u[Em],u instanceof fd?u:null}var xm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tm(u){return typeof u=="function"?u:(u[xm]||(u[xm]=function(f){return u.handleEvent(f)}),u[xm])}function Bt(){Yt.call(this),this.i=new fd(this),this.M=this,this.F=null}y(Bt,Yt),Bt.prototype[Uc]=!0,Bt.prototype.removeEventListener=function(u,f,m,b){ZE(this,u,f,m,b)};function Zt(u,f){var m,b=u.F;if(b)for(m=[];b;b=b.F)m.push(b);if(u=u.M,b=f.type||f,typeof f=="string")f=new it(f,u);else if(f instanceof it)f.target=f.target||u;else{var O=f;f=new it(b,u),S(f,O)}if(O=!0,m)for(var F=m.length-1;0<=F;F--){var z=f.g=m[F];O=pd(z,b,!0,f)&&O}if(z=f.g=u,O=pd(z,b,!0,f)&&O,O=pd(z,b,!1,f)&&O,m)for(F=0;F<m.length;F++)z=f.g=m[F],O=pd(z,b,!1,f)&&O}Bt.prototype.N=function(){if(Bt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],b=0;b<m.length;b++)hd(m[b]);delete u.g[f],u.h--}}this.F=null},Bt.prototype.K=function(u,f,m,b){return this.i.add(String(u),f,!1,m,b)},Bt.prototype.L=function(u,f,m,b){return this.i.add(String(u),f,!0,m,b)};function pd(u,f,m,b){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,F=0;F<f.length;++F){var z=f[F];if(z&&!z.da&&z.capture==m){var Le=z.listener,kt=z.ha||z.src;z.fa&&wm(u.i,z),O=Le.call(kt,b)!==!1&&O}}return O&&!b.defaultPrevented}function XE(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function eC(u){u.g=XE(()=>{u.g=null,u.i&&(u.i=!1,eC(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class Rk extends Yt{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:eC(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $c(u){Yt.call(this),this.h=u,this.g={}}y($c,Yt);var tC=[];function nC(u){k(u.g,function(f,m){this.g.hasOwnProperty(m)&&Dm(f)},u),u.g={}}$c.prototype.N=function(){$c.aa.N.call(this),nC(this)},$c.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mm=a.JSON.stringify,Ok=a.JSON.parse,Nk=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Am(){}Am.prototype.h=null;function iC(u){return u.h||(u.h=u.i())}function rC(){}var zc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pm(){it.call(this,"d")}y(Pm,it);function Rm(){it.call(this,"c")}y(Rm,it);var Ps={},sC=null;function gd(){return sC=sC||new Bt}Ps.La="serverreachability";function oC(u){it.call(this,Ps.La,u)}y(oC,it);function Hc(u){let f=gd();Zt(f,new oC(f))}Ps.STAT_EVENT="statevent";function aC(u,f){it.call(this,Ps.STAT_EVENT,u),this.stat=f}y(aC,it);function Jt(u){let f=gd();Zt(f,new aC(f,u))}Ps.Ma="timingevent";function cC(u,f){it.call(this,Ps.Ma,u),this.size=f}y(cC,it);function qc(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Wc(){this.g=!0}Wc.prototype.xa=function(){this.g=!1};function kk(u,f,m,b,O,F){u.info(function(){if(u.g)if(F)for(var z="",Le=F.split("&"),kt=0;kt<Le.length;kt++){var Se=Le[kt].split("=");if(1<Se.length){var Ut=Se[0];Se=Se[1];var $t=Ut.split("_");z=2<=$t.length&&$t[1]=="type"?z+(Ut+"="+Se+"&"):z+(Ut+"=redacted&")}}else z=null;else z=F;return"XMLHTTP REQ ("+b+") [attempt "+O+"]: "+f+`
`+m+`
`+z})}function Fk(u,f,m,b,O,F,z){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+O+"]: "+f+`
`+m+`
`+F+" "+z})}function Go(u,f,m,b){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Vk(u,m)+(b?" "+b:"")})}function Lk(u,f){u.info(function(){return"TIMEOUT: "+f})}Wc.prototype.info=function(){};function Vk(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var b=m[u];if(!(2>b.length)){var O=b[1];if(Array.isArray(O)&&!(1>O.length)){var F=O[0];if(F!="noop"&&F!="stop"&&F!="close")for(var z=1;z<O.length;z++)O[z]=""}}}}return Mm(m)}catch{return f}}var md={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lC={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Om;function yd(){}y(yd,Am),yd.prototype.g=function(){return new XMLHttpRequest},yd.prototype.i=function(){return{}},Om=new yd;function kr(u,f,m,b){this.j=u,this.i=f,this.l=m,this.R=b||1,this.U=new $c(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new uC}function uC(){this.i=null,this.g="",this.h=!1}var dC={},Nm={};function km(u,f,m){u.L=1,u.v=wd(Ki(f)),u.m=m,u.P=!0,hC(u,null)}function hC(u,f){u.F=Date.now(),vd(u),u.A=Ki(u.v);var m=u.A,b=u.R;Array.isArray(b)||(b=[String(b)]),SC(m.i,"t",b),u.C=0,m=u.j.J,u.h=new uC,u.g=HC(u.j,m?f:null,!u.m),0<u.O&&(u.M=new Rk(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,b=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(tC[0]=O.toString()),O=tC);for(var F=0;F<O.length;F++){var z=KE(m,O[F],b||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Hc(),kk(u.i,u.u,u.A,u.l,u.R,u.m)}kr.prototype.ca=function(u){u=u.target;let f=this.M;f&&Qi(u)==3?f.j():this.Y(u)},kr.prototype.Y=function(u){try{if(u==this.g)e:{let $t=Qi(this.g);var f=this.g.Ba();let Yo=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||OC(this.g)))){this.J||$t!=4||f==7||(f==8||0>=Yo?Hc(3):Hc(2)),Fm(this);var m=this.g.Z();this.X=m;t:if(fC(this)){var b=OC(this.g);u="";var O=b.length,F=Qi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rs(this),Gc(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,u+=this.h.i.decode(b[f],{stream:!(F&&f==O-1)});b.length=0,this.h.g+=u,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=m==200,Fk(this.i,this.u,this.A,this.l,this.R,$t,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,kt=this.g;if((Le=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Le)){var Se=Le;break t}}Se=null}if(m=Se)Go(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lm(this,m);else{this.o=!1,this.s=3,Jt(12),Rs(this),Gc(this);break e}}if(this.P){m=!0;let zn;for(;!this.J&&this.C<z.length;)if(zn=jk(this,z),zn==Nm){$t==4&&(this.s=4,Jt(14),m=!1),Go(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==dC){this.s=4,Jt(15),Go(this.i,this.l,z,"[Invalid Chunk]"),m=!1;break}else Go(this.i,this.l,zn,null),Lm(this,zn);if(fC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||z.length!=0||this.h.h||(this.s=1,Jt(16),m=!1),this.o=this.o&&m,!m)Go(this.i,this.l,z,"[Invalid Chunked Response]"),Rs(this),Gc(this);else if(0<z.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),zm(Ut),Ut.M=!0,Jt(11))}}else Go(this.i,this.l,z,null),Lm(this,z);$t==4&&Rs(this),this.o&&!this.J&&($t==4?BC(this.j,this):(this.o=!1,vd(this)))}else nF(this.g),m==400&&0<z.indexOf("Unknown SID")?(this.s=3,Jt(12)):(this.s=0,Jt(13)),Rs(this),Gc(this)}}}catch{}finally{}};function fC(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function jk(u,f){var m=u.C,b=f.indexOf(`
`,m);return b==-1?Nm:(m=Number(f.substring(m,b)),isNaN(m)?dC:(b+=1,b+m>f.length?Nm:(f=f.slice(b,b+m),u.C=b+m,f)))}kr.prototype.cancel=function(){this.J=!0,Rs(this)};function vd(u){u.S=Date.now()+u.I,pC(u,u.I)}function pC(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=qc(p(u.ba,u),f)}function Fm(u){u.B&&(a.clearTimeout(u.B),u.B=null)}kr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(Lk(this.i,this.A),this.L!=2&&(Hc(),Jt(17)),Rs(this),this.s=2,Gc(this)):pC(this,this.S-u)};function Gc(u){u.j.G==0||u.J||BC(u.j,u)}function Rs(u){Fm(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,nC(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Lm(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||Vm(m.h,u))){if(!u.K&&Vm(m.h,u)&&m.G==3){try{var b=m.Da.g.parse(f)}catch{b=null}if(Array.isArray(b)&&b.length==3){var O=b;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Sd(m),Cd(m);else break e;$m(m),Jt(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=qc(p(m.Za,m),6e3));if(1>=yC(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ns(m,11)}else if((u.K||m.g==u)&&Sd(m),!P(f))for(O=m.Da.g.parse(f),f=0;f<O.length;f++){let Se=O[f];if(m.T=Se[0],Se=Se[1],m.G==2)if(Se[0]=="c"){m.K=Se[1],m.ia=Se[2];let Ut=Se[3];Ut!=null&&(m.la=Ut,m.j.info("VER="+m.la));let $t=Se[4];$t!=null&&(m.Aa=$t,m.j.info("SVER="+m.Aa));let Yo=Se[5];Yo!=null&&typeof Yo=="number"&&0<Yo&&(b=1.5*Yo,m.L=b,m.j.info("backChannelRequestTimeoutMs_="+b)),b=m;let zn=u.g;if(zn){let Td=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Td){var F=b.h;F.g||Td.indexOf("spdy")==-1&&Td.indexOf("quic")==-1&&Td.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(jm(F,F.h),F.h=null))}if(b.D){let Hm=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;Hm&&(b.ya=Hm,We(b.I,b.D,Hm))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),b=m;var z=u;if(b.qa=zC(b,b.J?b.ia:null,b.W),z.K){vC(b.h,z);var Le=z,kt=b.L;kt&&(Le.I=kt),Le.B&&(Fm(Le),vd(Le)),b.g=z}else VC(b);0<m.i.length&&Dd(m)}else Se[0]!="stop"&&Se[0]!="close"||Ns(m,7);else m.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Ns(m,7):Um(m):Se[0]!="noop"&&m.l&&m.l.ta(Se),m.v=0)}}Hc(4)}catch{}}var Bk=class{constructor(u,f){this.g=u,this.map=f}};function gC(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mC(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function yC(u){return u.h?1:u.g?u.g.size:0}function Vm(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function jm(u,f){u.g?u.g.add(f):u.h=f}function vC(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}gC.prototype.cancel=function(){if(this.i=_C(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function _C(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let m of u.g.values())f=f.concat(m.D);return f}return v(u.i)}function Uk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],m=u.length,b=0;b<m;b++)f.push(u[b]);return f}f=[],m=0;for(b in u)f[m++]=u[b];return f}function $k(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(let b in u)f[m++]=b;return f}}}function bC(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=$k(u),b=Uk(u),O=b.length,F=0;F<O;F++)f.call(void 0,b[F],m&&m[F],u)}var wC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zk(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var b=u[m].indexOf("="),O=null;if(0<=b){var F=u[m].substring(0,b);O=u[m].substring(b+1)}else F=u[m];f(F,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Os(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Os){this.h=u.h,_d(this,u.j),this.o=u.o,this.g=u.g,bd(this,u.s),this.l=u.l;var f=u.i,m=new Yc;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),IC(this,m),this.m=u.m}else u&&(f=String(u).match(wC))?(this.h=!1,_d(this,f[1]||"",!0),this.o=Kc(f[2]||""),this.g=Kc(f[3]||"",!0),bd(this,f[4]),this.l=Kc(f[5]||"",!0),IC(this,f[6]||"",!0),this.m=Kc(f[7]||"")):(this.h=!1,this.i=new Yc(null,this.h))}Os.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Qc(f,EC,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Qc(f,EC,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Qc(m,m.charAt(0)=="/"?Wk:qk,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Qc(m,Kk)),u.join("")};function Ki(u){return new Os(u)}function _d(u,f,m){u.j=m?Kc(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function bd(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function IC(u,f,m){f instanceof Yc?(u.i=f,Qk(u.i,u.h)):(m||(f=Qc(f,Gk)),u.i=new Yc(f,u.h))}function We(u,f,m){u.i.set(f,m)}function wd(u){return We(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Kc(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qc(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,Hk),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Hk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var EC=/[#\/\?@]/g,qk=/[#\?:]/g,Wk=/[#\?]/g,Gk=/[#\?@]/g,Kk=/#/g;function Yc(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Fr(u){u.g||(u.g=new Map,u.h=0,u.i&&zk(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=Yc.prototype,n.add=function(u,f){Fr(this),this.i=null,u=Ko(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function CC(u,f){Fr(u),f=Ko(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function DC(u,f){return Fr(u),f=Ko(u,f),u.g.has(f)}n.forEach=function(u,f){Fr(this),this.g.forEach(function(m,b){m.forEach(function(O){u.call(f,O,b,this)},this)},this)},n.na=function(){Fr(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let b=0;b<f.length;b++){let O=u[b];for(let F=0;F<O.length;F++)m.push(f[b])}return m},n.V=function(u){Fr(this);let f=[];if(typeof u=="string")DC(this,u)&&(f=f.concat(this.g.get(Ko(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},n.set=function(u,f){return Fr(this),this.i=null,u=Ko(this,u),DC(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function SC(u,f,m){CC(u,f),0<m.length&&(u.i=null,u.g.set(Ko(u,f),v(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var b=f[m];let F=encodeURIComponent(String(b)),z=this.V(b);for(b=0;b<z.length;b++){var O=F;z[b]!==""&&(O+="="+encodeURIComponent(String(z[b]))),u.push(O)}}return this.i=u.join("&")};function Ko(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Qk(u,f){f&&!u.j&&(Fr(u),u.i=null,u.g.forEach(function(m,b){var O=b.toLowerCase();b!=O&&(CC(this,b),SC(this,O,m))},u)),u.j=f}function Yk(u,f){let m=new Wc;if(a.Image){let b=new Image;b.onload=g(Lr,m,"TestLoadImage: loaded",!0,f,b),b.onerror=g(Lr,m,"TestLoadImage: error",!1,f,b),b.onabort=g(Lr,m,"TestLoadImage: abort",!1,f,b),b.ontimeout=g(Lr,m,"TestLoadImage: timeout",!1,f,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else f(!1)}function Zk(u,f){let m=new Wc,b=new AbortController,O=setTimeout(()=>{b.abort(),Lr(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:b.signal}).then(F=>{clearTimeout(O),F.ok?Lr(m,"TestPingServer: ok",!0,f):Lr(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),Lr(m,"TestPingServer: error",!1,f)})}function Lr(u,f,m,b,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),b(m)}catch{}}function Jk(){this.g=new Nk}function Xk(u,f,m){let b=m||"";try{bC(u,function(O,F){let z=O;l(O)&&(z=Mm(O)),f.push(b+F+"="+encodeURIComponent(z))})}catch(O){throw f.push(b+"type="+encodeURIComponent("_badmap")),O}}function Zc(u){this.l=u.Ub||null,this.j=u.eb||!1}y(Zc,Am),Zc.prototype.g=function(){return new Id(this.l,this.j)},Zc.prototype.i=function(u){return function(){return u}}({});function Id(u,f){Bt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Id,Bt),n=Id.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Xc(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jc(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Xc(this)),this.g&&(this.readyState=3,Xc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xC(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function xC(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Jc(this):Xc(this),this.readyState==3&&xC(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Jc(this))},n.Qa=function(u){this.g&&(this.response=u,Jc(this))},n.ga=function(){this.g&&Jc(this)};function Jc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Xc(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function Xc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Id.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function TC(u){let f="";return k(u,function(m,b){f+=b,f+=":",f+=m,f+=`\r
`}),f}function Bm(u,f,m){e:{for(b in m){var b=!1;break e}b=!0}b||(m=TC(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):We(u,f,m))}function rt(u){Bt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(rt,Bt);var eF=/^https?$/i,tF=["POST","PUT"];n=rt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,m,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Om.g(),this.v=this.o?iC(this.o):iC(Om),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(F){MC(this,F);return}if(u=m||"",m=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var O in b)m.set(O,b[O]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(let F of b.keys())m.set(F,b.get(F));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(tF,f,void 0))||b||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[F,z]of m)this.g.setRequestHeader(F,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{RC(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){MC(this,F)}};function MC(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,AC(u),Ed(u)}function AC(u){u.A||(u.A=!0,Zt(u,"complete"),Zt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Zt(this,"complete"),Zt(this,"abort"),Ed(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ed(this,!0)),rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?PC(this):this.bb())},n.bb=function(){PC(this)};function PC(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Qi(u)!=4||u.Z()!=2)){if(u.u&&Qi(u)==4)XE(u.Ea,0,u);else if(Zt(u,"readystatechange"),Qi(u)==4){u.h=!1;try{let z=u.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var b;if(b=z===0){var O=String(u.D).match(wC)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),b=!eF.test(O?O.toLowerCase():"")}m=b}if(m)Zt(u,"complete"),Zt(u,"success");else{u.m=6;try{var F=2<Qi(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",AC(u)}}finally{Ed(u)}}}}function Ed(u,f){if(u.g){RC(u);let m=u.g,b=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Zt(u,"ready");try{m.onreadystatechange=b}catch{}}}function RC(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Qi(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Qi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Ok(f)}};function OC(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function nF(u){let f={};u=(u.g&&2<=Qi(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(P(u[b]))continue;var m=x(u[b]);let O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let F=f[O]||[];f[O]=F,F.push(m)}C(f,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function el(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function NC(u){this.Aa=0,this.i=[],this.j=new Wc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=el("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=el("baseRetryDelayMs",5e3,u),this.cb=el("retryDelaySeedMs",1e4,u),this.Wa=el("forwardChannelMaxRetries",2,u),this.wa=el("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new gC(u&&u.concurrentRequestLimit),this.Da=new Jk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=NC.prototype,n.la=8,n.G=1,n.connect=function(u,f,m,b){Jt(0),this.W=u,this.H=f||{},m&&b!==void 0&&(this.H.OSID=m,this.H.OAID=b),this.F=this.X,this.I=zC(this,null,this.W),Dd(this)};function Um(u){if(kC(u),u.G==3){var f=u.U++,m=Ki(u.I);if(We(m,"SID",u.K),We(m,"RID",f),We(m,"TYPE","terminate"),tl(u,m),f=new kr(u,u.j,f),f.L=2,f.v=wd(Ki(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=HC(f.j,null),f.g.ea(f.v)),f.F=Date.now(),vd(f)}$C(u)}function Cd(u){u.g&&(zm(u),u.g.cancel(),u.g=null)}function kC(u){Cd(u),u.u&&(a.clearTimeout(u.u),u.u=null),Sd(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Dd(u){if(!mC(u.h)&&!u.s){u.s=!0;var f=u.Ga;Fe||qi(),Nt||(Fe(),Nt=!0),ut.add(f,u),u.B=0}}function iF(u,f){return yC(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=qc(p(u.Ga,u,f),UC(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let O=new kr(this,this.j,u),F=this.o;if(this.S&&(F?(F=w(F),S(F,this.S)):F=this.S),this.m!==null||this.O||(O.H=F,F=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var b=this.i[m];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(f+=b,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=LC(this,O,f),m=Ki(this.I),We(m,"RID",u),We(m,"CVER",22),this.D&&We(m,"X-HTTP-Session-Id",this.D),tl(this,m),F&&(this.O?f="headers="+encodeURIComponent(String(TC(F)))+"&"+f:this.m&&Bm(m,this.m,F)),jm(this.h,O),this.Ua&&We(m,"TYPE","init"),this.P?(We(m,"$req",f),We(m,"SID","null"),O.T=!0,km(O,m,null)):km(O,m,f),this.G=2}}else this.G==3&&(u?FC(this,u):this.i.length==0||mC(this.h)||FC(this))};function FC(u,f){var m;f?m=f.l:m=u.U++;let b=Ki(u.I);We(b,"SID",u.K),We(b,"RID",m),We(b,"AID",u.T),tl(u,b),u.m&&u.o&&Bm(b,u.m,u.o),m=new kr(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=LC(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),jm(u.h,m),km(m,b,f)}function tl(u,f){u.H&&k(u.H,function(m,b){We(f,b,m)}),u.l&&bC({},function(m,b){We(f,b,m)})}function LC(u,f,m){m=Math.min(u.i.length,m);var b=u.l?p(u.l.Na,u.l,u):null;e:{var O=u.i;let F=-1;for(;;){let z=["count="+m];F==-1?0<m?(F=O[0].g,z.push("ofs="+F)):F=0:z.push("ofs="+F);let Le=!0;for(let kt=0;kt<m;kt++){let Se=O[kt].g,Ut=O[kt].map;if(Se-=F,0>Se)F=Math.max(0,O[kt].g-100),Le=!1;else try{Xk(Ut,z,"req"+Se+"_")}catch{b&&b(Ut)}}if(Le){b=z.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,b}function VC(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Fe||qi(),Nt||(Fe(),Nt=!0),ut.add(f,u),u.v=0}}function $m(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=qc(p(u.Fa,u),UC(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,jC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=qc(p(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Jt(10),Cd(this),jC(this))};function zm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function jC(u){u.g=new kr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Ki(u.qa);We(f,"RID","rpc"),We(f,"SID",u.K),We(f,"AID",u.T),We(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&We(f,"TO",u.ja),We(f,"TYPE","xmlhttp"),tl(u,f),u.m&&u.o&&Bm(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=wd(Ki(f)),m.m=null,m.P=!0,hC(m,u)}n.Za=function(){this.C!=null&&(this.C=null,Cd(this),$m(this),Jt(19))};function Sd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function BC(u,f){var m=null;if(u.g==f){Sd(u),zm(u),u.g=null;var b=2}else if(Vm(u.h,f))m=f.D,vC(u.h,f),b=1;else return;if(u.G!=0){if(f.o)if(b==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var O=u.B;b=gd(),Zt(b,new cC(b,m)),Dd(u)}else VC(u);else if(O=f.s,O==3||O==0&&0<f.X||!(b==1&&iF(u,f)||b==2&&$m(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),O){case 1:Ns(u,5);break;case 4:Ns(u,10);break;case 3:Ns(u,6);break;default:Ns(u,2)}}}function UC(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function Ns(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),b=u.Xa;let O=!b;b=new Os(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_d(b,"https"),wd(b),O?Yk(b.toString(),m):Zk(b.toString(),m)}else Jt(2);u.G=0,u.l&&u.l.sa(f),$C(u),kC(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function $C(u){if(u.G=0,u.ka=[],u.l){let f=_C(u.h);(f.length!=0||u.i.length!=0)&&(_(u.ka,f),_(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function zC(u,f,m){var b=m instanceof Os?Ki(m):new Os(m);if(b.g!="")f&&(b.g=f+"."+b.g),bd(b,b.s);else{var O=a.location;b=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var F=new Os(null);b&&_d(F,b),f&&(F.g=f),O&&bd(F,O),m&&(F.l=m),b=F}return m=u.D,f=u.ya,m&&f&&We(b,m,f),We(b,"VER",u.la),tl(u,b),b}function HC(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new rt(new Zc({eb:m})):new rt(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qC(){}n=qC.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function xd(){}xd.prototype.g=function(u,f){return new pn(u,f)};function pn(u,f){Bt.call(this),this.g=new NC(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!P(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!P(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Qo(this)}y(pn,Bt),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Um(this.g)},pn.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Mm(u),u=m);f.i.push(new Bk(f.Ya++,u)),f.G==3&&Dd(f)},pn.prototype.N=function(){this.g.l=null,delete this.j,Um(this.g),delete this.g,pn.aa.N.call(this)};function WC(u){Pm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(WC,Pm);function GC(){Rm.call(this),this.status=1}y(GC,Rm);function Qo(u){this.g=u}y(Qo,qC),Qo.prototype.ua=function(){Zt(this.g,"a")},Qo.prototype.ta=function(u){Zt(this.g,new WC(u))},Qo.prototype.sa=function(u){Zt(this.g,new GC)},Qo.prototype.ra=function(){Zt(this.g,"b")},xd.prototype.createWebChannel=xd.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,mb=Ir.createWebChannelTransport=function(){return new xd},gb=Ir.getStatEventTarget=function(){return gd()},pb=Ir.Event=Ps,_p=Ir.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},md.NO_ERROR=0,md.TIMEOUT=8,md.HTTP_ERROR=6,lu=Ir.ErrorCode=md,lC.COMPLETE="complete",fb=Ir.EventType=lC,rC.EventType=zc,zc.OPEN="a",zc.CLOSE="b",zc.ERROR="c",zc.MESSAGE="d",Bt.prototype.listen=Bt.prototype.K,Xa=Ir.WebChannel=rC,PH=Ir.FetchXmlHttpFactory=Zc,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,hb=Ir.XhrIo=rt}).apply(typeof vp<"u"?vp:typeof self<"u"?self:typeof window<"u"?window:{});var k1="@firebase/firestore";var Ot=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");var _c="10.14.0";var Eo=new rs("@firebase/firestore");function uu(){return Eo.logLevel}function K(n,...e){if(Eo.logLevel<=ve.DEBUG){let t=e.map(Jw);Eo.debug(`Firestore (${_c}): ${n}`,...t)}}function Cr(n,...e){if(Eo.logLevel<=ve.ERROR){let t=e.map(Jw);Eo.error(`Firestore (${_c}): ${n}`,...t)}}function oc(n,...e){if(Eo.logLevel<=ve.WARN){let t=e.map(Jw);Eo.warn(`Firestore (${_c}): ${n}`,...t)}}function Jw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function te(n="Unexpected state"){let e=`FIRESTORE (${_c}) INTERNAL ASSERTION FAILED: `+n;throw Cr(e),new Error(e)}function Ne(n,e){n||te()}function re(n,e){return n}var B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends wn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var oi=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Cp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},wb=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ot.UNAUTHENTICATED))}shutdown(){}},Ib=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Eb=class{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ne(this.o===void 0);let i=this.i,r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve(),s=new oi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new oi,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>E(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new oi)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ne(typeof i.accessToken=="string"),new Cp(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string"),new Ot(e)}},Cb=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Db=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new Cb(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Sb=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},xb=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ne(this.o===void 0);let i=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ne(typeof t.token=="string"),this.R=t.token,new Sb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function RH(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var Dp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=RH(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}};function Me(n,e){return n<e?-1:n>e?1:0}function ac(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var ot=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ce=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new ot(0,0))}static max(){return new n(new ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Sp=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&te(),i===void 0?i=e.length-t:i>e.length-t&&te(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},tt=class n extends Sp{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new G(B.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},OH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,En=class n extends Sp{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return OH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new G(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new G(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new G(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Z=class n{constructor(e){this.path=e}static fromPath(e){return new n(tt.fromString(e))}static fromName(e){return new n(tt.fromString(e).popFirst(5))}static empty(){return new n(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new tt(e.slice()))}};var Tb=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};Tb.UNKNOWN_ID=-1;function NH(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=ce.fromTimestamp(i===1e9?new ot(t+1,0):new ot(t,i));return new Co(r,Z.empty(),e)}function kH(n){return new Co(n.readTime,n.key,-1)}var Co=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(ce.min(),Z.empty(),-1)}static max(){return new n(ce.max(),Z.empty(),-1)}};function FH(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Z.comparator(n.documentKey,e.documentKey),t!==0?t:Me(n.largestBatchId,e.largestBatchId))}var LH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Mb=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Pu(n){return E(this,null,function*(){if(n.code!==B.FAILED_PRECONDITION||n.message!==LH)throw n;K("LocalStore","Unexpectedly lost primary lease")})}var U=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},c=>i(c))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(d=>{o[l]=d,++a,a===s&&i(o)},d=>r(d))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function VH(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ru(n){return n.name==="IndexedDbTransactionError"}var mP=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function ig(n){return n==null}function mu(n){return n===0&&1/n==-1/0}function jH(n){return typeof n=="number"&&Number.isInteger(n)&&!mu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var BH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Qie=[...BH,"documentOverlays"],UH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$H=UH,zH=[...$H,"indexConfiguration","indexState","indexEntries"];var Yie=[...zH,"globals"];function F1(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Po(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var at=class n{constructor(e,t){this.comparator=e,this.root=t||xi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ic(this.root,e,this.comparator,!0)}},ic=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},xi=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();let e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}};xi.EMPTY=null,xi.RED=!0,xi.BLACK=!1;xi.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,t,i,r,s){return this}insert(e,t,i){return new xi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var qt=class n{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xp(this.data.getIterator())}getIteratorFrom(e){return new xp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},xp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Vn=class n{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new n([])}unionWith(e){let t=new qt(En.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ac(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var Tp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Gt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Tp("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Gt.EMPTY_BYTE_STRING=new Gt("");var HH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(n){if(Ne(!!n),typeof n=="string"){let e=0,t=HH.exec(n);if(Ne(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ze(n.seconds),nanos:Ze(n.nanos)}}function Ze(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ps(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}function Xw(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function eI(n){let e=n.mapValue.fields.__previous_value__;return Xw(e)?eI(e):e}function yu(n){let e=Dr(n.mapValue.fields.__local_write_time__.timestampValue);return new ot(e.seconds,e.nanos)}var Ab=class{constructor(e,t,i,r,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Mp=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var bp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Do(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xw(n)?4:_P(n)?9007199254740991:vP(n)?10:11:te()}function Ai(n,e){if(n===e)return!0;let t=Do(n);if(t!==Do(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yu(n).isEqual(yu(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=Dr(r.timestampValue),a=Dr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return ps(r.bytesValue).isEqual(ps(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Ze(r.geoPointValue.latitude)===Ze(s.geoPointValue.latitude)&&Ze(r.geoPointValue.longitude)===Ze(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ze(r.integerValue)===Ze(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Ze(r.doubleValue),a=Ze(s.doubleValue);return o===a?mu(o)===mu(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return ac(n.arrayValue.values||[],e.arrayValue.values||[],Ai);case 10:case 11:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(F1(o)!==F1(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Ai(o[c],a[c])))return!1;return!0}(n,e);default:return te()}}function vu(n,e){return(n.values||[]).find(t=>Ai(t,e))!==void 0}function cc(n,e){if(n===e)return 0;let t=Do(n),i=Do(e);if(t!==i)return Me(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ze(s.integerValue||s.doubleValue),c=Ze(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return L1(n.timestampValue,e.timestampValue);case 4:return L1(yu(n),yu(e));case 5:return Me(n.stringValue,e.stringValue);case 6:return function(s,o){let a=ps(s),c=ps(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=Me(a[l],c[l]);if(d!==0)return d}return Me(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Me(Ze(s.latitude),Ze(o.latitude));return a!==0?a:Me(Ze(s.longitude),Ze(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return V1(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let h=s.fields||{},p=o.fields||{},g=(a=h.value)===null||a===void 0?void 0:a.arrayValue,y=(c=p.value)===null||c===void 0?void 0:c.arrayValue,v=Me(((l=g?.values)===null||l===void 0?void 0:l.length)||0,((d=y?.values)===null||d===void 0?void 0:d.length)||0);return v!==0?v:V1(g,y)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===bp.mapValue&&o===bp.mapValue)return 0;if(s===bp.mapValue)return 1;if(o===bp.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){let p=Me(c[h],d[h]);if(p!==0)return p;let g=cc(a[c[h]],l[d[h]]);if(g!==0)return g}return Me(c.length,d.length)}(n.mapValue,e.mapValue);default:throw te()}}function L1(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Me(n,e);let t=Dr(n),i=Dr(e),r=Me(t.seconds,i.seconds);return r!==0?r:Me(t.nanos,i.nanos)}function V1(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=cc(t[r],i[r]);if(s)return s}return Me(t.length,i.length)}function lc(n){return Pb(n)}function Pb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=Dr(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ps(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=Pb(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${Pb(t.fields[o])}`;return r+"}"}(n.mapValue):te()}function j1(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Rb(n){return!!n&&"integerValue"in n}function tI(n){return!!n&&"arrayValue"in n}function B1(n){return!!n&&"nullValue"in n}function U1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ip(n){return!!n&&"mapValue"in n}function vP(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function hu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Po(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=hu(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _P(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var In=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ip(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(t)}setAll(e){let t=En.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=hu(o):r.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());Ip(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ai(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Ip(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Po(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(hu(this.value))}};function bP(n){let e=[];return Po(n.fields,(t,i)=>{let r=new En([t]);if(Ip(i)){let s=bP(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new Vn(e)}var ai=class n{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ce.min(),ce.min(),ce.min(),In.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,ce.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,ce.min(),ce.min(),In.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ce.min(),ce.min(),In.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var uc=class{constructor(e,t){this.position=e,this.inclusive=t}};function $1(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=Z.comparator(Z.fromName(o.referenceValue),t.key):i=cc(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function z1(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ai(n.position[t],e.position[t]))return!1;return!0}var dc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function qH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ap=class{},_t=class n extends Ap{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Nb(e,t,i):t==="array-contains"?new Lb(e,i):t==="in"?new Vb(e,i):t==="not-in"?new jb(e,i):t==="array-contains-any"?new Bb(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new kb(e,i):new Fb(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(cc(t,this.value)):t!==null&&Do(this.value)===Do(t)&&this.matchesComparison(cc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ci=class n extends Ap{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return wP(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function wP(n){return n.op==="and"}function IP(n){return WH(n)&&wP(n)}function WH(n){for(let e of n.filters)if(e instanceof ci)return!1;return!0}function Ob(n){if(n instanceof _t)return n.field.canonicalString()+n.op.toString()+lc(n.value);if(IP(n))return n.filters.map(e=>Ob(e)).join(",");{let e=n.filters.map(t=>Ob(t)).join(",");return`${n.op}(${e})`}}function EP(n,e){return n instanceof _t?function(i,r){return r instanceof _t&&i.op===r.op&&i.field.isEqual(r.field)&&Ai(i.value,r.value)}(n,e):n instanceof ci?function(i,r){return r instanceof ci&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&EP(o,r.filters[a]),!0):!1}(n,e):void te()}function CP(n){return n instanceof _t?function(t){return`${t.field.canonicalString()} ${t.op} ${lc(t.value)}`}(n):n instanceof ci?function(t){return t.op.toString()+" {"+t.getFilters().map(CP).join(" ,")+"}"}(n):"Filter"}var Nb=class extends _t{constructor(e,t,i){super(e,t,i),this.key=Z.fromName(i.referenceValue)}matches(e){let t=Z.comparator(e.key,this.key);return this.matchesComparison(t)}},kb=class extends _t{constructor(e,t){super(e,"in",t),this.keys=DP("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Fb=class extends _t{constructor(e,t){super(e,"not-in",t),this.keys=DP("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function DP(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Z.fromName(i.referenceValue))}var Lb=class extends _t{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return tI(t)&&vu(t.arrayValue,this.value)}},Vb=class extends _t{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&vu(this.value.arrayValue,t)}},jb=class extends _t{constructor(e,t){super(e,"not-in",t)}matches(e){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!vu(this.value.arrayValue,t)}},Bb=class extends _t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!tI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>vu(this.value.arrayValue,i))}};var Ub=class{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function H1(n,e=null,t=[],i=[],r=null,s=null,o=null){return new Ub(n,e,t,i,r,s,o)}function nI(n){let e=re(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Ob(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),ig(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>lc(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>lc(i)).join(",")),e.ue=t}return e.ue}function iI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!qH(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!EP(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!z1(n.startAt,e.startAt)&&z1(n.endAt,e.endAt)}function $b(n){return Z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var So=class{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function GH(n,e,t,i,r,s,o,a){return new So(n,e,t,i,r,s,o,a)}function rg(n){return new So(n)}function q1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function SP(n){return n.collectionGroup!==null}function fu(n){let e=re(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new qt(En.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new dc(s,i))}),t.has(En.keyField().canonicalString())||e.ce.push(new dc(En.keyField(),i))}return e.ce}function Ti(n){let e=re(n);return e.le||(e.le=KH(e,fu(n))),e.le}function KH(n,e){if(n.limitType==="F")return H1(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new dc(r.field,s)});let t=n.endAt?new uc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new uc(n.startAt.position,n.startAt.inclusive):null;return H1(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function zb(n,e){let t=n.filters.concat([e]);return new So(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Hb(n,e,t){return new So(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sg(n,e){return iI(Ti(n),Ti(e))&&n.limitType===e.limitType}function xP(n){return`${nI(Ti(n))}|lt:${n.limitType}`}function ec(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>CP(r)).join(", ")}]`),ig(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>lc(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>lc(r)).join(",")),`Target(${i})`}(Ti(n))}; limitType=${n.limitType})`}function og(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Z.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of fu(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,a,c){let l=$1(o,a,c);return o.inclusive?l<=0:l<0}(i.startAt,fu(i),r)||i.endAt&&!function(o,a,c){let l=$1(o,a,c);return o.inclusive?l>=0:l>0}(i.endAt,fu(i),r))}(n,e)}function QH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function TP(n){return(e,t)=>{let i=!1;for(let r of fu(n)){let s=YH(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function YH(n,e,t){let i=n.field.isKeyField()?Z.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?cc(c,l):te()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return te()}}var gs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Po(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return yP(this.inner)}size(){return this.innerSize}};var ZH=new at(Z.comparator);function Sr(){return ZH}var MP=new at(Z.comparator);function du(...n){let e=MP;for(let t of n)e=e.insert(t.key,t);return e}function AP(n){let e=MP;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function bo(){return pu()}function PP(){return pu()}function pu(){return new gs(n=>n.toString(),(n,e)=>n.isEqual(e))}var JH=new at(Z.comparator),XH=new qt(Z.comparator);function _e(...n){let e=XH;for(let t of n)e=e.add(t);return e}var e9=new qt(Me);function t9(){return e9}function rI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mu(e)?"-0":e}}function RP(n){return{integerValue:""+n}}function n9(n,e){return jH(e)?RP(e):rI(n,e)}var hc=class{constructor(){this._=void 0}};function i9(n,e,t){return n instanceof fc?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Xw(s)&&(s=eI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof xo?NP(n,e):n instanceof To?kP(n,e):function(r,s){let o=OP(r,s),a=W1(o)+W1(r.Pe);return Rb(o)&&Rb(r.Pe)?RP(a):rI(r.serializer,a)}(n,e)}function r9(n,e,t){return n instanceof xo?NP(n,e):n instanceof To?kP(n,e):t}function OP(n,e){return n instanceof pc?function(i){return Rb(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var fc=class extends hc{},xo=class extends hc{constructor(e){super(),this.elements=e}};function NP(n,e){let t=FP(e);for(let i of n.elements)t.some(r=>Ai(r,i))||t.push(i);return{arrayValue:{values:t}}}var To=class extends hc{constructor(e){super(),this.elements=e}};function kP(n,e){let t=FP(e);for(let i of n.elements)t=t.filter(r=>!Ai(r,i));return{arrayValue:{values:t}}}var pc=class extends hc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function W1(n){return Ze(n.integerValue||n.doubleValue)}function FP(n){return tI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function s9(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof xo&&r instanceof xo||i instanceof To&&r instanceof To?ac(i.elements,r.elements,Ai):i instanceof pc&&r instanceof pc?Ai(i.Pe,r.Pe):i instanceof fc&&r instanceof fc}(n.transform,e.transform)}var qb=class{constructor(e,t){this.version=e,this.transformResults=t}},Er=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ep(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var gc=class{};function LP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Pp(n.key,Er.none()):new Mo(n.key,n.data,Er.none());{let t=n.data,i=In.empty(),r=new qt(En.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Pi(n.key,i,new Vn(r.toArray()),Er.none())}}function o9(n,e,t){n instanceof Mo?function(r,s,o){let a=r.value.clone(),c=K1(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Pi?function(r,s,o){if(!Ep(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=K1(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(VP(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function gu(n,e,t,i){return n instanceof Mo?function(s,o,a,c){if(!Ep(s.precondition,o))return a;let l=s.value.clone(),d=Q1(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,i):n instanceof Pi?function(s,o,a,c){if(!Ep(s.precondition,o))return a;let l=Q1(s.fieldTransforms,c,o),d=o.data;return d.setAll(VP(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,i):function(s,o,a){return Ep(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function a9(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=OP(i.transform,r||null);s!=null&&(t===null&&(t=In.empty()),t.set(i.field,s))}return t||null}function G1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ac(i,r,(s,o)=>s9(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Mo=class extends gc{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Pi=class extends gc{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function VP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function K1(n,e,t){let i=new Map;Ne(n.length===t.length);for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,r9(o,a,t[r]))}return i}function Q1(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,i9(s,o,e))}return i}var Pp=class extends gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Wb=class extends gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Gb=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&o9(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=gu(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=gu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=PP();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;let c=LP(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ce.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_e())}isEqual(e){return this.batchId===e.batchId&&ac(this.mutations,e.mutations,(t,i)=>G1(t,i))&&ac(this.baseMutations,e.baseMutations,(t,i)=>G1(t,i))}},Kb=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Ne(e.mutations.length===i.length);let r=function(){return JH}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(e,t,i,r)}};var Qb=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Yb=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var yt,Ee;function c9(n){switch(n){default:return te();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function jP(n){if(n===void 0)return Cr("GRPC error has no .code"),B.UNKNOWN;switch(n){case yt.OK:return B.OK;case yt.CANCELLED:return B.CANCELLED;case yt.UNKNOWN:return B.UNKNOWN;case yt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case yt.INTERNAL:return B.INTERNAL;case yt.UNAVAILABLE:return B.UNAVAILABLE;case yt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case yt.NOT_FOUND:return B.NOT_FOUND;case yt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case yt.ABORTED:return B.ABORTED;case yt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case yt.DATA_LOSS:return B.DATA_LOSS;default:return te()}}(Ee=yt||(yt={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var Y1=null;function l9(){return new TextEncoder}var u9=new hs([4294967295,4294967295],0);function Z1(n){let e=l9().encode(n),t=new db;return t.update(e),new Uint8Array(t.digest())}function J1(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new hs([t,i],0),new hs([r,s],0)]}var Zb=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new wo(`Invalid padding: ${t}`);if(i<0)throw new wo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new wo(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new wo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=hs.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(hs.fromNumber(i)));return r.compare(u9)===1&&(r=new hs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Z1(e),[i,r]=J1(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=Z1(e),[i,r]=J1(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},wo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Rp=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,_u.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(ce.min(),r,new at(Me),Sr(),_e())}},_u=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,_e(),_e(),_e())}};var rc=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},Op=class{constructor(e,t){this.targetId=e,this.me=t}},Np=class{constructor(e,t,i=Gt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},kp=class{constructor(){this.fe=0,this.ge=eP(),this.pe=Gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=_e(),t=_e(),i=_e();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:te()}}),new _u(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=eP()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ne(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Jb=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Sr(),this.qe=X1(),this.Qe=new at(Me)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let s=r.target;if($b(s))if(i===0){let o=new Z(s.path);this.Ue(t,o,ai.newNoDocument(o,ce.min()))}else Ne(i===1);else{let o=this.Ye(t);if(o!==i){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}Y1?.et(function(d,h,p,g,y){var v,_,T,P,N,j;let L={localCacheCount:d,existenceFilterCount:h.count,databaseId:p.database,projectId:p.projectId},k=h.unchangedNames;return k&&(L.bloomFilter={applied:y===0,hashCount:(v=k?.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(P=(T=(_=k?.bits)===null||_===void 0?void 0:_.bitmap)===null||T===void 0?void 0:T.length)!==null&&P!==void 0?P:0,padding:(j=(N=k?.bits)===null||N===void 0?void 0:N.padding)!==null&&j!==void 0?j:0,mightContain:C=>{var w;return(w=g?.mightContain(C))!==null&&w!==void 0&&w}}),L}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,a;try{o=ps(i).toUint8Array()}catch(c){if(c instanceof Tp)return oc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Zb(o,r,s)}catch(c){return oc(c instanceof wo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&$b(a.target)){let c=new Z(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,ai.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let i=_e();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new Rp(e,t,this.Qe,this.ke,i);return this.ke=Sr(),this.qe=X1(),this.Qe=new at(Me),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new kp,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new qt(Me),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||K("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new kp),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function X1(){return new at(Z.comparator)}function eP(){return new at(Z.comparator)}var d9={asc:"ASCENDING",desc:"DESCENDING"},h9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f9={and:"AND",or:"OR"},Xb=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function ew(n,e){return n.useProto3Json||ig(e)?e:{value:e}}function Fp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function p9(n,e){return Fp(n,e.toTimestamp())}function Mi(n){return Ne(!!n),ce.fromTimestamp(function(t){let i=Dr(t);return new ot(i.seconds,i.nanos)}(n))}function sI(n,e){return tw(n,e).canonicalString()}function tw(n,e){let t=function(r){return new tt(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function UP(n){let e=tt.fromString(n);return Ne(WP(e)),e}function nw(n,e){return sI(n.databaseId,e.path)}function yb(n,e){let t=UP(e);if(t.get(1)!==n.databaseId.projectId)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Z(zP(t))}function $P(n,e){return sI(n.databaseId,e)}function g9(n){let e=UP(n);return e.length===4?tt.emptyPath():zP(e)}function iw(n){return new tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zP(n){return Ne(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function tP(n,e,t){return{name:nw(n,e),fields:t.value.mapValue.fields}}function m9(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(Ne(d===void 0||typeof d=="string"),Gt.fromBase64String(d||"")):(Ne(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Gt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?B.UNKNOWN:jP(l.code);return new G(d,l.message||"")}(o);t=new Np(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=yb(n,i.document.name),s=Mi(i.document.updateTime),o=i.document.createTime?Mi(i.document.createTime):ce.min(),a=new In({mapValue:{fields:i.document.fields}}),c=ai.newFoundDocument(r,s,o,a),l=i.targetIds||[],d=i.removedTargetIds||[];t=new rc(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=yb(n,i.document),s=i.readTime?Mi(i.readTime):ce.min(),o=ai.newNoDocument(r,s),a=i.removedTargetIds||[];t=new rc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=yb(n,i.document),s=i.removedTargetIds||[];t=new rc([],s,r,null)}else{if(!("filter"in e))return te();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new Yb(r,s),a=i.targetId;t=new Op(a,o)}}return t}function y9(n,e){let t;if(e instanceof Mo)t={update:tP(n,e.key,e.value)};else if(e instanceof Pp)t={delete:nw(n,e.key)};else if(e instanceof Pi)t={update:tP(n,e.key,e.data),updateMask:S9(e.fieldMask)};else{if(!(e instanceof Wb))return te();t={verify:nw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let a=o.transform;if(a instanceof fc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof To)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof pc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw te()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:p9(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te()}(n,e.precondition)),t}function v9(n,e){return n&&n.length>0?(Ne(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?Mi(r.updateTime):Mi(s);return o.isEqual(ce.min())&&(o=Mi(s)),new qb(o,r.transformResults||[])}(t,e))):[]}function _9(n,e){return{documents:[$P(n,e.path)]}}function b9(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=$P(n,r);let s=function(l){if(l.length!==0)return qP(ci.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(p){return{field:tc(p.field),direction:E9(p.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=ew(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:r}}function w9(n){let e=g9(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){Ne(i===1);let d=t.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(h){let p=HP(h);return p instanceof ci&&IP(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(p=>function(y){return new dc(nc(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,ig(p)?null:p}(t.limit));let c=null;t.startAt&&(c=function(h){let p=!!h.before,g=h.values||[];return new uc(g,p)}(t.startAt));let l=null;return t.endAt&&(l=function(h){let p=!h.before,g=h.values||[];return new uc(g,p)}(t.endAt)),GH(e,r,o,s,a,"F",c,l)}function I9(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=nc(t.unaryFilter.field);return _t.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=nc(t.unaryFilter.field);return _t.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=nc(t.unaryFilter.field);return _t.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=nc(t.unaryFilter.field);return _t.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(n):n.fieldFilter!==void 0?function(t){return _t.create(nc(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ci.create(t.compositeFilter.filters.map(i=>HP(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return te()}}(t.compositeFilter.op))}(n):te()}function E9(n){return d9[n]}function C9(n){return h9[n]}function D9(n){return f9[n]}function tc(n){return{fieldPath:n.canonicalString()}}function nc(n){return En.fromServerFormat(n.fieldPath)}function qP(n){return n instanceof _t?function(t){if(t.op==="=="){if(U1(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NAN"}};if(B1(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(U1(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NOT_NAN"}};if(B1(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tc(t.field),op:C9(t.op),value:t.value}}}(n):n instanceof ci?function(t){let i=t.getFilters().map(r=>qP(r));return i.length===1?i[0]:{compositeFilter:{op:D9(t.op),filters:i}}}(n):te()}function S9(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function WP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var bu=class n{constructor(e,t,i,r,s=ce.min(),o=ce.min(),a=Gt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var rw=class{constructor(e){this.ct=e}};function x9(n){let e=w9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Hb(e,e.limit,"L"):e}var Lp=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ze(e.integerValue));else if("doubleValue"in e){let i=Ze(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),mu(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=Dr(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ps(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?_P(e)?this.dt(t,Number.MAX_SAFE_INTEGER):vP(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):te()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;let s=e.fields||{};this.dt(t,53);let o="value",a=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(Ze(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),Z.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Lp.vt=new Lp;var sw=class{constructor(){this.un=new ow}addToCollectionParentIndex(e,t){return this.un.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(Co.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(Co.min())}updateCollectionGroup(e,t,i){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}},ow=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new qt(tt.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new qt(tt.comparator)).toArray()}};var Jie=new Uint8Array(0);var Si=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Si.DEFAULT_COLLECTION_PERCENTILE=10,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Si.DEFAULT=new Si(41943040,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Si.DISABLED=new Si(-1,0,0);var wu=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var aw=class{constructor(){this.changes=new gs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ai.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?U.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var cw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var lw=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&gu(i.mutation,r,Vn.empty(),ot.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,_e()).next(()=>i))}getLocalViewOfDocuments(e,t,i=_e()){let r=bo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=du();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=bo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,_e()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=Sr(),o=pu(),a=function(){return pu()}();return t.forEach((c,l)=>{let d=i.get(l.key);r.has(l.key)&&(d===void 0||d.mutation instanceof Pi)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),gu(d.mutation,l,d.mutation.getFieldMask(),ot.now())):o.set(l.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),t.forEach((l,d)=>{var h;return a.set(l,new cw(d,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let i=pu(),r=new at((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=i.get(c)||Vn.empty();d=a.applyToLocalView(l,d),i.set(c,d);let h=(r.get(a.batchId)||_e()).add(c);r=r.insert(a.batchId,h)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,h=PP();d.forEach(p=>{if(!s.has(p)){let g=LP(t.get(p),i.get(p));g!==null&&h.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return U.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):SP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):U.resolve(bo()),a=-1,c=s;return o.next(l=>U.forEach(l,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,_e())).next(d=>({batchId:a,changes:AP(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Z(t)).next(i=>{let r=du();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=du();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,c=>{let l=function(h,p){return new So(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,ai.newInvalidDocument(d)))});let a=du();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&gu(d.mutation,l,Vn.empty(),ot.now()),og(t,l)&&(a=a.insert(c,l))}),a})}};var uw=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return U.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Mi(r.createTime)}}(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:x9(r.bundledQuery),readTime:Mi(r.readTime)}}(t)),U.resolve()}};var dw=class{constructor(){this.overlays=new at(Z.comparator),this.Ir=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){let i=bo();return U.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),U.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),U.resolve()}getOverlaysForCollection(e,t,i){let r=bo(),s=t.length+1,o=new Z(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return U.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new at((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>i){let d=s.get(l.largestBatchId);d===null&&(d=bo(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=bo(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=r)););return U.resolve(a)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Qb(t,i));let s=this.Ir.get(t);s===void 0&&(s=_e(),this.Ir.set(t,s)),this.Ir.set(t,s.add(i.key))}};var hw=class{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}};var Iu=class{constructor(){this.Tr=new qt(vt.Er),this.dr=new qt(vt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let i=new vt(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new vt(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){let t=new Z(new tt([])),i=new vt(t,e),r=new vt(t,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new Z(new tt([])),i=new vt(t,e),r=new vt(t,e+1),s=_e();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new vt(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},vt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Z.comparator(e.key,t.key)||Me(e.wr,t.wr)}static Ar(e,t){return Me(e.wr,t.wr)||Z.comparator(e.key,t.key)}};var fw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new qt(vt.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Gb(s,t,i,r);this.mutationQueue.push(o);for(let a of r)this.br=this.br.add(new vt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,t){return U.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.vr(i),s=r<0?0:r;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new vt(t,0),r=new vt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{let a=this.Dr(o.wr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new qt(Me);return t.forEach(r=>{let s=new vt(r,0),o=new vt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),U.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;Z.isDocumentKey(s)||(s=s.child(""));let o=new vt(new Z(s),0),a=new qt(Me);return this.br.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Ne(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return U.forEach(t.mutations,r=>{let s=new vt(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){let i=new vt(t,0),r=this.br.firstAfterOrEqual(i);return U.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var pw=class{constructor(e){this.Mr=e,this.docs=function(){return new at(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return U.resolve(i?i.document.mutableCopy():ai.newInvalidDocument(t))}getEntries(e,t){let i=Sr();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ai.newInvalidDocument(r))}),U.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Sr(),o=t.path,a=new Z(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||FH(kH(d),i)<=0||(r.has(d.key)||og(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,t,i,r){te()}Or(e,t){return U.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new gw(this)}getSize(e){return U.resolve(this.size)}},gw=class extends aw{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),U.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var mw=class{constructor(e){this.persistence=e,this.Nr=new gs(t=>nI(t),iI),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Iu,this.targetCount=0,this.kr=wu.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),U.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new wu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.Kn(t),U.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),U.waitFor(s).next(()=>r)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){let i=this.Nr.get(t)||null;return U.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),U.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),U.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Br.yr(t);return U.resolve(i)}containsKey(e,t){return U.resolve(this.Br.containsKey(t))}};var yw=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new mP(0),this.Kr=!1,this.Kr=!0,this.$r=new hw,this.referenceDelegate=e(this),this.Ur=new mw(this),this.indexManager=new sw,this.remoteDocumentCache=function(r){return new pw(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new rw(t),this.Gr=new uw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new fw(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){K("MemoryPersistence","Starting transaction:",e);let r=new vw(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,t){return U.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}},vw=class extends Mb{constructor(e){super(),this.currentSequenceNumber=e}},_w=class n{constructor(e){this.persistence=e,this.Jr=new Iu,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),U.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),U.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,i=>{let r=Z.fromPath(i);return this.ei(e,r).next(s=>{s||t.removeEntry(r,ce.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return U.or([()=>U.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var bw=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=_e(),r=_e();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var ww=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Iw=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hA()?8:VH(Rt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new ww;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(uu()<=ve.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",ec(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(uu()<=ve.DEBUG&&K("QueryEngine","Query:",ec(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(uu()<=ve.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",ec(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ti(t))):U.resolve())}Yi(e,t){if(q1(t))return U.resolve(null);let i=Ti(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Hb(t,null,"F"),i=Ti(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=_e(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,Hb(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,i,r){return q1(t)||r.isEqual(ce.min())?U.resolve(null):this.Ji.getDocuments(e,i).next(s=>{let o=this.ts(t,s);return this.ns(t,o,i,r)?U.resolve(null):(uu()<=ve.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ec(t)),this.rs(e,o,t,NH(r,-1)).next(a=>a))})}ts(e,t){let i=new qt(TP(e));return t.forEach((r,s)=>{og(e,s)&&(i=i.add(s))}),i}ns(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,i){return uu()<=ve.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",ec(t)),this.Ji.getDocumentsMatchingQuery(e,t,Co.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Ew=class{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new at(Me),this._s=new gs(s=>nI(s),iI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lw(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function T9(n,e,t,i){return new Ew(n,e,t,i)}function GP(n,e){return E(this,null,function*(){let t=re(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=_e();for(let l of r){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(i,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function M9(n,e){let t=re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let h=l.batch,p=h.keys(),g=U.resolve();return p.forEach(y=>{g=g.next(()=>d.getEntry(c,y)).next(v=>{let _=l.docVersions.get(y);Ne(_!==null),v.version.compareTo(_)<0&&(h.applyToRemoteDocument(v,l),v.isValidDocument()&&(v.setReadTime(l.commitVersion),d.addEntry(v)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=_e();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function KP(n){let e=re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function A9(n,e){let t=re(n),i=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let a=[];e.targetChanges.forEach((d,h)=>{let p=r.get(h);if(!p)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,h)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Gt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,i)),r=r.insert(h,g),function(v,_,T){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,g,d)&&a.push(t.Ur.updateTargetData(s,g))});let c=Sr(),l=_e();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(P9(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!i.isEqual(ce.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(h=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(d)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=r,s))}function P9(n,e,t){let i=_e(),r=_e();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Sr();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(ce.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):K("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:r}})}function R9(n,e){let t=re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function O9(n,e){let t=re(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(s=>s?(r=s,U.resolve(r)):t.Ur.allocateTargetId(i).next(o=>(r=new bu(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function Cw(n,e,t){return E(this,null,function*(){let i=re(n),r=i.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Ru(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function nP(n,e,t){let i=re(n),r=ce.min(),s=_e();return i.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let h=re(c),p=h._s.get(d);return p!==void 0?U.resolve(h.os.get(p)):h.Ur.getTargetData(l,d)}(i,o,Ti(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,t?r:ce.min(),t?s:_e())).next(a=>(N9(i,QH(e),a),{documents:a,Ts:s})))}function N9(n,e,t){let i=n.us.get(e)||ce.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.us.set(e,i)}var Vp=class{constructor(){this.activeTargetIds=t9()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Dw=class{constructor(){this.so=new Vp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Vp,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Sw=class{_o(e){}shutdown(){}};var jp=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var wp=null;function vb(){return wp===null?wp=function(){return 268435456+Math.round(2147483648*Math.random())}():wp++,"0x"+wp.toString(16)}var k9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var xw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Ht="WebChannelConnection",Tw=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(t,i,r,s,o){let a=vb(),c=this.xo(t,i.toUriEncodedString());K("RestConnection",`Sending RPC '${t}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,r).then(d=>(K("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw oc("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",r),d})}Lo(t,i,r,s,o,a){return this.Mo(t,i,r,s,o)}Oo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_c}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}xo(t,i){let r=k9[t];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){let s=vb();return new Promise((o,a)=>{let c=new hb;c.setWithCredentials(!0),c.listenOnce(fb.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case lu.NO_ERROR:let d=c.getResponseJson();K(Ht,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case lu.TIMEOUT:K(Ht,`RPC '${e}' ${s} timed out`),a(new G(B.DEADLINE_EXCEEDED,"Request time out"));break;case lu.HTTP_ERROR:let h=c.getStatus();if(K(Ht,`RPC '${e}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);let g=p?.error;if(g&&g.status&&g.message){let y=function(_){let T=_.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(T)>=0?T:B.UNKNOWN}(g.status);a(new G(y,g.message))}else a(new G(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new G(B.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{K(Ht,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(r);K(Ht,`RPC '${e}' ${s} sending request:`,r),c.send(t,"POST",l,i,15)})}Bo(e,t,i){let r=vb(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mb(),a=gb(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;let d=s.join("");K(Ht,`Creating RPC '${e}' stream ${r}: ${d}`,c);let h=o.createWebChannel(d,c),p=!1,g=!1,y=new xw({Io:_=>{g?K(Ht,`Not sending because RPC '${e}' stream ${r} is closed:`,_):(p||(K(Ht,`Opening RPC '${e}' stream ${r} transport.`),h.open(),p=!0),K(Ht,`RPC '${e}' stream ${r} sending:`,_),h.send(_))},To:()=>h.close()}),v=(_,T,P)=>{_.listen(T,N=>{try{P(N)}catch(j){setTimeout(()=>{throw j},0)}})};return v(h,Xa.EventType.OPEN,()=>{g||(K(Ht,`RPC '${e}' stream ${r} transport opened.`),y.yo())}),v(h,Xa.EventType.CLOSE,()=>{g||(g=!0,K(Ht,`RPC '${e}' stream ${r} transport closed`),y.So())}),v(h,Xa.EventType.ERROR,_=>{g||(g=!0,oc(Ht,`RPC '${e}' stream ${r} transport errored:`,_),y.So(new G(B.UNAVAILABLE,"The operation could not be completed")))}),v(h,Xa.EventType.MESSAGE,_=>{var T;if(!g){let P=_.data[0];Ne(!!P);let N=P,j=N.error||((T=N[0])===null||T===void 0?void 0:T.error);if(j){K(Ht,`RPC '${e}' stream ${r} received error:`,j);let L=j.status,k=function(I){let S=yt[I];if(S!==void 0)return jP(S)}(L),C=j.message;k===void 0&&(k=B.INTERNAL,C="Unknown error status: "+L+" with message "+j.message),g=!0,y.So(new G(k,C)),h.close()}else K(Ht,`RPC '${e}' stream ${r} received:`,P),y.bo(P)}}),v(a,pb.STAT_EVENT,_=>{_.stat===_p.PROXY?K(Ht,`RPC '${e}' stream ${r} detected buffering proxy`):_.stat===_p.NOPROXY&&K(Ht,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}};function _b(){return typeof document<"u"?document:null}function ag(n){return new Xb(n,!0)}var Bp=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&K("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Up=class{constructor(e,t,i,r,s,o,a,c){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Bp(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return E(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return E(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return E(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===B.RESOURCE_EXHAUSTED?(Cr(t.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{let r=new G(B.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){let i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>E(this,null,function*(){this.state=0,this.start()}))}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Mw=class extends Up{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=m9(this.serializer,e),i=function(s){if(!("targetChange"in s))return ce.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?Mi(o.readTime):ce.min()}(e);return this.listener.d_(t,i)}A_(e){let t={};t.database=iw(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=$b(c)?{documents:_9(s,c)}:{query:b9(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=BP(s,o.resumeToken);let l=ew(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=Fp(s,o.snapshotVersion.toTimestamp());let l=ew(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let i=I9(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){let t={};t.database=iw(this.serializer),t.removeTarget=e,this.a_(t)}},Aw=class extends Up{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=v9(e.writeResults,e.commitTime),i=Mi(e.commitTime);return this.listener.g_(i,t)}p_(){let e={};e.database=iw(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>y9(this.serializer,i))};this.a_(t)}};var Pw=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,tw(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(B.UNKNOWN,s.toString())})}Lo(e,t,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,tw(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Rw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Cr(t),this.D_=!1):K("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Ow=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(()=>E(this,null,function*(){Ro(this)&&(K("RemoteStore","Restarting streams for network reachability change."),yield function(c){return E(this,null,function*(){let l=re(c);l.L_.add(4),yield Ou(l),l.q_.set("Unknown"),l.L_.delete(4),yield cg(l)})}(this))}))}),this.q_=new Rw(i,r)}};function cg(n){return E(this,null,function*(){if(Ro(n))for(let e of n.B_)yield e(!0)})}function Ou(n){return E(this,null,function*(){for(let e of n.B_)yield e(!1)})}function QP(n,e){let t=re(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),lI(t)?cI(t):bc(t).r_()&&aI(t,e))}function oI(n,e){let t=re(n),i=bc(t);t.N_.delete(e),i.r_()&&YP(t,e),t.N_.size===0&&(i.r_()?i.o_():Ro(t)&&t.q_.set("Unknown"))}function aI(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bc(n).A_(e)}function YP(n,e){n.Q_.xe(e),bc(n).R_(e)}function cI(n){n.Q_=new Jb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),bc(n).start(),n.q_.v_()}function lI(n){return Ro(n)&&!bc(n).n_()&&n.N_.size>0}function Ro(n){return re(n).L_.size===0}function ZP(n){n.Q_=void 0}function F9(n){return E(this,null,function*(){n.q_.set("Online")})}function L9(n){return E(this,null,function*(){n.N_.forEach((e,t)=>{aI(n,e)})})}function V9(n,e){return E(this,null,function*(){ZP(n),lI(n)?(n.q_.M_(e),cI(n)):n.q_.set("Unknown")})}function j9(n,e,t){return E(this,null,function*(){if(n.q_.set("Online"),e instanceof Np&&e.state===2&&e.cause)try{yield function(r,s){return E(this,null,function*(){let o=s.cause;for(let a of s.targetIds)r.N_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))})}(n,e)}catch(i){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield $p(n,i)}else if(e instanceof rc?n.Q_.Ke(e):e instanceof Op?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ce.min()))try{let i=yield KP(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(Gt.EMPTY_BYTE_STRING,d.snapshotVersion)),YP(s,c);let h=new bu(d.target,c,l,d.sequenceNumber);aI(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(i){K("RemoteStore","Failed to raise snapshot:",i),yield $p(n,i)}})}function $p(n,e,t){return E(this,null,function*(){if(!Ru(e))throw e;n.L_.add(1),yield Ou(n),n.q_.set("Offline"),t||(t=()=>KP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(this,null,function*(){K("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield cg(n)}))})}function JP(n,e){return e().catch(t=>$p(n,t,e))}function lg(n){return E(this,null,function*(){let e=re(n),t=ms(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;B9(e);)try{let r=yield R9(e.localStore,i);if(r===null){e.O_.length===0&&t.o_();break}i=r.batchId,U9(e,r)}catch(r){yield $p(e,r)}XP(e)&&eR(e)})}function B9(n){return Ro(n)&&n.O_.length<10}function U9(n,e){n.O_.push(e);let t=ms(n);t.r_()&&t.V_&&t.m_(e.mutations)}function XP(n){return Ro(n)&&!ms(n).n_()&&n.O_.length>0}function eR(n){ms(n).start()}function $9(n){return E(this,null,function*(){ms(n).p_()})}function z9(n){return E(this,null,function*(){let e=ms(n);for(let t of n.O_)e.m_(t.mutations)})}function H9(n,e,t){return E(this,null,function*(){let i=n.O_.shift(),r=Kb.from(i,e,t);yield JP(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield lg(n)})}function q9(n,e){return E(this,null,function*(){e&&ms(n).V_&&(yield function(i,r){return E(this,null,function*(){if(function(o){return c9(o)&&o!==B.ABORTED}(r.code)){let s=i.O_.shift();ms(i).s_(),yield JP(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield lg(i)}})}(n,e)),XP(n)&&eR(n)})}function iP(n,e){return E(this,null,function*(){let t=re(n);t.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");let i=Ro(t);t.L_.add(3),yield Ou(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield cg(t)})}function W9(n,e){return E(this,null,function*(){let t=re(n);e?(t.L_.delete(2),yield cg(t)):e||(t.L_.add(2),yield Ou(t),t.q_.set("Unknown"))})}function bc(n){return n.K_||(n.K_=function(t,i,r){let s=re(t);return s.w_(),new Mw(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:F9.bind(null,n),Ro:L9.bind(null,n),mo:V9.bind(null,n),d_:j9.bind(null,n)}),n.B_.push(e=>E(this,null,function*(){e?(n.K_.s_(),lI(n)?cI(n):n.q_.set("Unknown")):(yield n.K_.stop(),ZP(n))}))),n.K_}function ms(n){return n.U_||(n.U_=function(t,i,r){let s=re(t);return s.w_(),new Aw(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$9.bind(null,n),mo:q9.bind(null,n),f_:z9.bind(null,n),g_:H9.bind(null,n)}),n.B_.push(e=>E(this,null,function*(){e?(n.U_.s_(),yield lg(n)):(yield n.U_.stop(),n.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Nw=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,a=new n(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function uI(n,e){if(Cr("AsyncQueue",`${e}: ${n}`),Ru(n))return new G(B.UNAVAILABLE,`${e}: ${n}`);throw n}var zp=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Z.comparator(t.key,i.key):(t,i)=>Z.comparator(t.key,i.key),this.keyedMap=du(),this.sortedSet=new at(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var Hp=class{constructor(){this.W_=new at(Z.comparator)}track(e){let t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}},mc=class n{constructor(e,t,i,r,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,zp.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var kw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Fw=class{constructor(){this.queries=rP(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){let r=re(t),s=r.queries;r.queries=rP(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(i)})})(this,new G(B.ABORTED,"Firestore shutting down"))}};function rP(){return new gs(n=>xP(n),sg)}function dI(n,e){return E(this,null,function*(){let t=re(n),i=3,r=e.query,s=t.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new kw,i=e.J_()?0:1);try{switch(i){case 0:s.z_=yield t.onListen(r,!0);break;case 1:s.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){let a=uI(o,`Initialization of query '${ec(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&fI(t)})}function hI(n,e){return E(this,null,function*(){let t=re(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function G9(n,e){let t=re(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&fI(t)}function K9(n,e,t){let i=re(n),r=i.queries.get(e);if(r)for(let s of r.j_)s.onError(t);i.queries.delete(e)}function fI(n){n.Y_.forEach(e=>{e.next()})}var Lw,sP;(sP=Lw||(Lw={})).ea="default",sP.Cache="cache";var Eu=class{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new mc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=mc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Lw.Cache}};var qp=class{constructor(e){this.key=e}},Wp=class{constructor(e){this.key=e}},Vw=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=_e(),this.mutatedKeys=_e(),this.Aa=TP(e),this.Ra=new zp(this.Aa)}get Va(){return this.Ta}ma(e,t){let i=t?t.fa:new Hp,r=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,h)=>{let p=r.get(d),g=og(this.query,h)?h:null,y=!!p&&this.mutatedKeys.has(p.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),_=!1;p&&g?p.data.isEqual(g.data)?y!==v&&(i.track({type:3,doc:g}),_=!0):this.ga(p,g)||(i.track({type:2,doc:g}),_=!0,(c&&this.Aa(g,c)>0||l&&this.Aa(g,l)<0)&&(a=!0)):!p&&g?(i.track({type:0,doc:g}),_=!0):p&&!g&&(i.track({type:1,doc:p}),_=!0,(c||l)&&(a=!0)),_&&(g?(o=o.add(g),s=v?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,h)=>function(g,y){let v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return v(g)-v(y)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(i),r=r!=null&&r;let a=t&&!r?this.ya():[],c=this.da.size===0&&this.current&&!r?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new mc(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Hp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=_e(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let t=[];return e.forEach(i=>{this.da.has(i)||t.push(new Wp(i))}),this.da.forEach(i=>{e.has(i)||t.push(new qp(i))}),t}ba(e){this.Ta=e.Ts,this.da=_e();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return mc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},jw=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},Bw=class{constructor(e){this.key=e,this.va=!1}},Uw=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new gs(a=>xP(a),sg),this.Ma=new Map,this.xa=new Set,this.Oa=new at(Z.comparator),this.Na=new Map,this.La=new Iu,this.Ba={},this.ka=new Map,this.qa=wu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Q9(n,e,t=!0){return E(this,null,function*(){let i=oR(n),r,s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=yield tR(i,e,t,!0),r})}function Y9(n,e){return E(this,null,function*(){let t=oR(n);yield tR(t,e,!0,!1)})}function tR(n,e,t,i){return E(this,null,function*(){let r=yield O9(n.localStore,Ti(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return i&&(a=yield Z9(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&QP(n.remoteStore,r),a})}function Z9(n,e,t,i,r){return E(this,null,function*(){n.Ka=(h,p,g)=>function(v,_,T,P){return E(this,null,function*(){let N=_.view.ma(T);N.ns&&(N=yield nP(v.localStore,_.query,!1).then(({documents:C})=>_.view.ma(C,N)));let j=P&&P.targetChanges.get(_.targetId),L=P&&P.targetMismatches.get(_.targetId)!=null,k=_.view.applyChanges(N,v.isPrimaryClient,j,L);return aP(v,_.targetId,k.wa),k.snapshot})}(n,h,p,g);let s=yield nP(n.localStore,e,!0),o=new Vw(e,s.Ts),a=o.ma(s.documents),c=_u.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),l=o.applyChanges(a,n.isPrimaryClient,c);aP(n,t,l.wa);let d=new jw(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function J9(n,e,t){return E(this,null,function*(){let i=re(n),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!sg(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Cw(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&oI(i.remoteStore,r.targetId),$w(i,r.targetId)}).catch(Pu))):($w(i,r.targetId),yield Cw(i.localStore,r.targetId,!0))})}function X9(n,e){return E(this,null,function*(){let t=re(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),oI(t.remoteStore,i.targetId))})}function e6(n,e,t){return E(this,null,function*(){let i=a6(n);try{let r=yield function(o,a){let c=re(o),l=ot.now(),d=a.reduce((g,y)=>g.add(y.key),_e()),h,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=Sr(),v=_e();return c.cs.getEntries(g,d).next(_=>{y=_,y.forEach((T,P)=>{P.isValidDocument()||(v=v.add(T))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,y)).next(_=>{h=_;let T=[];for(let P of a){let N=a9(P,h.get(P.key).overlayedDocument);N!=null&&T.push(new Pi(P.key,N,bP(N.value.mapValue),Er.exists(!0)))}return c.mutationQueue.addMutationBatch(g,l,T,a)}).next(_=>{p=_;let T=_.applyToLocalDocumentSet(h,v);return c.documentOverlayCache.saveOverlays(g,_.batchId,T)})}).then(()=>({batchId:p.batchId,changes:AP(h)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new at(Me)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(i,r.batchId,t),yield Nu(i,r.changes),yield lg(i.remoteStore)}catch(r){let s=uI(r,"Failed to persist write");t.reject(s)}})}function nR(n,e){return E(this,null,function*(){let t=re(n);try{let i=yield A9(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Na.get(s);o&&(Ne(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?Ne(o.va):r.removedDocuments.size>0&&(Ne(o.va),o.va=!1))}),yield Nu(t,i,e)}catch(i){yield Pu(i)}})}function oP(n,e,t){let i=re(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){let c=re(o);c.onlineState=a;let l=!1;c.queries.forEach((d,h)=>{for(let p of h.j_)p.Z_(a)&&(l=!0)}),l&&fI(c)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function t6(n,e,t){return E(this,null,function*(){let i=re(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Na.get(e),s=r&&r.key;if(s){let o=new at(Z.comparator);o=o.insert(s,ai.newNoDocument(s,ce.min()));let a=_e().add(s),c=new Rp(ce.min(),new Map,new at(Me),o,a);yield nR(i,c),i.Oa=i.Oa.remove(s),i.Na.delete(e),pI(i)}else yield Cw(i.localStore,e,!1).then(()=>$w(i,e,t)).catch(Pu)})}function n6(n,e){return E(this,null,function*(){let t=re(n),i=e.batch.batchId;try{let r=yield M9(t.localStore,e);rR(t,i,null),iR(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Nu(t,r)}catch(r){yield Pu(r)}})}function i6(n,e,t){return E(this,null,function*(){let i=re(n);try{let r=yield function(o,a){let c=re(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(Ne(h!==null),d=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(i.localStore,e);rR(i,e,t),iR(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Nu(i,r)}catch(r){yield Pu(r)}})}function iR(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function rR(n,e,t){let i=re(n),r=i.Ba[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function $w(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||sR(n,i)})}function sR(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(oI(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),pI(n))}function aP(n,e,t){for(let i of t)i instanceof qp?(n.La.addReference(i.key,e),r6(n,i)):i instanceof Wp?(K("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||sR(n,i.key)):te()}function r6(n,e){let t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(K("SyncEngine","New document in limbo: "+t),n.xa.add(i),pI(n))}function pI(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new Z(tt.fromString(e)),i=n.qa.next();n.Na.set(i,new Bw(t)),n.Oa=n.Oa.insert(t,i),QP(n.remoteStore,new bu(Ti(rg(t.path)),i,"TargetPurposeLimboResolution",mP.oe))}}function Nu(n,e,t){return E(this,null,function*(){let i=re(n),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,c)=>{o.push(i.Ka(c,e,t).then(l=>{var d;if((l||t)&&i.isPrimaryClient){let h=l?!l.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){r.push(l);let h=bw.Wi(c.targetId,l);s.push(h)}}))}),yield Promise.all(o),i.Ca.d_(r),yield function(c,l){return E(this,null,function*(){let d=re(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>U.forEach(l,p=>U.forEach(p.$i,g=>d.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>U.forEach(p.Ui,g=>d.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!Ru(h))throw h;K("LocalStore","Failed to update sequence numbers: "+h)}for(let h of l){let p=h.targetId;if(!h.fromCache){let g=d.os.get(p),y=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(y);d.os=d.os.insert(p,v)}}})}(i.localStore,s))})}function s6(n,e){return E(this,null,function*(){let t=re(n);if(!t.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());let i=yield GP(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new G(B.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Nu(t,i.hs)}})}function o6(n,e){let t=re(n),i=t.Na.get(e);if(i&&i.va)return _e().add(i.key);{let r=_e(),s=t.Ma.get(e);if(!s)return r;for(let o of s){let a=t.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function oR(n){let e=re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=t6.bind(null,e),e.Ca.d_=G9.bind(null,e.eventManager),e.Ca.$a=K9.bind(null,e.eventManager),e}function a6(n){let e=re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i6.bind(null,e),e}var cP=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=ag(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,i){return null}Ha(t,i){return null}za(t){return T9(this.persistence,new Iw,t.initialUser,this.serializer)}Ga(t){return new yw(_w.Zr,this.serializer)}Wa(t){return new Dw}terminate(){return E(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var c6=(()=>{class n{initialize(t,i){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>oP(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=s6.bind(null,this.syncEngine),yield W9(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Fw}()}createDatastore(t){let i=ag(t.databaseInfo.databaseId),r=function(o){return new Tw(o)}(t.databaseInfo);return function(o,a,c,l){return new Pw(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,s,o,a,c){return new Ow(r,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,i=>oP(this.syncEngine,i,0),function(){return jp.D()?new jp:new Sw}())}createSyncEngine(t,i){return function(s,o,a,c,l,d,h){let p=new Uw(s,o,a,c,l,d);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return E(this,null,function*(){var t,i;yield function(s){return E(this,null,function*(){let o=re(s);K("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Ou(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var Cu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Cr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var zw=class{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Ot.UNAUTHENTICATED,this.clientId=Dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,o=>E(this,null,function*(){K("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=uI(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function bb(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>E(this,null,function*(){i.isEqual(r)||(yield GP(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function lP(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield l6(n);K("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>iP(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>iP(e.remoteStore,r)),n._onlineComponents=e})}function l6(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{yield bb(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(r){return r.name==="FirebaseError"?r.code===B.FAILED_PRECONDITION||r.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;oc("Error using user provided cache. Falling back to memory cache: "+t),yield bb(n,new cP)}}else K("FirestoreClient","Using default OfflineComponentProvider"),yield bb(n,new cP);return n._offlineComponents})}function aR(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),yield lP(n,n._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),yield lP(n,new c6))),n._onlineComponents})}function u6(n){return aR(n).then(e=>e.syncEngine)}function Gp(n){return E(this,null,function*(){let e=yield aR(n),t=e.eventManager;return t.onListen=Q9.bind(null,e.syncEngine),t.onUnlisten=J9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Y9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=X9.bind(null,e.syncEngine),t})}function d6(n,e,t={}){let i=new oi;return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(s,o,a,c,l){let d=new Cu({next:p=>{d.Za(),o.enqueueAndForget(()=>hI(s,h));let g=p.docs.has(a);!g&&p.fromCache?l.reject(new G(B.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?l.reject(new G(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),h=new Eu(rg(a.path),d,{includeMetadataChanges:!0,_a:!0});return dI(s,h)}(yield Gp(n),n.asyncQueue,e,t,i)})),i.promise}function h6(n,e,t={}){let i=new oi;return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(s,o,a,c,l){let d=new Cu({next:p=>{d.Za(),o.enqueueAndForget(()=>hI(s,h)),p.fromCache&&c.source==="server"?l.reject(new G(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(p)},error:p=>l.reject(p)}),h=new Eu(a,d,{includeMetadataChanges:!0,_a:!0});return dI(s,h)}(yield Gp(n),n.asyncQueue,e,t,i)})),i.promise}function cR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var uP=new Map;function lR(n,e,t){if(!t)throw new G(B.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function f6(n,e,t,i){if(e===!0&&i===!0)throw new G(B.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dP(n){if(!Z.isDocumentKey(n))throw new G(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hP(n){if(Z.isDocumentKey(n))throw new G(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ug(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":te()}function Cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ug(n);throw new G(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Kp=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new G(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}f6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cR((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},yc=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kp(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new wb;switch(i.type){case"firstParty":return new Db(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new G(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=uP.get(t);i&&(K("ComponentProvider","Removing Datastore"),uP.delete(t),i.terminate())}(this),Promise.resolve()}};function uR(n,e,t,i={}){var r;let s=(n=Cn(n,yc))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&oc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=Ot.MOCK_USER;else{a=oA(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new G(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ot(l)}n._authCredentials=new Ib(new Cp(a,c))}}var Ao=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Wt=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},fs=class n extends Ao{constructor(e,t,i){super(e,t,rg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new Z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function dR(n,e,...t){if(n=mt(n),lR("collection","path",e),n instanceof yc){let i=tt.fromString(e,...t);return hP(i),new fs(n,null,i)}{if(!(n instanceof Wt||n instanceof fs))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(tt.fromString(e,...t));return hP(i),new fs(n.firestore,null,i)}}function gI(n,e,...t){if(n=mt(n),arguments.length===1&&(e=Dp.newId()),lR("doc","path",e),n instanceof yc){let i=tt.fromString(e,...t);return dP(i),new Wt(n,null,new Z(i))}{if(!(n instanceof Wt||n instanceof fs))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(tt.fromString(e,...t));return dP(i),new Wt(n.firestore,n instanceof fs?n.converter:null,new Z(i))}}var Qp=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Bp(this,"async_queue_retry"),this.Vu=()=>{let i=_b();i&&K("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;let t=_b();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=_b();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new oi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return E(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ru(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Cr("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let r=Nw.createAndSchedule(this,e,t,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&te()}verifyOperationInProgress(){}wu(){return E(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function fP(n){return function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Ri=class extends yc{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new Qp,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Qp(e),this._firestoreClient=void 0,yield e}})}};function hR(n,e){let t=typeof n=="object"?n:Ga(),i=typeof n=="string"?n:e||"(default)",r=Zl(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=sA("firestore");s&&uR(r,...s)}return r}function dg(n){if(n._terminated)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||p6(n),n._firestoreClient}function p6(n){var e,t,i;let r=n._freezeSettings(),s=function(a,c,l,d){return new Ab(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,cR(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new zw(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var Du=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Gt.fromBase64String(e))}catch(t){throw new G(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var vc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Su=class{constructor(e){this._methodName=e}};var xu=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}};var Tu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}};var g6=/^__.*__$/,Hw=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Pi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mo(e,this.data,t,this.fieldTransforms)}},Yp=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Pi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function fR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}var qw=class n{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(fR(this.Cu)&&g6.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Ww=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||ag(e)}Qu(e,t,i,r=!1){return new qw({Cu:e,methodName:t,qu:i,path:En.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function hg(n){let e=n._freezeSettings(),t=ag(n._databaseId);return new Ww(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pR(n,e,t,i,r,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,r);mI("Data must be an object, but it was:",o,i);let a=gR(i,o),c,l;if(s.merge)c=new Vn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let h of s.mergeFields){let p=Gw(e,h,t);if(!o.contains(p))throw new G(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);yR(d,p)||d.push(p)}c=new Vn(d),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new Hw(new In(a),c,l)}var Zp=class n extends Su{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function m6(n,e,t,i){let r=n.Qu(1,e,t);mI("Data must be an object, but it was:",r,i);let s=[],o=In.empty();Po(i,(c,l)=>{let d=yI(e,c,t);l=mt(l);let h=r.Nu(d);if(l instanceof Zp)s.push(d);else{let p=ku(l,h);p!=null&&(s.push(d),o.set(d,p))}});let a=new Vn(s);return new Yp(o,a,r.fieldTransforms)}function y6(n,e,t,i,r,s){let o=n.Qu(1,e,t),a=[Gw(e,i,t)],c=[r];if(s.length%2!=0)throw new G(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Gw(e,s[p])),c.push(s[p+1]);let l=[],d=In.empty();for(let p=a.length-1;p>=0;--p)if(!yR(l,a[p])){let g=a[p],y=c[p];y=mt(y);let v=o.Nu(g);if(y instanceof Zp)l.push(g);else{let _=ku(y,v);_!=null&&(l.push(g),d.set(g,_))}}let h=new Vn(l);return new Yp(d,h,o.fieldTransforms)}function v6(n,e,t,i=!1){return ku(t,n.Qu(i?4:3,e))}function ku(n,e){if(mR(n=mt(n)))return mI("Unsupported field value:",e,n),gR(n,e);if(n instanceof Su)return function(i,r){if(!fR(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let a of i){let c=ku(a,r.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=mt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return n9(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=ot.fromDate(i);return{timestampValue:Fp(r.serializer,s)}}if(i instanceof ot){let s=new ot(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Fp(r.serializer,s)}}if(i instanceof xu)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Du)return{bytesValue:BP(r.serializer,i._byteString)};if(i instanceof Wt){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sI(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Tu)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return rI(a.serializer,c)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${ug(i)}`)}(n,e)}function gR(n,e){let t={};return yP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Po(n,(i,r)=>{let s=ku(r,e.Mu(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function mR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ot||n instanceof xu||n instanceof Du||n instanceof Wt||n instanceof Su||n instanceof Tu)}function mI(n,e,t){if(!mR(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=ug(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function Gw(n,e,t){if((e=mt(e))instanceof vc)return e._internalPath;if(typeof e=="string")return yI(n,e);throw Jp("Field path arguments must be of type string or ",n,!1,void 0,t)}var _6=new RegExp("[~\\*/\\[\\]]");function yI(n,e,t){if(e.search(_6)>=0)throw Jp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vc(...e.split("."))._internalPath}catch{throw Jp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jp(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new G(B.INVALID_ARGUMENT,a+n+c)}function yR(n,e){return n.some(t=>t.isEqual(e))}var Xp=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Kw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(vI("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Kw=class extends Xp{data(){return super.data()}};function vI(n,e){return typeof e=="string"?yI(n,e):e instanceof vc?e._internalPath:e._delegate._internalPath}function vR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Mu=class{},Qw=class extends Mu{};function _R(n,e,...t){let i=[];e instanceof Mu&&i.push(e),i=i.concat(t),function(s){let o=s.filter(c=>c instanceof Yw).length,a=s.filter(c=>c instanceof eg).length;if(o>1||o>0&&a>0)throw new G(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var eg=class n extends Qw{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return wR(e._query,t),new Ao(e.firestore,e.converter,zb(e._query,t))}_parse(e){let t=hg(e.firestore);return function(s,o,a,c,l,d,h){let p;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){gP(h,d);let g=[];for(let y of h)g.push(pP(c,s,y));p={arrayValue:{values:g}}}else p=pP(c,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||gP(h,d),p=v6(a,o,h,d==="in"||d==="not-in");return _t.create(l,d,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function bR(n,e,t){let i=e,r=vI("where",n);return eg._create(r,i,t)}var Yw=class n extends Mu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:ci.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r,a=s.getFlattenedFilters();for(let c of a)wR(o,c),o=zb(o,c)}(e._query,t),new Ao(e.firestore,e.converter,zb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function pP(n,e,t){if(typeof(t=mt(t))=="string"){if(t==="")throw new G(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SP(e)&&t.indexOf("/")!==-1)throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(tt.fromString(t));if(!Z.isDocumentKey(i))throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return j1(n,new Z(i))}if(t instanceof Wt)return j1(n,t._key);throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ug(t)}.`)}function gP(n,e){if(!Array.isArray(n)||n.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wR(n,e){let t=function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Zw=class{convertValue(e,t="none"){switch(Do(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return Po(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;let s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Ze(o.doubleValue));return new Tu(s)}convertGeoPoint(e){return new xu(Ze(e.latitude),Ze(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=eI(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){let t=Dr(e);return new ot(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=tt.fromString(e);Ne(WP(i));let r=new Mp(i.get(1),i.get(3)),s=new Z(i.popFirst(5));return r.isEqual(t)||Cr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function IR(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var Io=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},tg=class extends Xp{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new sc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(vI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},sc=class extends tg{data(e={}){return super.data(e)}},ng=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Io(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new sc(this._firestore,this._userDataWriter,i.key,i,new Io(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new sc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Io(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new sc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Io(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:b6(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function b6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}function ER(n){n=Cn(n,Wt);let e=Cn(n.firestore,Ri);return d6(dg(e),n._key).then(t=>TR(e,n,t))}var Au=class extends Zw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Du(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}};function CR(n){n=Cn(n,Ao);let e=Cn(n.firestore,Ri),t=dg(e),i=new Au(e);return vR(n._query),h6(t,n._query).then(r=>new ng(e,i,n,r))}function DR(n,e,t){n=Cn(n,Wt);let i=Cn(n.firestore,Ri),r=IR(n.converter,e,t);return bI(i,[pR(hg(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Er.none())])}function SR(n,e,t,...i){n=Cn(n,Wt);let r=Cn(n.firestore,Ri),s=hg(r),o;return o=typeof(e=mt(e))=="string"||e instanceof vc?y6(s,"updateDoc",n._key,e,t,i):m6(s,"updateDoc",n._key,e),bI(r,[o.toMutation(n._key,Er.exists(!0))])}function xR(n,e){let t=Cn(n.firestore,Ri),i=gI(n),r=IR(n.converter,e);return bI(t,[pR(hg(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Er.exists(!1))]).then(()=>i)}function _I(n,...e){var t,i,r;n=mt(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||fP(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(fP(e[o])){let h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let c,l,d;if(n instanceof Wt)l=Cn(n.firestore,Ri),d=rg(n._key.path),c={next:h=>{e[o]&&e[o](TR(l,n,h))},error:e[o+1],complete:e[o+2]};else{let h=Cn(n,Ao);l=Cn(h.firestore,Ri),d=h._query;let p=new Au(l);c={next:g=>{e[o]&&e[o](new ng(l,p,h,g))},error:e[o+1],complete:e[o+2]},vR(n._query)}return function(p,g,y,v){let _=new Cu(v),T=new Eu(g,_,y);return p.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return dI(yield Gp(p),T)})),()=>{_.Za(),p.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return hI(yield Gp(p),T)}))}}(dg(l),d,a,c)}function bI(n,e){return function(i,r){let s=new oi;return i.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return e6(yield u6(i),r,s)})),s.promise}(dg(n),e)}function TR(n,e,t){let i=t.docs.get(e._key),r=new Au(n);return new tg(n,r,e._key,i,new Io(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){_c=r})(as),os(new Ln("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new Ri(new Eb(i.getProvider("auth-internal")),new xb(i.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new G(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mp(l.options.projectId,d)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),xt(k1,"4.7.3",e),xt(k1,"4.7.3","esm2017")})();var fg=function(){return fg=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},fg.apply(this,arguments)};var E6={includeMetadataChanges:!1};function MR(n,e){return e===void 0&&(e=E6),new pe(function(t){var i=_I(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:i}})}function AR(n,e){var t;e===void 0&&(e={});var i=n.data(e);return!n.exists()||typeof i!="object"||i===null||!e.idField?i:fg(fg({},i),(t={},t[e.idField]=n.id,t))}function PR(n){return MR(n,{includeMetadataChanges:!0}).pipe(de(function(e){return e.docs}))}function RR(n,e){return e===void 0&&(e={}),PR(n).pipe(de(function(t){return t.map(function(i){return AR(i,e)})}))}var Oo=class{constructor(e){return e}},OR="firestore",wI=class{constructor(){return Jl(OR)}};var II=new Y("angularfire2.firestore-instances");function C6(n,e){let t=Qf(OR,n,e);return t&&new Oo(t)}function D6(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Oo(i)}}var S6={provide:wI,deps:[[new nn,II]]},x6={provide:Oo,useFactory:C6,deps:[[new nn,II],vr]};function NR(n,...e){return xt("angularfire",fo.full,"fst"),vi([x6,S6,{provide:II,useFactory:D6(n),multi:!0,deps:[ke,cn,Ya,po,[new nn,cu],[new nn,Qa],...e]}])}var kR=Tt(RR,!0);var FR=Tt(xR,!0);var Oi=Tt(dR,!0);var Ni=Tt(gI,!0);var No=Tt(ER,!0);var ys=Tt(CR,!0);var LR=Tt(hR,!0);var vs=Tt(_R,!0);var Fu=Tt(DR,!0);var EI=Tt(SR,!0);var jn=Tt(bR,!0);var WR=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(W(bi),W(ti))}}static{this.\u0275dir=Ke({type:n})}}return n})(),SI=(()=>{class n extends WR{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=_i(n)))(r||n)}})()}static{this.\u0275dir=Ke({type:n,features:[yn]})}}return n})(),wg=new Y("");var M6={provide:wg,useExisting:Yn(()=>ki),multi:!0};function A6(){let n=fr()?fr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var P6=new Y(""),ki=(()=>{class n extends WR{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!A6())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(W(bi),W(ti),W(P6,8))}}static{this.\u0275dir=Ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&ie("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[lr([M6]),yn]})}}return n})();function GR(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function R6(n){return n!=null&&typeof n.length=="number"}var zu=new Y(""),KR=new Y("");function O6(n){return GR(n.value)?{required:!0}:null}function N6(n){return e=>R6(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function k6(n){if(!n)return CI;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(GR(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function CI(n){return null}function QR(n){return n!=null}function YR(n){return eo(n)?Xe(n):n}function ZR(n){let e={};return n.forEach(t=>{e=t!=null?$($({},e),t):e}),Object.keys(e).length===0?null:e}function JR(n,e){return e.map(t=>t(n))}function F6(n){return!n.validate}function XR(n){return n.map(e=>F6(e)?e:t=>e.validate(t))}function L6(n){if(!n)return null;let e=n.filter(QR);return e.length==0?null:function(t){return ZR(JR(t,e))}}function xI(n){return n!=null?L6(XR(n)):null}function V6(n){if(!n)return null;let e=n.filter(QR);return e.length==0?null:function(t){let i=JR(t,e).map(YR);return hy(i).pipe(de(ZR))}}function TI(n){return n!=null?V6(XR(n)):null}function VR(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function j6(n){return n._rawValidators}function B6(n){return n._rawAsyncValidators}function DI(n){return n?Array.isArray(n)?n:[n]:[]}function gg(n,e){return Array.isArray(n)?n.includes(e):n===e}function jR(n,e){let t=DI(e);return DI(n).forEach(r=>{gg(t,r)||t.push(r)}),t}function BR(n,e){return DI(e).filter(t=>!gg(n,t))}var mg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=TI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ec=class extends mg{get formDirective(){return null}get path(){return null}},$u=class extends mg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},yg=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},U6={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},$se=X($({},U6),{"[class.ng-submitted]":"isSubmitted"}),_s=(()=>{class n extends yg{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(W($u,2))}}static{this.\u0275dir=Ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&cr("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[yn]})}}return n})(),Dc=(()=>{class n extends yg{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(W(Ec,10))}}static{this.\u0275dir=Ke({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&cr("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[yn]})}}return n})();var Lu="VALID",pg="INVALID",wc="PENDING",Vu="DISABLED",Cc=class{},vg=class extends Cc{constructor(e,t){super(),this.value=e,this.source=t}},Bu=class extends Cc{constructor(e,t){super(),this.pristine=e,this.source=t}},Uu=class extends Cc{constructor(e,t){super(),this.touched=e,this.source=t}},Ic=class extends Cc{constructor(e,t){super(),this.status=e,this.source=t}};function eO(n){return(Ig(n)?n.validators:n)||null}function $6(n){return Array.isArray(n)?xI(n):n||null}function tO(n,e){return(Ig(e)?e.asyncValidators:n)||null}function z6(n){return Array.isArray(n)?TI(n):n||null}function Ig(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function H6(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Q(1e3,"");if(!i[t])throw new Q(1001,"")}function q6(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new Q(1002,"")})}var _g=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Cl(()=>this.statusReactive()),this.statusReactive=El(void 0),this._pristine=Cl(()=>this.pristineReactive()),this.pristineReactive=El(!0),this._touched=Cl(()=>this.touchedReactive()),this.touchedReactive=El(!1),this._events=new At,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ur(this.statusReactive)}set status(e){ur(()=>this.statusReactive.set(e))}get valid(){return this.status===Lu}get invalid(){return this.status===pg}get pending(){return this.status==wc}get disabled(){return this.status===Vu}get enabled(){return this.status!==Vu}get pristine(){return ur(this.pristineReactive)}set pristine(e){ur(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return ur(this.touchedReactive)}set touched(e){ur(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(jR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(jR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(BR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(BR(e,this._rawAsyncValidators))}hasValidator(e){return gg(this._rawValidators,e)}hasAsyncValidator(e){return gg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(X($({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Uu(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Uu(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(X($({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Bu(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Bu(!0,i))}markAsPending(e={}){this.status=wc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ic(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(X($({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Vu,this.errors=null,this._forEachChild(r=>{r.disable(X($({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new vg(this.value,i)),this._events.next(new Ic(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(X($({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Lu,this._forEachChild(i=>{i.enable(X($({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(X($({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Lu||this.status===wc)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new vg(this.value,t)),this._events.next(new Ic(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(X($({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vu:Lu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=wc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=YR(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Ic(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new ht,this.statusChanges=new ht}_calculateStatus(){return this._allControlsDisabled()?Vu:this.errors?pg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wc)?wc:this._anyControlsHaveStatus(pg)?pg:Lu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Bu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Uu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ig(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=$6(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=z6(this._rawAsyncValidators)}},bg=class extends _g{constructor(e,t,i){super(eO(t),tO(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){q6(this,!0,e),Object.keys(e).forEach(i=>{H6(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Eg=new Y("CallSetDisabledState",{providedIn:"root",factory:()=>Cg}),Cg="always";function W6(n,e){return[...e.path,n]}function nO(n,e,t=Cg){iO(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),K6(n,e),Y6(n,e),Q6(n,e),G6(n,e)}function UR(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function G6(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function iO(n,e){let t=j6(n);e.validator!==null?n.setValidators(VR(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=B6(n);e.asyncValidator!==null?n.setAsyncValidators(VR(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();UR(e._rawValidators,r),UR(e._rawAsyncValidators,r)}function K6(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&rO(n,e)})}function Q6(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&rO(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function rO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Y6(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Z6(n,e){n==null,iO(n,e)}function J6(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function X6(n){return Object.getPrototypeOf(n.constructor)===SI}function e8(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function t8(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===ki?t=s:X6(s)?i=s:r=s}),r||i||t||null}var n8={provide:Ec,useExisting:Yn(()=>ko)},ju=Promise.resolve(),ko=(()=>{class n extends Ec{get submitted(){return ur(this.submittedReactive)}constructor(t,i,r){super(),this.callSetDisabledState=r,this._submitted=Cl(()=>this.submittedReactive()),this.submittedReactive=El(!1),this._directives=new Set,this.ngSubmit=new ht,this.form=new bg({},xI(t),TI(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ju.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),nO(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ju.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ju.then(()=>{let i=this._findContainer(t.path),r=new bg({});Z6(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ju.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){ju.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),e8(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(i){return new(i||n)(W(zu,10),W(KR,10),W(Eg,8))}}static{this.\u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&ie("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[lr([n8]),yn]})}}return n})();function $R(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function zR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var i8=class extends _g{constructor(e=null,t,i){super(eO(t),tO(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ig(t)&&(t.nonNullable||t.initialValueIsDefault)&&(zR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){$R(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){$R(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){zR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var r8={provide:$u,useExisting:Yn(()=>xr)},HR=Promise.resolve(),xr=(()=>{class n extends $u{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new i8,this._registered=!1,this.name="",this.update=new ht,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=t8(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),J6(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){nO(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){HR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Xr(i);HR.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?W6(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(W(Ec,9),W(zu,10),W(KR,10),W(wg,10),W(no,8),W(Eg,8))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[lr([r8]),yn,Yr]})}}return n})(),Sc=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var s8=new Y("");var o8={provide:wg,useExisting:Yn(()=>Dg),multi:!0};function sO(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function a8(n){return n.split(":")[0]}var Dg=(()=>{class n extends SI{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let i=this._getOptionId(t),r=sO(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=a8(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=_i(n)))(r||n)}})()}static{this.\u0275dir=Ke({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&ie("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[lr([o8]),yn]})}}return n})(),oO=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(sO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(W(ti),W(bi),W(Dg,9))}}static{this.\u0275dir=Ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),c8={provide:wg,useExisting:Yn(()=>aO),multi:!0};function qR(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function l8(n){return n.split(":")[0]}var aO=(()=>{class n extends SI{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(s=>this._getOptionId(s));i=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],s=i.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);r.push(l)}}else{let o=i.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);r.push(l)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=l8(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=_i(n)))(r||n)}})()}static{this.\u0275dir=Ke({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&ie("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[lr([c8]),yn]})}}return n})(),cO=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(qR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(qR(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(W(ti),W(bi),W(aO,9))}}static{this.\u0275dir=Ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function u8(n){return typeof n=="number"?n:parseInt(n,10)}var MI=(()=>{class n{constructor(){this._validator=CI}ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):CI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ke({type:n,features:[Yr]})}}return n})();var d8={provide:zu,useExisting:Yn(()=>Fo),multi:!0};var Fo=(()=>{class n extends MI{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Xr,this.createValidator=t=>O6}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=_i(n)))(r||n)}})()}static{this.\u0275dir=Ke({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&ar("required",r._enabled?"":null)},inputs:{required:"required"},features:[lr([d8]),yn]})}}return n})();var h8={provide:zu,useExisting:Yn(()=>AI),multi:!0},AI=(()=>{class n extends MI{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>u8(t),this.createValidator=t=>N6(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=_i(n)))(r||n)}})()}static{this.\u0275dir=Ke({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&ar("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[lr([h8]),yn]})}}return n})(),f8={provide:zu,useExisting:Yn(()=>Hu),multi:!0},Hu=(()=>{class n extends MI{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>k6(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=_i(n)))(r||n)}})()}static{this.\u0275dir=Ke({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&ar("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[lr([f8]),yn]})}}return n})();var lO=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Js({type:n})}static{this.\u0275inj=Zs({})}}return n})();var Fi=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Eg,useValue:t.callSetDisabledState??Cg}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Js({type:n})}static{this.\u0275inj=Zs({imports:[lO]})}}return n})(),uO=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:s8,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Eg,useValue:t.callSetDisabledState??Cg}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Js({type:n})}static{this.\u0275inj=Zs({imports:[lO]})}}return n})();var Li=class n{constructor(e){this.auth=e;this.listenToAuthStateChanges()}userSubject=new It(null);user$=this.userSubject.asObservable();listenToAuthStateChanges(){M1(this.auth).subscribe(e=>{this.userSubject.next(e)})}isLoggedIn(){return this.userSubject.value!==null}getCurrentUser(){return this.userSubject.value}register(e,t){return E(this,null,function*(){try{return yield A1(this.auth,e,t)}catch(i){throw console.error("Erro no registro:",i),i}})}login(e,t,i=!0){return E(this,null,function*(){try{return yield this.auth.setPersistence(i?mp:au),yield R1(this.auth,e,t)}catch(r){throw console.error("Erro no login:",r),r}})}signOut(){return E(this,null,function*(){yield this.auth.signOut()})}static \u0275fac=function(t){return new(t||n)(le(_o))};static \u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})};var Kt=class n{constructor(e){this.firestore=e}getPatientsByDoctor(e){return E(this,null,function*(){let t=Oi(this.firestore,"patients"),i=vs(t,jn("medicoId","==",e)),r=yield ys(i),s=[];return r.forEach(o=>{s.push(o.data())}),s})}searchPatientsBySNS(e,t){return E(this,null,function*(){if(!t.trim())return[];try{let i=Oi(this.firestore,"patients"),r=t,s=t+"\uF8FF",o=vs(i,jn("medicoId","==",e),jn("__name__",">=",r),jn("__name__","<=",s)),a=yield ys(o);return a.empty?[]:a.docs.map(c=>c.data())}catch(i){return console.error("Erro ao buscar pacientes:",i),[]}})}addSickLeave(e,t){return E(this,null,function*(){if(t){let i=Ni(this.firestore,"sickLeaves",t);yield Fu(i,X($({},e),{updatedAt:new Date}))}else{let i=Oi(this.firestore,"sickLeaves"),r=yield FR(i,X($({},e),{createdAt:new Date,updatedAt:new Date}));yield Fu(r,X($({},e),{id:r.id,createdAt:new Date,updatedAt:new Date})),yield this.updateSickLeaveStats(new Date)}})}getSickLeavesByDoctor(e){return E(this,null,function*(){let t=Oi(this.firestore,"sickLeaves"),i=vs(t,jn("doctor.id","==",e)),r=yield ys(i),s=[];return r.forEach(o=>{s.push(o.data())}),s})}updateSickLeave(e){return E(this,null,function*(){if(!e.id){console.error("Erro: ID da baixa m\xE9dica n\xE3o encontrado.");return}let t=Ni(this.firestore,"sickLeaves",e.id);yield EI(t,X($({},e),{updatedAt:new Date}))})}getSickLeaveById(e){return E(this,null,function*(){let t=Ni(this.firestore,"sickLeaves",e),i=yield No(t);return i.exists()?i.data():null})}getPatientByUID(e){return E(this,null,function*(){let t=Oi(this.firestore,"patients"),i=vs(t,jn("id","==",e)),r=yield ys(i);return r.empty?null:r.docs[0].data()})}getSickLeavesByPatient(e){return E(this,null,function*(){let t=Oi(this.firestore,"sickLeaves"),i=vs(t,jn("patient.id","==",e));return(yield ys(i)).docs.map(s=>s.data())})}addPatient(e){return E(this,null,function*(){let t=Ni(this.firestore,`patients/${e.numeroSNS}`);yield Fu(t,e)})}getPatientBySNS(e){return E(this,null,function*(){let t=Ni(this.firestore,`patients/${e}`),i=yield No(t);return i.exists()?i.data():null})}getMedics(){let e=Oi(this.firestore,"medicos");return kR(e,{idField:"id"})}checkIfMedic(e){return E(this,null,function*(){let t=Ni(this.firestore,`medicos/${e}`);return(yield No(t)).exists()})}getMedicById(e){return E(this,null,function*(){let t=Ni(this.firestore,`medicos/${e}`),i=yield No(t);return i.exists()?i.data():null})}getPendingSickLeavesCount(e){return E(this,null,function*(){let t=Oi(this.firestore,"sickLeaves"),i=vs(t,jn("doctor.id","==",e),jn("isIssued","==",!1));return(yield ys(i)).size})}getIssuedSickLeavesCount(e){return E(this,null,function*(){let t=Oi(this.firestore,"sickLeaves"),i=vs(t,jn("doctor.id","==",e),jn("isIssued","==",!0));return(yield ys(i)).size})}updateSickLeaveStats(e){return E(this,null,function*(){let t=e.getFullYear().toString(),i=(e.getMonth()+1).toString().padStart(2,"0"),r=Ni(this.firestore,"sickLeavesStats",t);try{let s=yield No(r);s.exists()?yield EI(r,{[i]:(s.data()[i]||0)+1}):yield Fu(r,{[i]:1})}catch(s){console.error("Erro ao atualizar estat\xEDsticas de baixas:",s)}})}getSickLeavesStats(){return E(this,null,function*(){let e=new Date().getFullYear().toString(),t=Ni(this.firestore,"sickLeavesStats",e);try{let i=yield No(t);return i.exists()?i.data():{}}catch(i){return console.error("Erro ao obter estat\xEDsticas de baixas m\xE9dicas:",i),{}}})}static \u0275fac=function(t){return new(t||n)(le(Oo))};static \u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})};var xg=class n{constructor(e,t,i){this.router=e;this.authService=t;this.fireStore=i}utente="";password="";onSubmit(){return E(this,null,function*(){if(!this.isValidUtente(this.utente)){alert("O n\xFAmero de utente deve ter 9 d\xEDgitos!");return}try{let e=yield this.fireStore.getPatientBySNS(this.utente);if(!e){alert("N\xFAmero de utente n\xE3o encontrado!");return}let t=yield this.authService.login(e.email,this.password);(yield this.fireStore.checkIfMedic(this.utente))?this.router.navigate(["utente"]):this.router.navigate(["users/dashboard"]),console.log("Login bem-sucedido!",t)}catch(e){alert(`Erro ao autenticar: ${e.message}`)}})}isValidUtente(e){return/^\d{9}$/.test(e)}navigateToRegister(){this.router.navigate(["/register"])}static \u0275fac=function(t){return new(t||n)(W(ri),W(Li),W(Kt))};static \u0275cmp=ft({type:n,selectors:[["app-login"]],standalone:!0,features:[pt],decls:21,vars:2,consts:[[1,"login-container"],[1,"login-card"],[3,"submit"],[1,"form-group"],["for","utente"],["id","utente","type","text","name","utente","required","","pattern","\\d{9}","title","O n\xFAmero de utente deve ter 9 d\xEDgitos.",3,"ngModelChange","ngModel"],["for","password"],["id","password","type","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn"],[1,"register-link"],[3,"click"]],template:function(t,i){t&1&&(M(0,"div",0)(1,"div",1)(2,"h1"),V(3,"Bem-vindo"),R(),M(4,"h2"),V(5,"Fa\xE7a login para continuar"),R(),M(6,"form",2),ie("submit",function(){return i.onSubmit()}),M(7,"div",3)(8,"label",4),V(9,"N\xFAmero de Utente"),R(),M(10,"input",5),Ye("ngModelChange",function(s){return et(i.utente,s)||(i.utente=s),s}),R()(),M(11,"div",3)(12,"label",6),V(13,"Senha"),R(),M(14,"input",7),Ye("ngModelChange",function(s){return et(i.password,s)||(i.password=s),s}),R()(),M(15,"button",8),V(16,"Entrar"),R()(),M(17,"p",9),V(18," N\xE3o tem conta? "),M(19,"a",10),ie("click",function(){return i.navigateToRegister()}),V(20,"Registe-se aqui"),R()()()()),t&2&&(H(10),Qe("ngModel",i.utente),H(4),Qe("ngModel",i.password))},dependencies:[Fi,Sc,ki,_s,Dc,Fo,Hu,xr,ko],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f9f9f9}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 6px #0000001a;width:100%;max-width:400px;box-sizing:border-box;text-align:center}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#01624c;font-size:26px;margin-bottom:10px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:18px;margin-bottom:20px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;color:#01624c;margin-bottom:5px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;box-sizing:border-box;font-size:14px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#01624c;outline:none}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#01624c;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#014c3a}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .register-link[_ngcontent-%COMP%]{margin-top:10px;font-size:14px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#01624c;text-decoration:none}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};function p8(n,e){if(n&1){let t=Pa();M(0,"tr",8),ie("click",function(){let r=Jn(t).$implicit,s=St();return Xn(s.openEditModal(r))}),M(1,"td"),V(2),R(),M(3,"td"),V(4),Ra(5,"date"),R(),M(6,"td"),V(7),R(),M(8,"td"),V(9),R()()}if(n&2){let t=e.$implicit;H(2),Ft(t.patient.name),H(2),Ft(LT(5,4,t.createdAt,"dd/MM/yyyy")),H(3),Ft(t.diagnosis),H(2),Ft(t.status)}}function g8(n,e){if(n&1){let t=Pa();M(0,"div",9)(1,"div",10)(2,"h2"),V(3,"Editar Baixa"),R(),M(4,"label"),V(5,"Paciente:"),R(),M(6,"input",11),Ye("ngModelChange",function(r){Jn(t);let s=St();return et(s.selectedSickLeave.patient.name,r)||(s.selectedSickLeave.patient.name=r),Xn(r)}),R(),M(7,"label"),V(8,"Data:"),R(),M(9,"input",12),Ye("ngModelChange",function(r){Jn(t);let s=St();return et(s.selectedSickLeave.createdAt,r)||(s.selectedSickLeave.createdAt=r),Xn(r)}),R(),M(10,"label"),V(11,"Diagn\xF3stico:"),R(),M(12,"input",13),Ye("ngModelChange",function(r){Jn(t);let s=St();return et(s.selectedSickLeave.diagnosis,r)||(s.selectedSickLeave.diagnosis=r),Xn(r)}),R(),M(13,"label"),V(14,"Status:"),R(),M(15,"select",14),Ye("ngModelChange",function(r){Jn(t);let s=St();return et(s.selectedSickLeave.status,r)||(s.selectedSickLeave.status=r),Xn(r)}),M(16,"option",15),V(17,"Em an\xE1lise"),R(),M(18,"option",16),V(19,"Aprovado"),R(),M(20,"option",17),V(21,"Rejeitado"),R()(),M(22,"div",18)(23,"button",8),ie("click",function(){Jn(t);let r=St();return Xn(r.updateSickLeave())}),V(24,"Atualizar"),R(),M(25,"button",19),ie("click",function(){Jn(t);let r=St();return Xn(r.closeEditModal())}),V(26,"Cancelar"),R()()()()}if(n&2){let t=St();H(6),Qe("ngModel",t.selectedSickLeave.patient.name),H(3),Qe("ngModel",t.selectedSickLeave.createdAt),H(3),Qe("ngModel",t.selectedSickLeave.diagnosis),H(3),Qe("ngModel",t.selectedSickLeave.status)}}var Tg=class n{constructor(e,t){this.sickLeaveService=e;this.backoffice=t}sickLeaves=[];filteredSickLeaves=[];selectedSickLeave=null;ngOnInit(){return E(this,null,function*(){yield this.loadSickLeaves()})}loadSickLeaves(){return E(this,null,function*(){this.backoffice.patient?.numeroSNS&&(this.sickLeaves=yield this.sickLeaveService.getSickLeavesByDoctor(this.backoffice.patient?.numeroSNS),this.sickLeaves.forEach(e=>{e.createdAt instanceof ot&&(e.createdAt=e.createdAt.toDate())}),this.filteredSickLeaves=[...this.sickLeaves])})}filterTable(e,t){let i=e.target.value.toLowerCase();this.filteredSickLeaves=this.sickLeaves.filter(r=>{let s;return t==="createdAt"?(s=new Date(r.createdAt).toISOString().split("T")[0],s.includes(i)):(t.includes(".")?s=r[t.split(".")[0]][t.split(".")[1]]:s=r[t],s.toString().toLowerCase().includes(i))})}openEditModal(e){this.selectedSickLeave=$({},e)}closeEditModal(){this.selectedSickLeave=null}updateSickLeave(){return E(this,null,function*(){this.selectedSickLeave&&(yield this.sickLeaveService.updateSickLeave(this.selectedSickLeave),this.loadSickLeaves(),this.closeEditModal())})}static \u0275fac=function(t){return new(t||n)(W(Kt),W(Vi))};static \u0275cmp=ft({type:n,selectors:[["app-consultar-baixas"]],standalone:!0,features:[pt],decls:27,vars:2,consts:[[1,"consultar-baixas-container"],[1,"table-container"],["type","text","placeholder","Filtrar por paciente",3,"input"],["type","date",3,"input"],["type","text","placeholder","Filtrar por diagn\xF3stico",3,"input"],["type","text","placeholder","Filtrar por status",3,"input"],[3,"click",4,"ngFor","ngForOf"],["class","modal",4,"ngIf"],[3,"click"],[1,"modal"],[1,"modal-content"],["type","text","disabled","",3,"ngModelChange","ngModel"],["type","date",3,"ngModelChange","ngModel"],["type","text",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","Em an\xE1lise"],["value","Aprovado"],["value","Rejeitado"],[1,"modal-actions"],[1,"cancel",3,"click"]],template:function(t,i){t&1&&(M(0,"div",0)(1,"h1"),V(2,"Consultar Baixas"),R(),M(3,"div",1)(4,"table")(5,"thead")(6,"tr")(7,"th"),V(8,"Paciente"),R(),M(9,"th"),V(10,"Data"),R(),M(11,"th"),V(12,"Diagn\xF3stico"),R(),M(13,"th"),V(14,"Status"),R()(),M(15,"tr")(16,"th")(17,"input",2),ie("input",function(s){return i.filterTable(s,"patient.name")}),R()(),M(18,"th")(19,"input",3),ie("input",function(s){return i.filterTable(s,"createdAt")}),R()(),M(20,"th")(21,"input",4),ie("input",function(s){return i.filterTable(s,"diagnosis")}),R()(),M(22,"th")(23,"input",5),ie("input",function(s){return i.filterTable(s,"status")}),R()()()(),M(24,"tbody"),Pt(25,p8,10,7,"tr",6),R()()()(),Pt(26,g8,27,4,"div",7)),t&2&&(H(25),Ie("ngForOf",i.filteredSickLeaves),H(),Ie("ngIf",i.selectedSickLeave))},dependencies:[ts,Ef,Fi,oO,cO,ki,Dg,_s,xr,ka],styles:[".consultar-baixas-container[_ngcontent-%COMP%]{border-radius:10px;background-color:#f9f9f9;box-shadow:0 4px 6px #0000001a;max-width:100%;overflow-x:auto}.consultar-baixas-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#01624c;margin-bottom:20px;font-size:24px;font-weight:700}.consultar-baixas-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto}.consultar-baixas-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff;border-radius:8px;overflow:hidden}.consultar-baixas-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px 10px;border-radius:5px;font-size:14px;box-sizing:border-box}.consultar-baixas-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#01624c}.consultar-baixas-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#01624c;color:#fff;text-align:left;padding:12px;font-size:14px}.consultar-baixas-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.consultar-baixas-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}.consultar-baixas-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#cce4ff;cursor:pointer}.consultar-baixas-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;font-size:14px;text-align:left;border-bottom:1px solid #ddd}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:10px;width:400px;display:flex;flex-direction:column;gap:10px}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#01624c}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:5px;box-sizing:border-box}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:15px}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 12px;border:none;border-radius:5px;cursor:pointer;font-size:14px}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]{background:#ccc}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.cancel){background:#01624c;color:#fff}"]})};function Ku(n){return n+.5|0}var ws=(n,e,t)=>Math.max(Math.min(n,t),e);function Wu(n){return ws(Ku(n*2.55),0,255)}function Is(n){return ws(Ku(n*255),0,255)}function Tr(n){return ws(Ku(n/2.55)/100,0,1)}function dO(n){return ws(Ku(n*100),0,100)}var Bn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},OI=[..."0123456789ABCDEF"],m8=n=>OI[n&15],y8=n=>OI[(n&240)>>4]+OI[n&15],Mg=n=>(n&240)>>4===(n&15),v8=n=>Mg(n.r)&&Mg(n.g)&&Mg(n.b)&&Mg(n.a);function _8(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Bn[n[1]]*17,g:255&Bn[n[2]]*17,b:255&Bn[n[3]]*17,a:e===5?Bn[n[4]]*17:255}:(e===7||e===9)&&(t={r:Bn[n[1]]<<4|Bn[n[2]],g:Bn[n[3]]<<4|Bn[n[4]],b:Bn[n[5]]<<4|Bn[n[6]],a:e===9?Bn[n[7]]<<4|Bn[n[8]]:255})),t}var b8=(n,e)=>n<255?e(n):"";function w8(n){var e=v8(n)?m8:y8;return n?"#"+e(n.r)+e(n.g)+e(n.b)+b8(n.a,e):void 0}var I8=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function gO(n,e,t){let i=e*Math.min(t,1-t),r=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function E8(n,e,t){let i=(r,s=(r+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function C8(n,e,t){let i=gO(n,1,.5),r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function D8(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function NI(n){let t=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(t,i,r),o=Math.min(t,i,r),a=(s+o)/2,c,l,d;return s!==o&&(d=s-o,l=a>.5?d/(2-s-o):d/(s+o),c=D8(t,i,r,d,s),c=c*60+.5),[c|0,l||0,a]}function kI(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Is)}function FI(n,e,t){return kI(gO,n,e,t)}function S8(n,e,t){return kI(C8,n,e,t)}function x8(n,e,t){return kI(E8,n,e,t)}function mO(n){return(n%360+360)%360}function T8(n){let e=I8.exec(n),t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?Wu(+e[5]):Is(+e[5]));let r=mO(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=S8(r,s,o):e[1]==="hsv"?i=x8(r,s,o):i=FI(r,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function M8(n,e){var t=NI(n);t[0]=mO(t[0]+e),t=FI(t),n.r=t[0],n.g=t[1],n.b=t[2]}function A8(n){if(!n)return;let e=NI(n),t=e[0],i=dO(e[1]),r=dO(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${Tr(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}var hO={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},fO={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function P8(){let n={},e=Object.keys(fO),t=Object.keys(hO),i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<t.length;r++)s=t[r],a=a.replace(s,hO[s]);s=parseInt(fO[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var Ag;function R8(n){Ag||(Ag=P8(),Ag.transparent=[0,0,0,0]);let e=Ag[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var O8=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function N8(n){let e=O8.exec(n),t=255,i,r,s;if(e){if(e[7]!==i){let o=+e[7];t=e[8]?Wu(o):ws(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Wu(i):ws(i,0,255)),r=255&(e[4]?Wu(r):ws(r,0,255)),s=255&(e[6]?Wu(s):ws(s,0,255)),{r:i,g:r,b:s,a:t}}}function k8(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Tr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var RI=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,xc=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function F8(n,e,t){let i=xc(Tr(n.r)),r=xc(Tr(n.g)),s=xc(Tr(n.b));return{r:Is(RI(i+t*(xc(Tr(e.r))-i))),g:Is(RI(r+t*(xc(Tr(e.g))-r))),b:Is(RI(s+t*(xc(Tr(e.b))-s))),a:n.a+t*(e.a-n.a)}}function Pg(n,e,t){if(n){let i=NI(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=FI(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function yO(n,e){return n&&Object.assign(e||{},n)}function pO(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Is(n[3]))):(e=yO(n,{r:0,g:0,b:0,a:1}),e.a=Is(e.a)),e}function L8(n){return n.charAt(0)==="r"?N8(n):T8(n)}var Gu=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,i;t==="object"?i=pO(e):t==="string"&&(i=_8(e)||R8(e)||L8(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=yO(this._rgb);return e&&(e.a=Tr(e.a)),e}set rgb(e){this._rgb=pO(e)}rgbString(){return this._valid?k8(this._rgb):void 0}hexString(){return this._valid?w8(this._rgb):void 0}hslString(){return this._valid?A8(this._rgb):void 0}mix(e,t){if(e){let i=this.rgb,r=e.rgb,s,o=t===s?.5:t,a=2*o-1,c=i.a-r.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;s=1-l,i.r=255&l*i.r+s*r.r+.5,i.g=255&l*i.g+s*r.g+.5,i.b=255&l*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=F8(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=Is(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=Ku(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Pg(this._rgb,2,e),this}darken(e){return Pg(this._rgb,2,-e),this}saturate(e){return Pg(this._rgb,1,e),this}desaturate(e){return Pg(this._rgb,1,-e),this}rotate(e){return M8(this._rgb,e),this}};function Ui(){}var TO=(()=>{let n=0;return()=>n++})();function Ce(n){return n==null}function ze(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function me(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function nt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function dn(n,e){return nt(n)?n:e}function ae(n,e){return typeof n>"u"?e:n}var MO=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,BI=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Be(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Oe(n,e,t,i){let r,s,o;if(ze(n))if(s=n.length,i)for(r=s-1;r>=0;r--)e.call(t,n[r],r);else for(r=0;r<s;r++)e.call(t,n[r],r);else if(me(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)e.call(t,n[o[r]],o[r])}function Zu(n,e){let t,i,r,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function kg(n){if(ze(n))return n.map(kg);if(me(n)){let e=Object.create(null),t=Object.keys(n),i=t.length,r=0;for(;r<i;++r)e[t[r]]=kg(n[t[r]]);return e}return n}function AO(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function V8(n,e,t,i){if(!AO(n))return;let r=e[n],s=t[n];me(r)&&me(s)?Mc(r,s,i):e[n]=kg(s)}function Mc(n,e,t){let i=ze(e)?e:[e],r=i.length;if(!me(n))return n;t=t||{};let s=t.merger||V8,o;for(let a=0;a<r;++a){if(o=i[a],!me(o))continue;let c=Object.keys(o);for(let l=0,d=c.length;l<d;++l)s(c[l],n,o,t)}return n}function Pc(n,e){return Mc(n,e,{merger:j8})}function j8(n,e,t){if(!AO(n))return;let i=e[n],r=t[n];me(i)&&me(r)?Pc(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=kg(r))}var vO={"":n=>n,x:n=>n.x,y:n=>n.y};function B8(n){let e=n.split("."),t=[],i="";for(let r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function U8(n){let e=B8(n);return t=>{for(let i of e){if(i==="")break;t=t&&t[i]}return t}}function Pr(n,e){return(vO[e]||(vO[e]=U8(e)))(n)}function jg(n){return n.charAt(0).toUpperCase()+n.slice(1)}var Rc=n=>typeof n<"u",Mr=n=>typeof n=="function",UI=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function PO(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var He=Math.PI,qe=2*He,$8=qe+He,Fg=Number.POSITIVE_INFINITY,z8=He/180,ct=He/2,Vo=He/4,_O=He*2/3,Ar=Math.log10,li=Math.sign;function Oc(n,e,t){return Math.abs(n-e)<t}function $I(n){let e=Math.round(n);n=Oc(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(Ar(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function RO(n){let e=[],t=Math.sqrt(n),i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function Uo(n){return!isNaN(parseFloat(n))&&isFinite(n)}function OO(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function zI(n,e,t){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Un(n){return n*(He/180)}function Bg(n){return n*(180/He)}function HI(n){if(!nt(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function qI(n,e){let t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i),s=Math.atan2(i,t);return s<-.5*He&&(s+=qe),{angle:s,distance:r}}function Lg(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function H8(n,e){return(n-e+$8)%qe-He}function un(n){return(n%qe+qe)%qe}function Nc(n,e,t,i){let r=un(n),s=un(e),o=un(t),a=un(s-r),c=un(o-r),l=un(r-s),d=un(r-o);return r===s||r===o||i&&s===o||a>c&&l<d}function Mt(n,e,t){return Math.max(e,Math.min(t,n))}function NO(n){return Mt(n,-32768,32767)}function $i(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function Ug(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,t(s)?r=s:i=s;return{lo:r,hi:i}}var ji=(n,e,t,i)=>Ug(n,t,i?r=>{let s=n[r][e];return s<t||s===t&&n[r+1][e]===t}:r=>n[r][e]<t),kO=(n,e,t)=>Ug(n,t,i=>n[i][e]>=t);function FO(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}var LO=["push","pop","shift","splice","unshift"];function VO(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),LO.forEach(t=>{let i="_onData"+jg(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){let o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function WI(n,e){let t=n._chartjs;if(!t)return;let i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(LO.forEach(s=>{delete n[s]}),delete n._chartjs)}function GI(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var KI=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function QI(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,KI.call(window,()=>{i=!1,n.apply(e,t)}))}}function jO(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}var $g=n=>n==="start"?"left":n==="end"?"right":"center",Vt=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,BO=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function YI(n,e,t){let i=e.length,r=0,s=i;if(n._sorted){let{iScale:o,_parsed:a}=n,c=o.axis,{min:l,max:d,minDefined:h,maxDefined:p}=o.getUserBounds();h&&(r=Mt(Math.min(ji(a,c,l).lo,t?i:ji(e,c,o.getPixelForValue(l)).lo),0,i-1)),p?s=Mt(Math.max(ji(a,o.axis,d,!0).hi+1,t?0:ji(e,c,o.getPixelForValue(d),!0).hi+1),r,i)-r:s=i-r}return{start:r,count:s}}function ZI(n){let{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;let s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),s}var Rg=n=>n===0||n===1,bO=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*qe/t)),wO=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*qe/t)+1,Tc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ct)+1,easeOutSine:n=>Math.sin(n*ct),easeInOutSine:n=>-.5*(Math.cos(He*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Rg(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Rg(n)?n:bO(n,.075,.3),easeOutElastic:n=>Rg(n)?n:wO(n,.075,.3),easeInOutElastic(n){return Rg(n)?n:n<.5?.5*bO(n*2,.1125,.45):.5+.5*wO(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Tc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Tc.easeInBounce(n*2)*.5:Tc.easeOutBounce(n*2-1)*.5+.5};function JI(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function XI(n){return JI(n)?n:new Gu(n)}function LI(n){return JI(n)?n:new Gu(n).saturate(.5).darken(.1).hexString()}var q8=["x","y","borderWidth","radius","tension"],W8=["color","borderColor","backgroundColor"];function G8(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:W8},numbers:{type:"number",properties:q8}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function K8(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var IO=new Map;function Q8(n,e){e=e||{};let t=n+JSON.stringify(e),i=IO.get(t);return i||(i=new Intl.NumberFormat(n,e),IO.set(t,i)),i}function kc(n,e,t){return Q8(e,t).format(n)}var UO={values(n){return ze(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let i=this.chart.options.locale,r,s=n;if(t.length>1){let l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(r="scientific"),s=Y8(n,t)}let o=Ar(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),kc(n,i,c)},logarithmic(n,e,t){if(n===0)return"0";let i=t[e].significand||n/Math.pow(10,Math.floor(Ar(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?UO.numeric.call(this,n,e,t):""}};function Y8(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var Ju={formatters:UO};function Z8(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ju.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var Cs=Object.create(null),zg=Object.create(null);function Qu(n,e){if(!e)return n;let t=e.split(".");for(let i=0,r=t.length;i<r;++i){let s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function VI(n,e,t){return typeof e=="string"?Mc(Qu(n,e),t):Mc(Qu(n,""),e)}var jI=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>LI(r.backgroundColor),this.hoverBorderColor=(i,r)=>LI(r.borderColor),this.hoverColor=(i,r)=>LI(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return VI(this,e,t)}get(e){return Qu(this,e)}describe(e,t){return VI(zg,e,t)}override(e,t){return VI(Cs,e,t)}route(e,t,i,r){let s=Qu(this,e),o=Qu(this,i),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],l=o[r];return me(c)?Object.assign({},l,c):ae(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}},Ge=new jI({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[G8,K8,Z8]);function J8(n){return!n||Ce(n.size)||Ce(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Yu(n,e,t,i,r){let s=e[r];return s||(s=e[r]=n.measureText(r).width,t.push(r)),s>i&&(i=s),i}function $O(n,e,t,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0,a=t.length,c,l,d,h,p;for(c=0;c<a;c++)if(h=t[c],h!=null&&!ze(h))o=Yu(n,r,s,o,h);else if(ze(h))for(l=0,d=h.length;l<d;l++)p=h[l],p!=null&&!ze(p)&&(o=Yu(n,r,s,o,p));n.restore();let g=s.length/2;if(g>t.length){for(c=0;c<g;c++)delete r[s[c]];s.splice(0,g)}return o}function Ds(n,e,t){let i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function eE(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function Hg(n,e,t,i){tE(n,e,t,i,null)}function tE(n,e,t,i,r){let s,o,a,c,l,d,h,p,g=e.pointStyle,y=e.rotation,v=e.radius,_=(y||0)*z8;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(_),n.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),n.restore();return}if(!(isNaN(v)||v<=0)){switch(n.beginPath(),g){default:r?n.ellipse(t,i,r/2,v,0,0,qe):n.arc(t,i,v,0,qe),n.closePath();break;case"triangle":d=r?r/2:v,n.moveTo(t+Math.sin(_)*d,i-Math.cos(_)*v),_+=_O,n.lineTo(t+Math.sin(_)*d,i-Math.cos(_)*v),_+=_O,n.lineTo(t+Math.sin(_)*d,i-Math.cos(_)*v),n.closePath();break;case"rectRounded":l=v*.516,c=v-l,o=Math.cos(_+Vo)*c,h=Math.cos(_+Vo)*(r?r/2-l:c),a=Math.sin(_+Vo)*c,p=Math.sin(_+Vo)*(r?r/2-l:c),n.arc(t-h,i-a,l,_-He,_-ct),n.arc(t+p,i-o,l,_-ct,_),n.arc(t+h,i+a,l,_,_+ct),n.arc(t-p,i+o,l,_+ct,_+He),n.closePath();break;case"rect":if(!y){c=Math.SQRT1_2*v,d=r?r/2:c,n.rect(t-d,i-c,2*d,2*c);break}_+=Vo;case"rectRot":h=Math.cos(_)*(r?r/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,p=Math.sin(_)*(r?r/2:v),n.moveTo(t-h,i-a),n.lineTo(t+p,i-o),n.lineTo(t+h,i+a),n.lineTo(t-p,i+o),n.closePath();break;case"crossRot":_+=Vo;case"cross":h=Math.cos(_)*(r?r/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,p=Math.sin(_)*(r?r/2:v),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+p,i-o),n.lineTo(t-p,i+o);break;case"star":h=Math.cos(_)*(r?r/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,p=Math.sin(_)*(r?r/2:v),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+p,i-o),n.lineTo(t-p,i+o),_+=Vo,h=Math.cos(_)*(r?r/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,p=Math.sin(_)*(r?r/2:v),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+p,i-o),n.lineTo(t-p,i+o);break;case"line":o=r?r/2:Math.cos(_)*v,a=Math.sin(_)*v,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(_)*(r?r/2:v),i+Math.sin(_)*v);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Bi(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Xu(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function ed(n){n.restore()}function zO(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){let s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function HO(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function X8(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Ce(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function eq(n,e,t,i,r){if(r.strikethrough||r.underline){let s=n.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=t-s.actualBoundingBoxAscent,l=t+s.actualBoundingBoxDescent,d=r.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,d),n.lineTo(a,d),n.stroke()}}function tq(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Ss(n,e,t,i,r,s={}){let o=ze(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="",c,l;for(n.save(),n.font=r.string,X8(n,s),c=0;c<o.length;++c)l=o[c],s.backdrop&&tq(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Ce(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(l,t,i,s.maxWidth)),n.fillText(l,t,i,s.maxWidth),eq(n,t,i,l,s),i+=Number(r.lineHeight);n.restore()}function Fc(n,e){let{x:t,y:i,w:r,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*He,He,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,He,ct,!0),n.lineTo(t+r-o.bottomRight,i+s),n.arc(t+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,ct,0,!0),n.lineTo(t+r,i+o.topRight),n.arc(t+r-o.topRight,i+o.topRight,o.topRight,0,-ct,!0),n.lineTo(t+o.topLeft,i)}var nq=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,iq=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function rq(n,e){let t=(""+n).match(nq);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var sq=n=>+n||0;function qg(n,e){let t={},i=me(e),r=i?Object.keys(e):e,s=me(n)?i?o=>ae(n[o],n[e[o]]):o=>n[o]:()=>n;for(let o of r)t[o]=sq(s(o));return t}function nE(n){return qg(n,{top:"y",right:"x",bottom:"y",left:"x"})}function xs(n){return qg(n,["topLeft","topRight","bottomLeft","bottomRight"])}function jt(n){let e=nE(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function bt(n,e){n=n||{},e=e||Ge.font;let t=ae(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=ae(n.style,e.style);i&&!(""+i).match(iq)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let r={family:ae(n.family,e.family),lineHeight:rq(ae(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:ae(n.weight,e.weight),string:""};return r.string=J8(r),r}function Lc(n,e,t,i){let r=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),t!==void 0&&ze(a)&&(a=a[t%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function qO(n,e,t){let{min:i,max:r}=n,s=BI(e,(r-i)/2),o=(a,c)=>t&&a===0?0:a+c;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Rr(n,e){return Object.assign(Object.create(n),e)}function Wg(n,e=[""],t,i,r=()=>n[0]){let s=t||n;typeof i>"u"&&(i=KO("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Wg([a,...n],e,s,i)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return WO(a,c,()=>fq(c,e,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return CO(a).includes(c)},ownKeys(a){return CO(a)},set(a,c,l){let d=a._storage||(a._storage=r());return a[c]=d[c]=l,delete a._keys,!0}})}function Bo(n,e,t,i){let r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:iE(n,i),setContext:s=>Bo(n,s,t,i),override:s=>Bo(n.override(s),e,t,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return WO(s,o,()=>aq(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function iE(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:Mr(t)?t:()=>t,isIndexable:Mr(i)?i:()=>i}}var oq=(n,e)=>n?n+jg(e):e,rE=(n,e)=>me(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function WO(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let i=t();return n[e]=i,i}function aq(n,e,t){let{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n,a=i[e];return Mr(a)&&o.isScriptable(e)&&(a=cq(e,a,n,t)),ze(a)&&a.length&&(a=lq(e,a,n,o.isIndexable)),rE(e,a)&&(a=Bo(a,r,s&&s[e],o)),a}function cq(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(s,o||i);return a.delete(n),rE(n,c)&&(c=sE(r._scopes,r,n,c)),c}function lq(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(me(e[0])){let c=e,l=r._scopes.filter(d=>d!==c);e=[];for(let d of c){let h=sE(l,r,n,d);e.push(Bo(h,s,o&&o[n],a))}}return e}function GO(n,e,t){return Mr(n)?n(e,t):n}var uq=(n,e)=>n===!0?e:typeof n=="string"?Pr(e,n):void 0;function dq(n,e,t,i,r){for(let s of e){let o=uq(t,s);if(o){n.add(o);let a=GO(o._fallback,t,r);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function sE(n,e,t,i){let r=e._rootScopes,s=GO(e._fallback,t,i),o=[...n,...r],a=new Set;a.add(i);let c=EO(a,o,t,s||t,i);return c===null||typeof s<"u"&&s!==t&&(c=EO(a,o,s,c,i),c===null)?!1:Wg(Array.from(a),[""],r,s,()=>hq(e,t,i))}function EO(n,e,t,i,r){for(;t;)t=dq(n,e,t,i,r);return t}function hq(n,e,t){let i=n._getTarget();e in i||(i[e]={});let r=i[e];return ze(r)&&me(t)?t:r||{}}function fq(n,e,t,i){let r;for(let s of e)if(r=KO(oq(s,n),t),typeof r<"u")return rE(n,r)?sE(t,i,n,r):r}function KO(n,e){for(let t of e){if(!t)continue;let i=t[n];if(typeof i<"u")return i}}function CO(n){let e=n._keys;return e||(e=n._keys=pq(n._scopes)),e}function pq(n){let e=new Set;for(let t of n)for(let i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function oE(n,e,t,i){let{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i),a,c,l,d;for(a=0,c=i;a<c;++a)l=a+t,d=e[l],o[a]={r:r.parse(Pr(d,s),l)};return o}var gq=Number.EPSILON||1e-14,Ac=(n,e)=>e<n.length&&!n[e].skip&&n[e],QO=n=>n==="x"?"y":"x";function mq(n,e,t,i){let r=n.skip?e:n,s=e,o=t.skip?e:t,a=Lg(s,r),c=Lg(o,s),l=a/(a+c),d=c/(a+c);l=isNaN(l)?0:l,d=isNaN(d)?0:d;let h=i*l,p=i*d;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+p*(o.x-r.x),y:s.y+p*(o.y-r.y)}}}function yq(n,e,t){let i=n.length,r,s,o,a,c,l=Ac(n,0);for(let d=0;d<i-1;++d)if(c=l,l=Ac(n,d+1),!(!c||!l)){if(Oc(e[d],0,gq)){t[d]=t[d+1]=0;continue}r=t[d]/e[d],s=t[d+1]/e[d],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[d]=r*o*e[d],t[d+1]=s*o*e[d])}}function vq(n,e,t="x"){let i=QO(t),r=n.length,s,o,a,c=Ac(n,0);for(let l=0;l<r;++l){if(o=a,a=c,c=Ac(n,l+1),!a)continue;let d=a[t],h=a[i];o&&(s=(d-o[t])/3,a[`cp1${t}`]=d-s,a[`cp1${i}`]=h-s*e[l]),c&&(s=(c[t]-d)/3,a[`cp2${t}`]=d+s,a[`cp2${i}`]=h+s*e[l])}}function _q(n,e="x"){let t=QO(e),i=n.length,r=Array(i).fill(0),s=Array(i),o,a,c,l=Ac(n,0);for(o=0;o<i;++o)if(a=c,c=l,l=Ac(n,o+1),!!c){if(l){let d=l[e]-c[e];r[o]=d!==0?(l[t]-c[t])/d:0}s[o]=a?l?li(r[o-1])!==li(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}yq(n,r,s),vq(n,s,e)}function Og(n,e,t){return Math.max(Math.min(n,t),e)}function bq(n,e){let t,i,r,s,o,a=Bi(n[0],e);for(t=0,i=n.length;t<i;++t)o=s,s=a,a=t<i-1&&Bi(n[t+1],e),s&&(r=n[t],o&&(r.cp1x=Og(r.cp1x,e.left,e.right),r.cp1y=Og(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Og(r.cp2x,e.left,e.right),r.cp2y=Og(r.cp2y,e.top,e.bottom)))}function YO(n,e,t,i,r){let s,o,a,c;if(e.spanGaps&&(n=n.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")_q(n,r);else{let l=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],c=mq(l,a,n[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&bq(n,t)}function Gg(){return typeof window<"u"&&typeof document<"u"}function Kg(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Vg(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}var Qg=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function wq(n,e){return Qg(n).getPropertyValue(e)}var Iq=["top","right","bottom","left"];function jo(n,e,t){let i={};t=t?"-"+t:"";for(let r=0;r<4;r++){let s=Iq[r];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var Eq=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Cq(n,e){let t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:s}=i,o=!1,a,c;if(Eq(r,s,n.target))a=r,c=s;else{let l=e.getBoundingClientRect();a=i.clientX-l.left,c=i.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function Ts(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:i}=e,r=Qg(t),s=r.boxSizing==="border-box",o=jo(r,"padding"),a=jo(r,"border","width"),{x:c,y:l,box:d}=Cq(n,t),h=o.left+(d&&a.left),p=o.top+(d&&a.top),{width:g,height:y}=e;return s&&(g-=o.width+a.width,y-=o.height+a.height),{x:Math.round((c-h)/g*t.width/i),y:Math.round((l-p)/y*t.height/i)}}function Dq(n,e,t){let i,r;if(e===void 0||t===void 0){let s=n&&Kg(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{let o=s.getBoundingClientRect(),a=Qg(s),c=jo(a,"border","width"),l=jo(a,"padding");e=o.width-l.width-c.width,t=o.height-l.height-c.height,i=Vg(a.maxWidth,s,"clientWidth"),r=Vg(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||Fg,maxHeight:r||Fg}}var Ng=n=>Math.round(n*10)/10;function ZO(n,e,t,i){let r=Qg(n),s=jo(r,"margin"),o=Vg(r.maxWidth,n,"clientWidth")||Fg,a=Vg(r.maxHeight,n,"clientHeight")||Fg,c=Dq(n,e,t),{width:l,height:d}=c;if(r.boxSizing==="content-box"){let p=jo(r,"border","width"),g=jo(r,"padding");l-=g.width+p.width,d-=g.height+p.height}return l=Math.max(0,l-s.width),d=Math.max(0,i?l/i:d-s.height),l=Ng(Math.min(l,o,c.maxWidth)),d=Ng(Math.min(d,a,c.maxHeight)),l&&!d&&(d=Ng(l/2)),(e!==void 0||t!==void 0)&&i&&c.height&&d>c.height&&(d=c.height,l=Ng(Math.floor(d*i))),{width:l,height:d}}function aE(n,e,t){let i=e||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var JO=function(){let n=!1;try{let e={get passive(){return n=!0,!1}};Gg()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function cE(n,e){let t=wq(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Es(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function XO(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function eN(n,e,t,i){let r={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=Es(n,r,t),a=Es(r,s,t),c=Es(s,e,t),l=Es(o,a,t),d=Es(a,c,t);return Es(l,d,t)}var Sq=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},xq=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function $o(n,e,t){return n?Sq(e,t):xq()}function lE(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function uE(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function tN(n){return n==="angle"?{between:Nc,compare:H8,normalize:un}:{between:$i,compare:(e,t)=>e-t,normalize:e=>e}}function DO({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function Tq(n,e,t){let{property:i,start:r,end:s}=t,{between:o,normalize:a}=tN(i),c=e.length,{start:l,end:d,loop:h}=n,p,g;if(h){for(l+=c,d+=c,p=0,g=c;p<g&&o(a(e[l%c][i]),r,s);++p)l--,d--;l%=c,d%=c}return d<l&&(d+=c),{start:l,end:d,loop:h,style:n.style}}function dE(n,e,t){if(!t)return[n];let{property:i,start:r,end:s}=t,o=e.length,{compare:a,between:c,normalize:l}=tN(i),{start:d,end:h,loop:p,style:g}=Tq(n,e,t),y=[],v=!1,_=null,T,P,N,j=()=>c(r,N,T)&&a(r,N)!==0,L=()=>a(s,T)===0||c(s,N,T),k=()=>v||j(),C=()=>!v||L();for(let w=d,I=d;w<=h;++w)P=e[w%o],!P.skip&&(T=l(P[i]),T!==N&&(v=c(T,r,s),_===null&&k()&&(_=a(T,r)===0?w:I),_!==null&&C()&&(y.push(DO({start:_,end:w,loop:p,count:o,style:g})),_=null),I=w,N=T));return _!==null&&y.push(DO({start:_,end:h,loop:p,count:o,style:g})),y}function hE(n,e){let t=[],i=n.segments;for(let r=0;r<i.length;r++){let s=dE(i[r],n.points,e);s.length&&t.push(...s)}return t}function Mq(n,e,t,i){let r=0,s=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&n[s%e].skip;)s--;return s%=e,{start:r,end:s}}function Aq(n,e,t,i){let r=n.length,s=[],o=e,a=n[e],c;for(c=e+1;c<=t;++c){let l=n[c%r];l.skip||l.stop?a.skip||(i=!1,s.push({start:e%r,end:(c-1)%r,loop:i}),e=o=l.stop?c:null):(o=c,a.skip&&(e=c)),a=l}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function nN(n,e){let t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];let s=!!n._loop,{start:o,end:a}=Mq(t,r,s,i);if(i===!0)return SO(n,[{start:o,end:a,loop:s}],t,e);let c=a<o?a+r:a,l=!!n._fullLoop&&o===0&&a===r-1;return SO(n,Aq(t,o,c,l),t,e)}function SO(n,e,t,i){return!i||!i.setContext||!t?e:Pq(n,e,t,i)}function Pq(n,e,t,i){let r=n._chart.getContext(),s=xO(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,c=t.length,l=[],d=s,h=e[0].start,p=h;function g(y,v,_,T){let P=a?-1:1;if(y!==v){for(y+=c;t[y%c].skip;)y-=P;for(;t[v%c].skip;)v+=P;y%c!==v%c&&(l.push({start:y%c,end:v%c,loop:_,style:T}),d=T,h=v%c)}}for(let y of e){h=a?h:y.start;let v=t[h%c],_;for(p=h+1;p<=y.end;p++){let T=t[p%c];_=xO(i.setContext(Rr(r,{type:"segment",p0:v,p1:T,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),Rq(_,d)&&g(h,p-1,y.loop,d),v=T,d=_}h<p-1&&g(h,p-1,y.loop,d)}return l}function xO(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Rq(n,e){if(!e)return!1;let t=[],i=function(r,s){return JI(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}var EE=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){let s=t.listeners[r],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=KI.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;let s=i.items,o=s.length-1,a=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let i=t.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},Or=new EE,iN="transparent",Oq={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let i=XI(n||iN),r=i.valid&&XI(e||iN);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}},CE=class{constructor(e,t,i,r){let s=t[i];r=Lc([e.to,r,s,e.from]);let o=Lc([e.from,s,r]);this._active=!0,this._fn=e.fn||Oq[e.type||typeof o],this._easing=Tc[e.easing]||Tc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);let r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Lc([e.to,t,r,e.from]),this._from=Lc([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to,c;if(this._active=s!==a&&(o||t<i),!this._active){this._target[r]=a,this._notify(!0);return}if(t<0){this._target[r]=s;return}c=t/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(s,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){let t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}},sm=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!me(e))return;let t=Object.keys(Ge.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{let s=e[r];if(!me(s))return;let o={};for(let a of t)o[a]=s[a];(ze(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){let i=t.options,r=kq(e,i);if(!r)return[];let s=this._createAnimations(r,i);return i.$shared&&Nq(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){let i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now(),c;for(c=o.length-1;c>=0;--c){let l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){r.push(...this._animateOptions(e,t));continue}let d=t[l],h=s[l],p=i.get(l);if(h)if(p&&h.active()){h.update(p,d,a);continue}else h.cancel();if(!p||!p.duration){e[l]=d;continue}s[l]=h=new CE(p,e,l,d),r.push(h)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let i=this._createAnimations(e,t);if(i.length)return Or.add(this._chart,i),!0}};function Nq(n,e){let t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){let s=n[i[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function kq(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function rN(n,e){let t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function Fq(n,e,t){if(t===!1)return!1;let i=rN(n,t),r=rN(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function Lq(n){let e,t,i,r;return me(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function ik(n,e){let t=[],i=n._getSortedDatasetMetas(e),r,s;for(r=0,s=i.length;r<s;++r)t.push(i[r].index);return t}function sN(n,e,t,i={}){let r=n.keys,s=i.mode==="single",o,a,c,l;if(e===null)return;let d=!1;for(o=0,a=r.length;o<a;++o){if(c=+r[o],c===t){if(d=!0,i.all)continue;break}l=n.values[c],nt(l)&&(s||e===0||li(e)===li(l))&&(e+=l)}return!d&&!i.all?0:e}function Vq(n,e){let{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),c,l,d;for(c=0,l=o.length;c<l;++c)d=o[c],a[c]={[r]:d,[s]:n[d]};return a}function fE(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function jq(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function Bq(n){let{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function Uq(n,e,t){let i=n[e]||(n[e]={});return i[t]||(i[t]={})}function oN(n,e,t,i){for(let r of e.getMatchingVisibleMetas(i).reverse()){let s=n[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function aN(n,e){let{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=i,c=s.axis,l=o.axis,d=jq(s,o,i),h=e.length,p;for(let g=0;g<h;++g){let y=e[g],{[c]:v,[l]:_}=y,T=y._stacks||(y._stacks={});p=T[l]=Uq(r,d,v),p[a]=_,p._top=oN(p,o,!0,i.type),p._bottom=oN(p,o,!1,i.type);let P=p._visualValues||(p._visualValues={});P[a]=_}}function pE(n,e){let t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function $q(n,e){return Rr(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function zq(n,e,t){return Rr(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function td(n,e){let t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(let r of e){let s=r._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}var gE=n=>n==="reset"||n==="none",cN=(n,e)=>e?n:Object.assign({},n),Hq=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:ik(t,!0),values:null},As=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=fE(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&td(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(p,g,y,v)=>p==="x"?g:p==="r"?v:y,o=i.xAxisID=ae(r.xAxisID,pE(t,"x")),a=i.yAxisID=ae(r.yAxisID,pE(t,"y")),c=i.rAxisID=ae(r.rAxisID,pE(t,"r")),l=i.indexAxis,d=i.iAxisID=s(l,o,a,c),h=i.vAxisID=s(l,a,o,c);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(c),i.iScale=this.getScaleForId(d),i.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&WI(this._data,this),t._stacked&&td(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),r=this._data;if(me(i)){let s=this._cachedMeta;this._data=Vq(i,s)}else if(r!==i){if(r){WI(r,this);let s=this._cachedMeta;td(s),s._parsed=[]}i&&Object.isExtensible(i)&&VO(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,r=this.getDataset(),s=!1;this._dataCheck();let o=i._stacked;i._stacked=fE(i.vScale,i),i.stack!==r.stack&&(s=!0,td(i),i.stack=r.stack),this._resyncElements(t),(s||o!==i._stacked)&&(aN(this,i._parsed),i._stacked=fE(i.vScale,i))}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,c=o.axis,l=t===0&&i===s.length?!0:r._sorted,d=t>0&&r._parsed[t-1],h,p,g;if(this._parsing===!1)r._parsed=s,r._sorted=!0,g=s;else{ze(s[t])?g=this.parseArrayData(r,s,t,i):me(s[t])?g=this.parseObjectData(r,s,t,i):g=this.parsePrimitiveData(r,s,t,i);let y=()=>p[c]===null||d&&p[c]<d[c];for(h=0;h<i;++h)r._parsed[h+t]=p=g[h],l&&(y()&&(l=!1),d=p);r._sorted=l}a&&aN(this,g)}parsePrimitiveData(t,i,r,s){let{iScale:o,vScale:a}=t,c=o.axis,l=a.axis,d=o.getLabels(),h=o===a,p=new Array(s),g,y,v;for(g=0,y=s;g<y;++g)v=g+r,p[g]={[c]:h||o.parse(d[v],v),[l]:a.parse(i[v],v)};return p}parseArrayData(t,i,r,s){let{xScale:o,yScale:a}=t,c=new Array(s),l,d,h,p;for(l=0,d=s;l<d;++l)h=l+r,p=i[h],c[l]={x:o.parse(p[0],h),y:a.parse(p[1],h)};return c}parseObjectData(t,i,r,s){let{xScale:o,yScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,d=new Array(s),h,p,g,y;for(h=0,p=s;h<p;++h)g=h+r,y=i[g],d[h]={x:o.parse(Pr(y,c),g),y:a.parse(Pr(y,l),g)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,r){let s=this.chart,o=this._cachedMeta,a=i[t.axis],c={keys:ik(s,!0),values:i._stacks[t.axis]._visualValues};return sN(c,a,o.index,{mode:r})}updateRangeFromParsed(t,i,r,s){let o=r[i.axis],a=o===null?NaN:o,c=s&&r._stacks[i.axis];s&&c&&(s.values=c,a=sN(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,i){let r=this._cachedMeta,s=r._parsed,o=r._sorted&&t===r.iScale,a=s.length,c=this._getOtherScale(t),l=Hq(i,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:p}=Bq(c),g,y;function v(){y=s[g];let _=y[c.axis];return!nt(y[t.axis])||h>_||p<_}for(g=0;g<a&&!(!v()&&(this.updateRangeFromParsed(d,t,y,l),o));++g);if(o){for(g=a-1;g>=0;--g)if(!v()){this.updateRangeFromParsed(d,t,y,l);break}}return d}getAllParsedValues(t){let i=this._cachedMeta._parsed,r=[],s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][t.axis],nt(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(t);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=Lq(ae(this.options.clip,Fq(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,r=this._cachedMeta,s=r.data||[],o=i.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||s.length-c,d=this.options.drawActiveElementsOnTop,h;for(r.dataset&&r.dataset.draw(t,o,c,l),h=c;h<c+l;++h){let p=s[h];p.hidden||(p.active&&d?a.push(p):p.draw(t,o))}for(h=0;h<a.length;++h)a[h].draw(t,o)}getStyle(t,i){let r=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,i,r){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];o=a.$context||(a.$context=zq(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=$q(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",r){let s=i==="active",o=this._cachedDataOpts,a=t+"-"+i,c=o[a],l=this.enableOptionSharing&&Rc(r);if(c)return cN(c,l);let d=this.chart.config,h=d.datasetElementScopeKeys(this._type,t),p=s?[`${t}Hover`,"hover",t,""]:[t,""],g=d.getOptionScopes(this.getDataset(),h),y=Object.keys(Ge.elements[t]),v=()=>this.getContext(r,s,i),_=d.resolveNamedOptions(g,y,v,p);return _.$shared&&(_.$shared=l,o[a]=Object.freeze(cN(_,l))),_}_resolveAnimations(t,i,r){let s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,c=o[a];if(c)return c;let l;if(s.options.animation!==!1){let h=this.chart.config,p=h.datasetAnimationScopeKeys(this._type,i),g=h.getOptionScopes(this.getDataset(),p);l=h.createResolver(g,this.getContext(t,r,i))}let d=new sm(s,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||gE(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let r=this.resolveDataElementOptions(t,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(t,i,r,s){gE(s)?Object.assign(t,r):this._resolveAnimations(i,s).update(t,r)}updateSharedOptions(t,i,r){t&&!gE(i)&&this._resolveAnimations(void 0,i).update(t,r)}_setStyle(t,i,r,s){t.active=s;let o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,i,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,r=this._cachedMeta.data;for(let[c,l,d]of this._syncList)this[c](l,d);this._syncList=[];let s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,i,r=!0){let s=this._cachedMeta,o=s.data,a=t+i,c,l=d=>{for(d.length+=i,c=d.length-1;c>=a;c--)d[c]=d[c-i]};for(l(o),c=t;c<a;++c)o[c]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,i),r&&this.updateElements(o,t,i,"reset")}updateElements(t,i,r,s){}_removeElements(t,i){let r=this._cachedMeta;if(this._parsing){let s=r._parsed.splice(t,i);r._stacked&&td(r,s)}r.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,r,s]=t;this[i](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function qq(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),i=[];for(let r=0,s=t.length;r<s;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=GI(i.sort((r,s)=>r-s))}return n._cache.$bar}function Wq(n){let e=n.iScale,t=qq(e,n.type),i=e._length,r,s,o,a,c=()=>{o===32767||o===-32768||(Rc(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=t.length;r<s;++r)o=e.getPixelForValue(t[r]),c();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),c();return i}function Gq(n,e,t,i){let r=t.barThickness,s,o;return Ce(r)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[n]-s/2}}function Kq(n,e,t,i){let r=e.pixels,s=r[n],o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null,c=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);let l=s-(s-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/i,ratio:t.barPercentage,start:l}}function Qq(n,e,t,i){let r=t.parse(n[0],i),s=t.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s),c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[t.axis]=l,e._custom={barStart:c,barEnd:l,start:r,end:s,min:o,max:a}}function rk(n,e,t,i){return ze(n)?Qq(n,e,t,i):e[t.axis]=t.parse(n,i),e}function lN(n,e,t,i){let r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,c=[],l,d,h,p;for(l=t,d=t+i;l<d;++l)p=e[l],h={},h[r.axis]=a||r.parse(o[l],l),c.push(rk(p,h,s,l));return c}function mE(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function Yq(n,e,t){return n!==0?li(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function Zq(n){let e,t,i,r,s;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:t,end:i,reverse:e,top:r,bottom:s}}function Jq(n,e,t,i){let r=e.borderSkipped,s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:c,top:l,bottom:d}=Zq(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=l:(t._bottom||0)===i?r=d:(s[uN(d,o,a,c)]=!0,r=l)),s[uN(r,o,a,c)]=!0,n.borderSkipped=s}function uN(n,e,t,i){return i?(n=Xq(n,e,t),n=dN(n,t,e)):n=dN(n,e,t),n}function Xq(n,e,t){return n===e?t:n===t?e:n}function dN(n,e,t){return n==="start"?e:n==="end"?t:n}function eW(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var tW=(()=>{class n extends As{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,i,r,s){return lN(t,i,r,s)}parseArrayData(t,i,r,s){return lN(t,i,r,s)}parseObjectData(t,i,r,s){let{iScale:o,vScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,d=o.axis==="x"?c:l,h=a.axis==="x"?c:l,p=[],g,y,v,_;for(g=r,y=r+s;g<y;++g)_=i[g],v={},v[o.axis]=o.parse(Pr(_,d),g),p.push(rk(Pr(_,h),v,a,g));return p}updateRangeFromParsed(t,i,r,s){super.updateRangeFromParsed(t,i,r,s);let o=r._custom;o&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let i=this._cachedMeta,{iScale:r,vScale:s}=i,o=this.getParsed(t),a=o._custom,c=mE(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,r,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),d=c.isHorizontal(),h=this._getRuler(),{sharedOptions:p,includeOptions:g}=this._getSharedOptions(i,s);for(let y=i;y<i+r;y++){let v=this.getParsed(y),_=o||Ce(v[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(y),T=this._calculateBarIndexPixels(y,h),P=(v._stacks||{})[c.axis],N={horizontal:d,base:_.base,enableBorderRadius:!P||mE(v._custom)||a===P._top||a===P._bottom,x:d?_.head:T.center,y:d?T.center:_.head,height:d?T.size:Math.abs(_.size),width:d?Math.abs(_.size):T.size};g&&(N.options=p||this.resolveDataElementOptions(y,t[y].active?"active":s));let j=N.options||t[y].options;Jq(N,j,P,a),eW(N,j,h.ratio),this.updateElement(t[y],y,N,s)}}_getStacks(t,i){let{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),o=r.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(i),l=c&&c[r.axis],d=h=>{let p=h._parsed.find(y=>y[r.axis]===l),g=p&&p[h.vScale.axis];if(Ce(g)||isNaN(g))return!0};for(let h of s)if(!(i!==void 0&&d(h))&&((o===!1||a.indexOf(h.stack)===-1||o===void 0&&h.stack===void 0)&&a.push(h.stack),h.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,r){let s=this._getStacks(t,r),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){let t=this.options,i=this._cachedMeta,r=i.iScale,s=[],o,a;for(o=0,a=i.data.length;o<a;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));let c=t.barThickness;return{min:c||Wq(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:i,_stacked:r,index:s},options:{base:o,minBarLength:a}}=this,c=o||0,l=this.getParsed(t),d=l._custom,h=mE(d),p=l[i.axis],g=0,y=r?this.applyStack(i,l,r):p,v,_;y!==p&&(g=y-p,y=p),h&&(p=d.barStart,y=d.barEnd-d.barStart,p!==0&&li(p)!==li(d.barEnd)&&(g=0),g+=p);let T=!Ce(o)&&!h?o:g,P=i.getPixelForValue(T);if(this.chart.getDataVisibility(t)?v=i.getPixelForValue(g+y):v=P,_=v-P,Math.abs(_)<a){_=Yq(_,i,c)*a,p===c&&(P-=_/2);let N=i.getPixelForDecimal(0),j=i.getPixelForDecimal(1),L=Math.min(N,j),k=Math.max(N,j);P=Math.max(Math.min(P,k),L),v=P+_,r&&!h&&(l._stacks[i.axis]._visualValues[s]=i.getValueForPixel(v)-i.getValueForPixel(P))}if(P===i.getPixelForValue(c)){let N=li(_)*i.getLineWidthForValue(c)/2;P+=N,_-=N}return{size:_,base:P,head:v,center:v+_/2}}_calculateBarIndexPixels(t,i){let r=i.scale,s=this.options,o=s.skipNull,a=ae(s.maxBarThickness,1/0),c,l;if(i.grouped){let d=o?this._getStackCount(t):i.stackCount,h=s.barThickness==="flex"?Kq(t,i,s,d):Gq(t,i,s,d),p=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);c=h.start+h.chunk*p+h.chunk/2,l=Math.min(a,h.chunk*h.ratio)}else c=r.getPixelForValue(this.getParsed(t)[r.axis],t),l=Math.min(a,i.min*i.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let t=this._cachedMeta,i=t.vScale,r=t.data,s=r.length,o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&!r[o].hidden&&r[o].draw(this._ctx)}}return n})(),nW=(()=>{class n extends As{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,r,s){let o=super.parsePrimitiveData(t,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+r).radius;return o}parseArrayData(t,i,r,s){let o=super.parseArrayData(t,i,r,s);for(let a=0;a<o.length;a++){let c=i[r+a];o[a]._custom=ae(c[2],this.resolveDataElementOptions(a+r).radius)}return o}parseObjectData(t,i,r,s){let o=super.parseObjectData(t,i,r,s);for(let a=0;a<o.length;a++){let c=i[r+a];o[a]._custom=ae(c&&c.r&&+c.r,this.resolveDataElementOptions(a+r).radius)}return o}getMaxOverflow(){let t=this._cachedMeta.data,i=0;for(let r=t.length-1;r>=0;--r)i=Math.max(i,t[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(t),c=s.getLabelForValue(a.x),l=o.getLabelForValue(a.y),d=a._custom;return{label:r[t]||"",value:"("+c+", "+l+(d?", "+d:"")+")"}}update(t){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:c}=this._cachedMeta,{sharedOptions:l,includeOptions:d}=this._getSharedOptions(i,s),h=a.axis,p=c.axis;for(let g=i;g<i+r;g++){let y=t[g],v=!o&&this.getParsed(g),_={},T=_[h]=o?a.getPixelForDecimal(.5):a.getPixelForValue(v[h]),P=_[p]=o?c.getBasePixel():c.getPixelForValue(v[p]);_.skip=isNaN(T)||isNaN(P),d&&(_.options=l||this.resolveDataElementOptions(g,y.active?"active":s),o&&(_.options.radius=0)),this.updateElement(y,g,_,s)}}resolveDataElementOptions(t,i){let r=this.getParsed(t),s=super.resolveDataElementOptions(t,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let o=s.radius;return i!=="active"&&(s.radius=0),s.radius+=ae(r&&r._custom,o),s}}return n})();function iW(n,e,t){let i=1,r=1,s=0,o=0;if(e<qe){let a=n,c=a+e,l=Math.cos(a),d=Math.sin(a),h=Math.cos(c),p=Math.sin(c),g=(N,j,L)=>Nc(N,a,c,!0)?1:Math.max(j,j*t,L,L*t),y=(N,j,L)=>Nc(N,a,c,!0)?-1:Math.min(j,j*t,L,L*t),v=g(0,l,h),_=g(ct,d,p),T=y(He,l,h),P=y(He+ct,d,p);i=(v-T)/2,r=(_-P)/2,s=-(v+T)/2,o=-(_+P)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}var HE=(()=>{class n extends As{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=t.legend.options;return i.labels.map((o,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}}};constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){let r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let o=l=>+r[l];if(me(r[t])){let{key:l="value"}=this._parsing;o=d=>+Pr(r[d],l)}let a,c;for(a=t,c=t+i;a<c;++a)s._parsed[a]=o(a)}}_getRotation(){return Un(this.options.rotation-90)}_getCircumference(){return Un(this.options.circumference)}_getRotationExtents(){let t=qe,i=-qe;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){let s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),a=s._getCircumference();t=Math.min(t,o),i=Math.max(i,o+a)}return{rotation:t,circumference:i-t}}update(t){let i=this.chart,{chartArea:r}=i,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,c=Math.max((Math.min(r.width,r.height)-a)/2,0),l=Math.min(MO(this.options.cutout,c),1),d=this._getRingWeight(this.index),{circumference:h,rotation:p}=this._getRotationExtents(),{ratioX:g,ratioY:y,offsetX:v,offsetY:_}=iW(p,h,l),T=(r.width-a)/g,P=(r.height-a)/y,N=Math.max(Math.min(T,P)/2,0),j=BI(this.options.radius,N),L=Math.max(j*l,0),k=(j-L)/this._getVisibleDatasetWeightTotal();this.offsetX=v*j,this.offsetY=_*j,s.total=this.calculateTotal(),this.outerRadius=j-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*d,0),this.updateElements(o,0,o.length,t)}_circumference(t,i){let r=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/qe)}updateElements(t,i,r,s){let o=s==="reset",a=this.chart,c=a.chartArea,d=a.options.animation,h=(c.left+c.right)/2,p=(c.top+c.bottom)/2,g=o&&d.animateScale,y=g?0:this.innerRadius,v=g?0:this.outerRadius,{sharedOptions:_,includeOptions:T}=this._getSharedOptions(i,s),P=this._getRotation(),N;for(N=0;N<i;++N)P+=this._circumference(N,o);for(N=i;N<i+r;++N){let j=this._circumference(N,o),L=t[N],k={x:h+this.offsetX,y:p+this.offsetY,startAngle:P,endAngle:P+j,circumference:j,outerRadius:v,innerRadius:y};T&&(k.options=_||this.resolveDataElementOptions(N,L.active?"active":s)),P+=j,this.updateElement(L,N,k,s)}}calculateTotal(){let t=this._cachedMeta,i=t.data,r=0,s;for(s=0;s<i.length;s++){let o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(t){let i=this._cachedMeta.total;return i>0&&!isNaN(t)?qe*(Math.abs(t)/i):0}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=kc(i._parsed[t],r.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let i=0,r=this.chart,s,o,a,c,l;if(!t){for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),t=a.data,c=a.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)l=c.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let r=0,s=t.length;r<s;++r){let o=this.resolveDataElementOptions(r);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(t){return Math.max(ae(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),rW=(()=>{class n extends As{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let i=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=i,a=this.chart._animationsDisabled,{start:c,count:l}=YI(i,s,a);this._drawStart=c,this._drawCount=l,ZI(i)&&(c=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;let d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:d},t),this.updateElements(s,c,l,t)}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:d}=this._cachedMeta,{sharedOptions:h,includeOptions:p}=this._getSharedOptions(i,s),g=a.axis,y=c.axis,{spanGaps:v,segment:_}=this.options,T=Uo(v)?v:Number.POSITIVE_INFINITY,P=this.chart._animationsDisabled||o||s==="none",N=i+r,j=t.length,L=i>0&&this.getParsed(i-1);for(let k=0;k<j;++k){let C=t[k],w=P?C:{};if(k<i||k>=N){w.skip=!0;continue}let I=this.getParsed(k),S=Ce(I[y]),x=w[g]=a.getPixelForValue(I[g],k),A=w[y]=o||S?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,I,l):I[y],k);w.skip=isNaN(x)||isNaN(A)||S,w.stop=k>0&&Math.abs(I[g]-L[g])>T,_&&(w.parsed=I,w.raw=d.data[k]),p&&(w.options=h||this.resolveDataElementOptions(k,C.active?"active":s)),P||this.updateElement(C,k,w,s),L=I}}getMaxOverflow(){let t=this._cachedMeta,i=t.dataset,r=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return r;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})(),sk=(()=>{class n extends As{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=t.legend.options;return i.labels.map((o,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=kc(i._parsed[t].r,r.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,i,r,s){return oE.bind(this)(t,i,r,s)}update(t){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){let t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((r,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){let t=this.chart,i=t.chartArea,r=t.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),a=Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0),c=(o-a)/t.getVisibleDatasetCount();this.outerRadius=o-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(t,i,r,s){let o=s==="reset",a=this.chart,l=a.options.animation,d=this._cachedMeta.rScale,h=d.xCenter,p=d.yCenter,g=d.getIndexAngle(0)-.5*He,y=g,v,_=360/this.countVisibleElements();for(v=0;v<i;++v)y+=this._computeAngle(v,s,_);for(v=i;v<i+r;v++){let T=t[v],P=y,N=y+this._computeAngle(v,s,_),j=a.getDataVisibility(v)?d.getDistanceFromCenterForValue(this.getParsed(v).r):0;y=N,o&&(l.animateScale&&(j=0),l.animateRotate&&(P=N=g));let L={x:h,y:p,innerRadius:0,outerRadius:j,startAngle:P,endAngle:N,options:this.resolveDataElementOptions(v,T.active?"active":s)};this.updateElement(T,v,L,s)}}countVisibleElements(){let t=this._cachedMeta,i=0;return t.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(t,i,r){return this.chart.getDataVisibility(t)?Un(this.resolveDataElementOptions(t,i).angle||r):0}}return n})(),sW=(()=>{class n extends HE{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),oW=(()=>{class n extends As{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let i=this._cachedMeta.vScale,r=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(t,i,r,s){return oE.bind(this)(t,i,r,s)}update(t){let i=this._cachedMeta,r=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(r.points=s,t!=="resize"){let a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);let c={_loop:!0,_fullLoop:o.length===s.length,options:a};this.updateElement(r,void 0,c,t)}this.updateElements(s,0,s.length,t)}updateElements(t,i,r,s){let o=this._cachedMeta.rScale,a=s==="reset";for(let c=i;c<i+r;c++){let l=t[c],d=this.resolveDataElementOptions(c,l.active?"active":s),h=o.getPointPositionForValue(c,this.getParsed(c).r),p=a?o.xCenter:h.x,g=a?o.yCenter:h.y,y={x:p,y:g,angle:h.angle,skip:isNaN(p)||isNaN(g),options:d};this.updateElement(l,c,y,s)}}}return n})(),aW=(()=>{class n extends As{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(t),c=s.getLabelForValue(a.x),l=o.getLabelForValue(a.y);return{label:r[t]||"",value:"("+c+", "+l+")"}}update(t){let i=this._cachedMeta,{data:r=[]}=i,s=this.chart._animationsDisabled,{start:o,count:a}=YI(i,r,s);if(this._drawStart=o,this._drawCount=a,ZI(i)&&(o=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:c,_dataset:l}=i;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!l._decimated,c.points=r;let d=this.resolveDatasetElementOptions(t);d.segment=this.options.segment,this.updateElement(c,void 0,{animated:!s,options:d},t)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(r,o,a,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:d}=this._cachedMeta,h=this.resolveDataElementOptions(i,s),p=this.getSharedOptions(h),g=this.includeOptions(s,p),y=a.axis,v=c.axis,{spanGaps:_,segment:T}=this.options,P=Uo(_)?_:Number.POSITIVE_INFINITY,N=this.chart._animationsDisabled||o||s==="none",j=i>0&&this.getParsed(i-1);for(let L=i;L<i+r;++L){let k=t[L],C=this.getParsed(L),w=N?k:{},I=Ce(C[v]),S=w[y]=a.getPixelForValue(C[y],L),x=w[v]=o||I?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,C,l):C[v],L);w.skip=isNaN(S)||isNaN(x)||I,w.stop=L>0&&Math.abs(C[y]-j[y])>P,T&&(w.parsed=C,w.raw=d.data[L]),g&&(w.options=p||this.resolveDataElementOptions(L,k.active?"active":s)),N||this.updateElement(k,L,w,s),j=C}this.updateSharedOptions(p,s,h)}getMaxOverflow(){let t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let c=0;for(let l=i.length-1;l>=0;--l)c=Math.max(c,i[l].size(this.resolveDataElementOptions(l))/2);return c>0&&c}let r=t.dataset,s=r.options&&r.options.borderWidth||0;if(!i.length)return s;let o=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,a)/2}}return n})(),cW=Object.freeze({__proto__:null,BarController:tW,BubbleController:nW,DoughnutController:HE,LineController:rW,PieController:sW,PolarAreaController:sk,RadarController:oW,ScatterController:aW});function zo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var DE=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return zo()}parse(){return zo()}format(){return zo()}add(){return zo()}diff(){return zo()}startOf(){return zo()}endOf(){return zo()}},lW={_date:DE};function uW(n,e,t,i){let{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){let c=a._reversePixels?kO:ji;if(i){if(r._sharedOptions){let l=s[0],d=typeof l.getRange=="function"&&l.getRange(e);if(d){let h=c(s,e,t-d),p=c(s,e,t+d);return{lo:h.lo,hi:p.hi}}}}else return c(s,e,t)}return{lo:0,hi:s.length-1}}function dd(n,e,t,i,r){let s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,c=s.length;a<c;++a){let{index:l,data:d}=s[a],{lo:h,hi:p}=uW(s[a],e,o,r);for(let g=h;g<=p;++g){let y=d[g];y.skip||i(y,l,g)}}}function dW(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){let s=e?Math.abs(i.x-r.x):0,o=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function yE(n,e,t,i,r){let s=[];return!r&&!n.isPointInArea(e)||dd(n,t,e,function(a,c,l){!r&&!Bi(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:c,index:l})},!0),s}function hW(n,e,t,i){let r=[];function s(o,a,c){let{startAngle:l,endAngle:d}=o.getProps(["startAngle","endAngle"],i),{angle:h}=qI(o,{x:e.x,y:e.y});Nc(h,l,d)&&r.push({element:o,datasetIndex:a,index:c})}return dd(n,t,e,s),r}function fW(n,e,t,i,r,s){let o=[],a=dW(t),c=Number.POSITIVE_INFINITY;function l(d,h,p){let g=d.inRange(e.x,e.y,r);if(i&&!g)return;let y=d.getCenterPoint(r);if(!(!!s||n.isPointInArea(y))&&!g)return;let _=a(e,y);_<c?(o=[{element:d,datasetIndex:h,index:p}],c=_):_===c&&o.push({element:d,datasetIndex:h,index:p})}return dd(n,t,e,l),o}function vE(n,e,t,i,r,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?hW(n,e,t,r):fW(n,e,t,i,r,s)}function hN(n,e,t,i,r){let s=[],o=t==="x"?"inXRange":"inYRange",a=!1;return dd(n,t,e,(c,l,d)=>{c[o]&&c[o](e[t],r)&&(s.push({element:c,datasetIndex:l,index:d}),a=a||c.inRange(e.x,e.y,r))}),i&&!a?[]:s}var pW={evaluateInteractionItems:dd,modes:{index(n,e,t,i){let r=Ts(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?yE(n,r,s,i,o):vE(n,r,s,!1,i,o),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let d=a[0].index,h=l.data[d];h&&!h.skip&&c.push({element:h,datasetIndex:l.index,index:d})}),c):[]},dataset(n,e,t,i){let r=Ts(e,n),s=t.axis||"xy",o=t.includeInvisible||!1,a=t.intersect?yE(n,r,s,i,o):vE(n,r,s,!1,i,o);if(a.length>0){let c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let d=0;d<l.length;++d)a.push({element:l[d],datasetIndex:c,index:d})}return a},point(n,e,t,i){let r=Ts(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return yE(n,r,s,i,o)},nearest(n,e,t,i){let r=Ts(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return vE(n,r,s,t.intersect,i,o)},x(n,e,t,i){let r=Ts(e,n);return hN(n,r,"x",t.intersect,i)},y(n,e,t,i){let r=Ts(e,n);return hN(n,r,"y",t.intersect,i)}}},ok=["left","top","right","bottom"];function nd(n,e){return n.filter(t=>t.pos===e)}function fN(n,e){return n.filter(t=>ok.indexOf(t.pos)===-1&&t.box.axis===e)}function id(n,e){return n.sort((t,i)=>{let r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function gW(n){let e=[],t,i,r,s,o,a;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function mW(n){let e={};for(let t of n){let{stack:i,pos:r,stackWeight:s}=t;if(!i||!ok.includes(r))continue;let o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function yW(n,e){let t=mW(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:c}=a.box,l=t[a.stack],d=l&&a.stackWeight/l.weight;a.horizontal?(a.width=d?d*i:c&&e.availableWidth,a.height=r):(a.width=i,a.height=d?d*r:c&&e.availableHeight)}return t}function vW(n){let e=gW(n),t=id(e.filter(l=>l.box.fullSize),!0),i=id(nd(e,"left"),!0),r=id(nd(e,"right")),s=id(nd(e,"top"),!0),o=id(nd(e,"bottom")),a=fN(e,"x"),c=fN(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:r.concat(c).concat(o).concat(a),chartArea:nd(e,"chartArea"),vertical:i.concat(r).concat(c),horizontal:s.concat(o).concat(a)}}function pN(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function ak(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function _W(n,e,t,i){let{pos:r,box:s}=t,o=n.maxPadding;if(!me(r)){t.size&&(n[r]-=t.size);let h=i[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?s.height:s.width),t.size=h.size/h.count,n[r]+=t.size}s.getPadding&&ak(o,s.getPadding());let a=Math.max(0,e.outerWidth-pN(o,n,"left","right")),c=Math.max(0,e.outerHeight-pN(o,n,"top","bottom")),l=a!==n.w,d=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:l,other:d}:{same:d,other:l}}function bW(n){let e=n.maxPadding;function t(i){let r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function wW(n,e){let t=e.maxPadding;function i(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function od(n,e,t,i){let r=[],s,o,a,c,l,d;for(s=0,o=n.length,l=0;s<o;++s){a=n[s],c=a.box,c.update(a.width||e.w,a.height||e.h,wW(a.horizontal,e));let{same:h,other:p}=_W(e,t,a,i);l|=h&&r.length,d=d||p,c.fullSize||r.push(a)}return l&&od(r,e,t,i)||d}function Yg(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function gN(n,e,t,i){let r=t.padding,{x:s,y:o}=e;for(let a of n){let c=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/l.weight||1;if(a.horizontal){let h=e.w*d,p=l.size||c.height;Rc(l.start)&&(o=l.start),c.fullSize?Yg(c,r.left,o,t.outerWidth-r.right-r.left,p):Yg(c,e.left+l.placed,o,h,p),l.start=o,l.placed+=h,o=c.bottom}else{let h=e.h*d,p=l.size||c.width;Rc(l.start)&&(s=l.start),c.fullSize?Yg(c,s,r.top,p,t.outerHeight-r.bottom-r.top):Yg(c,s,e.top+l.placed,p,h),l.start=s,l.placed+=h,s=c.right}}e.x=s,e.y=o}var Qt={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;let r=jt(n.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(t-r.height,0),a=vW(n.boxes),c=a.vertical,l=a.horizontal;Oe(n.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});let d=c.reduce((v,_)=>_.box.options&&_.box.options.display===!1?v:v+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/d,hBoxMaxHeight:o/2}),p=Object.assign({},r);ak(p,jt(i));let g=Object.assign({maxPadding:p,w:s,h:o,x:r.left,y:r.top},r),y=yW(c.concat(l),h);od(a.fullSize,g,h,y),od(c,g,h,y),od(l,g,h,y)&&od(c,g,h,y),bW(g),gN(a.leftAndTop,g,h,y),g.x+=g.w,g.y+=g.h,gN(a.rightAndBottom,g,h,y),n.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Oe(a.chartArea,v=>{let _=v.box;Object.assign(_,n.chartArea),_.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}},om=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}},SE=class extends om{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},im="$chartjs",IW={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},mN=n=>n===null||n==="";function EW(n,e){let t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[im]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",mN(r)){let s=cE(n,"width");s!==void 0&&(n.width=s)}if(mN(i))if(n.style.height==="")n.height=n.width/(e||2);else{let s=cE(n,"height");s!==void 0&&(n.height=s)}return n}var ck=JO?{passive:!0}:!1;function CW(n,e,t){n&&n.addEventListener(e,t,ck)}function DW(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,ck)}function SW(n,e){let t=IW[n.type]||n.type,{x:i,y:r}=Ts(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function am(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function xW(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||am(a.addedNodes,i),o=o&&!am(a.removedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function TW(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||am(a.removedNodes,i),o=o&&!am(a.addedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}var cd=new Map,yN=0;function lk(){let n=window.devicePixelRatio;n!==yN&&(yN=n,cd.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function MW(n,e){cd.size||window.addEventListener("resize",lk),cd.set(n,e)}function AW(n){cd.delete(n),cd.size||window.removeEventListener("resize",lk)}function PW(n,e,t){let i=n.canvas,r=i&&Kg(i);if(!r)return;let s=QI((a,c)=>{let l=r.clientWidth;t(a,c),l<r.clientWidth&&t()},window),o=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,d=c.contentRect.height;l===0&&d===0||s(l,d)});return o.observe(r),MW(n,s),o}function _E(n,e,t){t&&t.disconnect(),e==="resize"&&AW(n)}function RW(n,e,t){let i=n.canvas,r=QI(s=>{n.ctx!==null&&t(SW(s,n))},n);return CW(i,e,r),r}var xE=class extends om{acquireContext(e,t){let i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(EW(e,t),i):null}releaseContext(e){let t=e.canvas;if(!t[im])return!1;let i=t[im].initial;["height","width"].forEach(s=>{let o=i[s];Ce(o)?t.removeAttribute(s):t.setAttribute(s,o)});let r=i.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[im],!0}addEventListener(e,t,i){this.removeEventListener(e,t);let r=e.$proxies||(e.$proxies={}),o={attach:xW,detach:TW,resize:PW}[t]||RW;r[t]=o(e,t,i)}removeEventListener(e,t){let i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:_E,detach:_E,resize:_E}[t]||DW)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return ZO(e,t,i,r)}isAttached(e){let t=e&&Kg(e);return!!(t&&t.isConnected)}};function OW(n){return!Gg()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?SE:xE}var ui=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Uo(this.x)&&Uo(this.y)}getProps(e,t){let i=this.$animations;if(!t||!i)return this;let r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function NW(n,e){let t=n.options.ticks,i=kW(n),r=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?LW(e):[],o=s.length,a=s[0],c=s[o-1],l=[];if(o>r)return VW(e,l,s,o/r),l;let d=FW(s,e,r);if(o>0){let h,p,g=o>1?Math.round((c-a)/(o-1)):null;for(Zg(e,l,d,Ce(g)?0:a-g,a),h=0,p=o-1;h<p;h++)Zg(e,l,d,s[h],s[h+1]);return Zg(e,l,d,c,Ce(g)?e.length:c+g),l}return Zg(e,l,d),l}function kW(n){let e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function FW(n,e,t){let i=jW(n),r=e.length/t;if(!i)return Math.max(r,1);let s=RO(i);for(let o=0,a=s.length-1;o<a;o++){let c=s[o];if(c>r)return c}return Math.max(r,1)}function LW(n){let e=[],t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function VW(n,e,t,i){let r=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),r++,s=t[r*i])}function Zg(n,e,t,i,r){let s=ae(i,0),o=Math.min(ae(r,n.length),n.length),a=0,c,l,d;for(t=Math.ceil(t),r&&(c=r-i,t=c/Math.floor(c/t)),d=s;d<0;)a++,d=Math.round(s+a*t);for(l=Math.max(s,0);l<o;l++)l===d&&(e.push(n[l]),a++,d=Math.round(s+a*t))}function jW(n){let e=n.length,t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}var BW=n=>n==="left"?"right":n==="right"?"left":n,vN=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,_N=(n,e)=>Math.min(e||n,n);function bN(n,e){let t=[],i=n.length/e,r=n.length,s=0;for(;s<r;s+=i)t.push(n[Math.floor(s)]);return t}function UW(n,e,t){let i=n.ticks.length,r=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,a=1e-6,c=n.getPixelForTick(r),l;if(!(t&&(i===1?l=Math.max(c-s,o-c):e===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(r-1))/2,c+=r<e?l:-l,c<s-a||c>o+a)))return c}function $W(n,e){Oe(n,t=>{let i=t.gc,r=i.length/2,s;if(r>e){for(s=0;s<r;++s)delete t.data[i[s]];i.splice(0,r)}})}function rd(n){return n.drawTicks?n.tickLength:0}function wN(n,e){if(!n.display)return 0;let t=bt(n.font,e),i=jt(n.padding);return(ze(n.text)?n.text.length:1)*t.lineHeight+i.height}function zW(n,e){return Rr(n,{scale:e,type:"scale"})}function HW(n,e,t){return Rr(n,{tick:t,index:e,type:"tick"})}function qW(n,e,t){let i=$g(n);return(t&&e!=="right"||!t&&e==="right")&&(i=BW(i)),i}function WW(n,e,t,i){let{top:r,left:s,bottom:o,right:a,chart:c}=n,{chartArea:l,scales:d}=c,h=0,p,g,y,v=o-r,_=a-s;if(n.isHorizontal()){if(g=Vt(i,s,a),me(t)){let T=Object.keys(t)[0],P=t[T];y=d[T].getPixelForValue(P)+v-e}else t==="center"?y=(l.bottom+l.top)/2+v-e:y=vN(n,t,e);p=a-s}else{if(me(t)){let T=Object.keys(t)[0],P=t[T];g=d[T].getPixelForValue(P)-_+e}else t==="center"?g=(l.left+l.right)/2-_+e:g=vN(n,t,e);y=Vt(i,o,r),h=t==="left"?-ct:ct}return{titleX:g,titleY:y,maxWidth:p,rotation:h}}var qo=class n extends ui{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=dn(e,Number.POSITIVE_INFINITY),t=dn(t,Number.NEGATIVE_INFINITY),i=dn(i,Number.POSITIVE_INFINITY),r=dn(r,Number.NEGATIVE_INFINITY),{min:dn(e,i),max:dn(t,r),minDefined:nt(e),maxDefined:nt(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:t,max:i};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,e),r||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=r&&t>i?t:i,{min:dn(t,dn(i,t)),max:dn(i,dn(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Be(this.options.beforeUpdate,[this])}update(e,t,i){let{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=qO(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?bN(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=NW(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Be(this.options.afterUpdate,[this])}beforeSetDimensions(){Be(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Be(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Be(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Be(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Be(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Be(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Be(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,i=_N(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation,o=r,a,c,l;if(!this._isVisible()||!t.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}let d=this._getLabelSizes(),h=d.widest.width,p=d.highest.height,g=Mt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:g/(i-1),h+6>a&&(a=g/(i-(e.offset?.5:1)),c=this.maxHeight-rd(e.grid)-t.padding-wN(e.title,this.chart.options.font),l=Math.sqrt(h*h+p*p),o=Bg(Math.min(Math.asin(Mt((d.highest.height+6)/a,-1,1)),Math.asin(Mt(c/l,-1,1))-Math.asin(Mt(p/l,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Be(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Be(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let c=wN(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=rd(s)+c):(e.height=this.maxHeight,e.width=rd(s)+c),i.display&&this.ticks.length){let{first:l,last:d,widest:h,highest:p}=this._getLabelSizes(),g=i.padding*2,y=Un(this.labelRotation),v=Math.cos(y),_=Math.sin(y);if(a){let T=i.mirror?0:_*h.width+v*p.height;e.height=Math.min(this.maxHeight,e.height+T+g)}else{let T=i.mirror?0:v*h.width+_*p.height;e.width=Math.min(this.maxWidth,e.width+T+g)}this._calculatePadding(l,d,_,v)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){let{ticks:{align:s,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),p=0,g=0;c?l?(p=r*e.width,g=i*t.height):(p=i*e.height,g=r*t.width):s==="start"?g=t.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,g=t.width/2),this.paddingLeft=Math.max((p-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((g-h+o)*this.width/(this.width-h),0)}else{let d=t.height/2,h=e.height/2;s==="start"?(d=0,h=e.height):s==="end"&&(d=t.height,h=0),this.paddingTop=d+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Be(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)Ce(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=bN(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){let{ctx:r,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(t/_N(t,i)),l=0,d=0,h,p,g,y,v,_,T,P,N,j,L;for(h=0;h<t;h+=c){if(y=e[h].label,v=this._resolveTickFontOptions(h),r.font=_=v.string,T=s[_]=s[_]||{data:{},gc:[]},P=v.lineHeight,N=j=0,!Ce(y)&&!ze(y))N=Yu(r,T.data,T.gc,N,y),j=P;else if(ze(y))for(p=0,g=y.length;p<g;++p)L=y[p],!Ce(L)&&!ze(L)&&(N=Yu(r,T.data,T.gc,N,L),j+=P);o.push(N),a.push(j),l=Math.max(N,l),d=Math.max(j,d)}$W(s,t);let k=o.indexOf(l),C=a.indexOf(d),w=I=>({width:o[I]||0,height:a[I]||0});return{first:w(0),last:w(t-1),widest:w(k),highest:w(C),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return NO(this._alignToPixels?Ds(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let i=t[e];return i.$context||(i.$context=HW(this.getContext(),e,i))}return this.$context||(this.$context=zW(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=Un(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*i>a*r?a/i:c/r:c*r<a*i?c/i:a/r}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,c=s.offset,l=this.isHorizontal(),h=this.ticks.length+(c?1:0),p=rd(s),g=[],y=a.setContext(this.getContext()),v=y.display?y.width:0,_=v/2,T=function(Ue){return Ds(i,Ue,v)},P,N,j,L,k,C,w,I,S,x,A,D;if(o==="top")P=T(this.bottom),C=this.bottom-p,I=P-_,x=T(e.top)+_,D=e.bottom;else if(o==="bottom")P=T(this.top),x=e.top,D=T(e.bottom)-_,C=P+_,I=this.top+p;else if(o==="left")P=T(this.right),k=this.right-p,w=P-_,S=T(e.left)+_,A=e.right;else if(o==="right")P=T(this.left),S=e.left,A=T(e.right)-_,k=P+_,w=this.left+p;else if(t==="x"){if(o==="center")P=T((e.top+e.bottom)/2+.5);else if(me(o)){let Ue=Object.keys(o)[0],Fe=o[Ue];P=T(this.chart.scales[Ue].getPixelForValue(Fe))}x=e.top,D=e.bottom,C=P+_,I=C+p}else if(t==="y"){if(o==="center")P=T((e.left+e.right)/2);else if(me(o)){let Ue=Object.keys(o)[0],Fe=o[Ue];P=T(this.chart.scales[Ue].getPixelForValue(Fe))}k=P-_,w=k-p,S=e.left,A=e.right}let Je=ae(r.ticks.maxTicksLimit,h),be=Math.max(1,Math.ceil(h/Je));for(N=0;N<h;N+=be){let Ue=this.getContext(N),Fe=s.setContext(Ue),Nt=a.setContext(Ue),ut=Fe.lineWidth,qi=Fe.color,Wo=Nt.dash||[],Yt=Nt.dashOffset,it=Fe.tickWidth,Wi=Fe.tickColor,$n=Fe.tickBorderDash||[],Gi=Fe.tickBorderDashOffset;j=UW(this,N,c),j!==void 0&&(L=Ds(i,j,ut),l?k=w=S=A=L:C=I=x=D=L,g.push({tx1:k,ty1:C,tx2:w,ty2:I,x1:S,y1:x,x2:A,y2:D,width:ut,color:qi,borderDash:Wo,borderDashOffset:Yt,tickWidth:it,tickColor:Wi,tickBorderDash:$n,tickBorderDashOffset:Gi}))}return this._ticksLength=h,this._borderValue=P,g}_computeLabelItems(e){let t=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:d,mirror:h}=s,p=rd(i.grid),g=p+d,y=h?-d:g,v=-Un(this.labelRotation),_=[],T,P,N,j,L,k,C,w,I,S,x,A,D="middle";if(r==="top")k=this.bottom-y,C=this._getXAxisLabelAlignment();else if(r==="bottom")k=this.top+y,C=this._getXAxisLabelAlignment();else if(r==="left"){let be=this._getYAxisLabelAlignment(p);C=be.textAlign,L=be.x}else if(r==="right"){let be=this._getYAxisLabelAlignment(p);C=be.textAlign,L=be.x}else if(t==="x"){if(r==="center")k=(e.top+e.bottom)/2+g;else if(me(r)){let be=Object.keys(r)[0],Ue=r[be];k=this.chart.scales[be].getPixelForValue(Ue)+g}C=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")L=(e.left+e.right)/2-g;else if(me(r)){let be=Object.keys(r)[0],Ue=r[be];L=this.chart.scales[be].getPixelForValue(Ue)}C=this._getYAxisLabelAlignment(p).textAlign}t==="y"&&(c==="start"?D="top":c==="end"&&(D="bottom"));let Je=this._getLabelSizes();for(T=0,P=a.length;T<P;++T){N=a[T],j=N.label;let be=s.setContext(this.getContext(T));w=this.getPixelForTick(T)+s.labelOffset,I=this._resolveTickFontOptions(T),S=I.lineHeight,x=ze(j)?j.length:1;let Ue=x/2,Fe=be.color,Nt=be.textStrokeColor,ut=be.textStrokeWidth,qi=C;o?(L=w,C==="inner"&&(T===P-1?qi=this.options.reverse?"left":"right":T===0?qi=this.options.reverse?"right":"left":qi="center"),r==="top"?l==="near"||v!==0?A=-x*S+S/2:l==="center"?A=-Je.highest.height/2-Ue*S+S:A=-Je.highest.height+S/2:l==="near"||v!==0?A=S/2:l==="center"?A=Je.highest.height/2-Ue*S:A=Je.highest.height-x*S,h&&(A*=-1),v!==0&&!be.showLabelBackdrop&&(L+=S/2*Math.sin(v))):(k=w,A=(1-x)*S/2);let Wo;if(be.showLabelBackdrop){let Yt=jt(be.backdropPadding),it=Je.heights[T],Wi=Je.widths[T],$n=A-Yt.top,Gi=0-Yt.left;switch(D){case"middle":$n-=it/2;break;case"bottom":$n-=it;break}switch(C){case"center":Gi-=Wi/2;break;case"right":Gi-=Wi;break;case"inner":T===P-1?Gi-=Wi:T>0&&(Gi-=Wi/2);break}Wo={left:Gi,top:$n,width:Wi+Yt.width,height:it+Yt.height,color:be.backdropColor}}_.push({label:j,font:I,textOffset:A,options:{rotation:v,color:Fe,strokeColor:Nt,strokeWidth:ut,textAlign:qi,textBaseline:D,translation:[L,k],backdrop:Wo}})}return _}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-Un(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,c=o.widest.width,l,d;return t==="left"?r?(d=this.right+s,i==="near"?l="left":i==="center"?(l="center",d+=c/2):(l="right",d+=c)):(d=this.right-a,i==="near"?l="right":i==="center"?(l="center",d-=c/2):(l="left",d=this.left)):t==="right"?r?(d=this.left+s,i==="near"?l="right":i==="center"?(l="center",d-=c/2):(l="left",d-=c)):(d=this.left+a,i==="near"?l="left":i==="center"?(l="center",d+=c/2):(l="right",d=this.right)):l="right",{textAlign:l,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:i,top:r,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,o,a=(c,l,d)=>{!d.width||!d.color||(i.save(),i.lineWidth=d.width,i.strokeStyle=d.color,i.setLineDash(d.borderDash||[]),i.lineDashOffset=d.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(l.x,l.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=r.length;s<o;++s){let c=r[s];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;let a=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,d,h,p;this.isHorizontal()?(l=Ds(e,this.left,o)-o/2,d=Ds(e,this.right,a)+a/2,h=p=c):(h=Ds(e,this.top,o)-o/2,p=Ds(e,this.bottom,a)+a/2,l=d=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,h),t.lineTo(d,p),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();r&&Xu(i,r);let s=this.getLabelItems(e);for(let o of s){let a=o.options,c=o.font,l=o.label,d=o.textOffset;Ss(i,l,0,d,c,a)}r&&ed(i)}drawTitle(){let{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;let s=bt(i.font),o=jt(i.padding),a=i.align,c=s.lineHeight/2;t==="bottom"||t==="center"||me(t)?(c+=o.bottom,ze(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=o.top;let{titleX:l,titleY:d,maxWidth:h,rotation:p}=WW(this,c,t,a);Ss(e,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:p,textAlign:qW(a,t,r),textBaseline:"middle",translation:[l,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,i=ae(e.grid&&e.grid.z,-1),r=ae(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[],s,o;for(s=0,o=t.length;s<o;++s){let a=t[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return bt(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},jc=class{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),i;QW(t)&&(i=this.register(t));let r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,GW(e,o,i),this.override&&Ge.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){let t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in Ge[r]&&(delete Ge[r][i],this.override&&delete Cs[i])}};function GW(n,e,t){let i=Mc(Object.create(null),[t?Ge.get(t):{},Ge.get(e),n.defaults]);Ge.set(e,i),n.defaultRoutes&&KW(e,n.defaultRoutes),n.descriptors&&Ge.describe(e,n.descriptors)}function KW(n,e){Object.keys(e).forEach(t=>{let i=t.split("."),r=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),c=o.join(".");Ge.route(s,r,c,a)})}function QW(n){return"id"in n&&"defaults"in n}var TE=class{constructor(){this.controllers=new jc(As,"datasets",!0),this.elements=new jc(ui,"elements"),this.plugins=new jc(Object,"plugins"),this.scales=new jc(qo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{let s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Oe(r,o=>{let a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){let r=jg(e);Be(i["before"+r],[],i),t[e](i),Be(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){let r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}},Hi=new TE,ME=class{constructor(){this._init=[]}notify(e,t,i,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,r){r=r||{};for(let s of e){let o=s.plugin,a=o[i],c=[t,r,s.options];if(Be(a,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Ce(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let i=e&&e.config,r=ae(i.options&&i.options.plugins,{}),s=YW(i);return r===!1&&!t?[]:JW(e,s,r,t)}_notifyStateChanges(e){let t=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}};function YW(n){let e={},t=[],i=Object.keys(Hi.plugins.items);for(let s=0;s<i.length;s++)t.push(Hi.getPlugin(i[s]));let r=n.plugins||[];for(let s=0;s<r.length;s++){let o=r[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function ZW(n,e){return!e&&n===!1?null:n===!0?{}:n}function JW(n,{plugins:e,localIds:t},i,r){let s=[],o=n.getContext();for(let a of e){let c=a.id,l=ZW(i[c],r);l!==null&&s.push({plugin:a,options:XW(n.config,{plugin:a,local:t[c]},l,o)})}return s}function XW(n,{plugin:e,local:t},i,r){let s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function AE(n,e){let t=Ge.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function e7(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function t7(n,e){return n===e?"_index_":"_value_"}function IN(n){if(n==="x"||n==="y"||n==="r")return n}function n7(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function PE(n,...e){if(IN(n))return n;for(let t of e){let i=t.axis||n7(t.position)||n.length>1&&IN(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function EN(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function i7(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return EN(n,"x",t[0])||EN(n,"y",t[0])}return{}}function r7(n,e){let t=Cs[n.type]||{scales:{}},i=e.scales||{},r=AE(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{let a=i[o];if(!me(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let c=PE(o,a,i7(o,n),Ge.scales[a.type]),l=t7(c,r),d=t.scales||{};s[o]=Pc(Object.create(null),[{axis:c},a,d[c],d[l]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,c=o.indexAxis||AE(a,e),d=(Cs[a]||{}).scales||{};Object.keys(d).forEach(h=>{let p=e7(h,c),g=o[p+"AxisID"]||p;s[g]=s[g]||Object.create(null),Pc(s[g],[{axis:p},i[g],d[h]])})}),Object.keys(s).forEach(o=>{let a=s[o];Pc(a,[Ge.scales[a.type],Ge.scale])}),s}function uk(n){let e=n.options||(n.options={});e.plugins=ae(e.plugins,{}),e.scales=r7(n,e)}function dk(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function s7(n){return n=n||{},n.data=dk(n.data),uk(n),n}var CN=new Map,hk=new Set;function Jg(n,e){let t=CN.get(n);return t||(t=e(),CN.set(n,t),hk.add(t)),t}var sd=(n,e,t)=>{let i=Pr(e,t);i!==void 0&&n.add(i)},RE=class{constructor(e){this._config=s7(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=dk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),uk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Jg(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Jg(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Jg(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,i=this.type;return Jg(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let i=this._scopeCache,r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){let{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;let c=new Set;t.forEach(d=>{e&&(c.add(e),d.forEach(h=>sd(c,e,h))),d.forEach(h=>sd(c,r,h)),d.forEach(h=>sd(c,Cs[s]||{},h)),d.forEach(h=>sd(c,Ge,h)),d.forEach(h=>sd(c,zg,h))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),hk.has(t)&&o.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,Cs[t]||{},Ge.datasets[t]||{},{type:t},Ge,zg]}resolveNamedOptions(e,t,i,r=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=DN(this._resolverCache,e,r),c=o;if(a7(o,t)){s.$shared=!1,i=Mr(i)?i():i;let l=this.createResolver(e,i,a);c=Bo(o,i,l)}for(let l of t)s[l]=c[l];return s}createResolver(e,t,i=[""],r){let{resolver:s}=DN(this._resolverCache,e,i);return me(t)?Bo(s,t,void 0,r):s}};function DN(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));let r=t.join(),s=i.get(r);return s||(s={resolver:Wg(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}var o7=n=>me(n)&&Object.getOwnPropertyNames(n).some(e=>Mr(n[e]));function a7(n,e){let{isScriptable:t,isIndexable:i}=iE(n);for(let r of e){let s=t(r),o=i(r),a=(o||s)&&n[r];if(s&&(Mr(a)||o7(a))||o&&ze(a))return!0}return!1}var c7="4.4.7",l7=["top","bottom","left","right","chartArea"];function SN(n,e){return n==="top"||n==="bottom"||l7.indexOf(n)===-1&&e==="x"}function xN(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function TN(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Be(t&&t.onComplete,[n],e)}function u7(n){let e=n.chart,t=e.options.animation;Be(t&&t.onProgress,[n],e)}function fk(n){return Gg()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var rm={},MN=n=>{let e=fk(n);return Object.values(rm).filter(t=>t.canvas===e).pop()};function d7(n,e,t){let i=Object.keys(n);for(let r of i){let s=+r;if(s>=e){let o=n[r];delete n[r],(t>0||s>e)&&(n[s+t]=o)}}}function h7(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}function Xg(n,e,t){return n.options.clip?n[t]:e[t]}function f7(n,e){let{xScale:t,yScale:i}=n;return t&&i?{left:Xg(t,e,"left"),right:Xg(t,e,"right"),top:Xg(i,e,"top"),bottom:Xg(i,e,"bottom")}:e}var dm=(()=>{class n{static defaults=Ge;static instances=rm;static overrides=Cs;static registry=Hi;static version=c7;static getChart=MN;static register(...t){Hi.add(...t),AN()}static unregister(...t){Hi.remove(...t),AN()}constructor(t,i){let r=this.config=new RE(i),s=fk(t),o=MN(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||OW(s)),this.platform.updateConfig(r);let c=this.platform.acquireContext(s,a.aspectRatio),l=c&&c.canvas,d=l&&l.height,h=l&&l.width;if(this.id=TO(),this.ctx=c,this.canvas=l,this.width=h,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ME,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=jO(p=>this.update(p),a.resizeDelay||0),this._dataChanges=[],rm[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Or.listen(this,"complete",TN),Or.listen(this,"progress",u7),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:i},width:r,height:s,_aspectRatio:o}=this;return Ce(t)?i&&o?o:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Hi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():aE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return eE(this.canvas,this.ctx),this}stop(){return Or.stop(this),this}resize(t,i){Or.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){let r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,i,o),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,aE(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),Be(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};Oe(i,(r,s)=>{r.id=s})}buildOrUpdateScales(){let t=this.options,i=t.scales,r=this.scales,s=Object.keys(r).reduce((a,c)=>(a[c]=!1,a),{}),o=[];i&&(o=o.concat(Object.keys(i).map(a=>{let c=i[a],l=PE(a,c),d=l==="r",h=l==="x";return{options:c,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),Oe(o,a=>{let c=a.options,l=c.id,d=PE(l,c),h=ae(c.type,a.dtype);(c.position===void 0||SN(c.position,d)!==SN(a.dposition))&&(c.position=a.dposition),s[l]=!0;let p=null;if(l in r&&r[l].type===h)p=r[l];else{let g=Hi.getScale(h);p=new g({id:l,type:h,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(c,t)}),Oe(s,(a,c)=>{a||delete r[c]}),Oe(r,a=>{Qt.configure(this,a,a.options),Qt.addBox(this,a)})}_updateMetasets(){let t=this._metasets,i=this.data.datasets.length,r=t.length;if(t.sort((s,o)=>s.index-o.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);t.splice(i,r-i)}this._sortedMetasets=t.slice(0).sort(xN("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((r,s)=>{i.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],i=this.data.datasets,r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){let o=i[r],a=this.getDatasetMeta(r),c=o.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=c,a.indexAxis=o.indexAxis||AE(c,this.options),a.order=o.order||0,a.index=r,a.label=""+o.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let l=Hi.getController(c),{datasetElementType:d,dataElementType:h}=Ge.datasets[c];Object.assign(l,{dataElementType:Hi.getElement(h),datasetElementType:d&&Hi.getElement(d)}),a.controller=new l(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Oe(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let i=this.config;i.update();let r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,h=this.data.datasets.length;d<h;d++){let{controller:p}=this.getDatasetMeta(d),g=!s&&o.indexOf(p)===-1;p.buildOrUpdateElements(g),a=Math.max(+p.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||Oe(o,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(xN("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Oe(this.scales,t=>{Qt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!UI(i,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(let{method:r,start:s,count:o}of i){let a=r==="_removeElements"?-o:o;d7(t,s,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let i=this.data.datasets.length,r=o=>new Set(t.filter(a=>a[0]===o).map((a,c)=>c+","+a.splice(1).join(","))),s=r(0);for(let o=1;o<i;o++)if(!UI(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Qt.update(this,this.width,this.height,t);let i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],Oe(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,Mr(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){let r=this.getDatasetMeta(t),s={meta:r,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Or.has(this)?this.attached&&!Or.running(this)&&Or.start(this):(this.draw(),TN({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let i=this._sortedMetasets,r=[],s,o;for(s=0,o=i.length;s<o;++s){let a=i[s];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let i=this.ctx,r=t._clip,s=!r.disabled,o=f7(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(s&&Xu(i,{left:r.left===!1?0:o.left-r.left,right:r.right===!1?this.width:o.right+r.right,top:r.top===!1?0:o.top-r.top,bottom:r.bottom===!1?this.height:o.bottom+r.bottom}),t.controller.draw(),s&&ed(i),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return Bi(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,r,s){let o=pW.modes[i];return typeof o=="function"?o(this,t,r,s):[]}getDatasetMeta(t){let i=this.data.datasets[t],r=this._metasets,s=r.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Rr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let i=this.data.datasets[t];if(!i)return!1;let r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!i.hidden}setDatasetVisibility(t,i){let r=this.getDatasetMeta(t);r.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,r){let s=r?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);Rc(i)?(o.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(o,{visible:r}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){let i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),Or.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),eE(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete rm[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,i=this.platform,r=(o,a)=>{i.addEventListener(this,o,a),t[o]=a},s=(o,a,c)=>{o.offsetX=a,o.offsetY=c,this._eventHandler(o)};Oe(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,r=(l,d)=>{i.addEventListener(this,l,d),t[l]=d},s=(l,d)=>{t[l]&&(i.removeEventListener(this,l,d),delete t[l])},o=(l,d)=>{this.canvas&&this.resize(l,d)},a,c=()=>{s("attach",c),this.attached=!0,this.resize(),r("resize",o),r("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",c)},i.isAttached(this.canvas)?c():a()}unbindEvents(){Oe(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},Oe(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,r){let s=r?"set":"remove",o,a,c,l;for(i==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,l=t.length;c<l;++c){a=t[c];let d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let i=this._active||[],r=t.map(({datasetIndex:o,index:a})=>{let c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[a],index:a}});!Zu(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(t,i,r){return this._plugins.notify(this,t,i,r)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,r){let s=this.options.hover,o=(l,d)=>l.filter(h=>!d.some(p=>h.datasetIndex===p.datasetIndex&&h.index===p.index)),a=o(i,t),c=r?t:o(t,i);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,i){let r={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;let o=this._handleEvent(t,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(t,i,r){let{_active:s=[],options:o}=this,a=i,c=this._getActiveElements(t,s,r,a),l=PO(t),d=h7(t,this._lastEvent,r,l);r&&(this._lastEvent=null,Be(o.onHover,[t,c,this],this),l&&Be(o.onClick,[t,c,this],this));let h=!Zu(c,s);return(h||i)&&(this._active=c,this._updateHoverStyles(c,s,i)),this._lastEvent=d,h}_getActiveElements(t,i,r,s){if(t.type==="mouseout")return[];if(!r)return i;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}return n})();function AN(){return Oe(dm.instances,n=>n._plugins.invalidate())}function p7(n,e,t){let{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:c}=e,l=r/a;n.beginPath(),n.arc(s,o,a,i-l,t+l),c>r?(l=r/c,n.arc(s,o,c,t+l,i-l,!0)):n.arc(s,o,r,t+ct,i-ct),n.closePath(),n.clip()}function g7(n){return qg(n,["outerStart","outerEnd","innerStart","innerEnd"])}function m7(n,e,t,i){let r=g7(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,i*e/2),a=c=>{let l=(t-Math.min(s,c))*i/2;return Mt(c,0,Math.min(s,l))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Mt(r.innerStart,0,o),innerEnd:Mt(r.innerEnd,0,o)}}function Vc(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function cm(n,e,t,i,r,s){let{x:o,y:a,startAngle:c,pixelMargin:l,innerRadius:d}=e,h=Math.max(e.outerRadius+i+t-l,0),p=d>0?d+i+t+l:0,g=0,y=r-c;if(i){let be=d>0?d-i:0,Ue=h>0?h-i:0,Fe=(be+Ue)/2,Nt=Fe!==0?y*Fe/(Fe+i):y;g=(y-Nt)/2}let v=Math.max(.001,y*h-t/He)/h,_=(y-v)/2,T=c+_+g,P=r-_-g,{outerStart:N,outerEnd:j,innerStart:L,innerEnd:k}=m7(e,p,h,P-T),C=h-N,w=h-j,I=T+N/C,S=P-j/w,x=p+L,A=p+k,D=T+L/x,Je=P-k/A;if(n.beginPath(),s){let be=(I+S)/2;if(n.arc(o,a,h,I,be),n.arc(o,a,h,be,S),j>0){let ut=Vc(w,S,o,a);n.arc(ut.x,ut.y,j,S,P+ct)}let Ue=Vc(A,P,o,a);if(n.lineTo(Ue.x,Ue.y),k>0){let ut=Vc(A,Je,o,a);n.arc(ut.x,ut.y,k,P+ct,Je+Math.PI)}let Fe=(P-k/p+(T+L/p))/2;if(n.arc(o,a,p,P-k/p,Fe,!0),n.arc(o,a,p,Fe,T+L/p,!0),L>0){let ut=Vc(x,D,o,a);n.arc(ut.x,ut.y,L,D+Math.PI,T-ct)}let Nt=Vc(C,T,o,a);if(n.lineTo(Nt.x,Nt.y),N>0){let ut=Vc(C,I,o,a);n.arc(ut.x,ut.y,N,T-ct,I)}}else{n.moveTo(o,a);let be=Math.cos(I)*h+o,Ue=Math.sin(I)*h+a;n.lineTo(be,Ue);let Fe=Math.cos(S)*h+o,Nt=Math.sin(S)*h+a;n.lineTo(Fe,Nt)}n.closePath()}function y7(n,e,t,i,r){let{fullCircles:s,startAngle:o,circumference:a}=e,c=e.endAngle;if(s){cm(n,e,t,i,c,r);for(let l=0;l<s;++l)n.fill();isNaN(a)||(c=o+(a%qe||qe))}return cm(n,e,t,i,c,r),n.fill(),c}function v7(n,e,t,i,r){let{fullCircles:s,startAngle:o,circumference:a,options:c}=e,{borderWidth:l,borderJoinStyle:d,borderDash:h,borderDashOffset:p}=c,g=c.borderAlign==="inner";if(!l)return;n.setLineDash(h||[]),n.lineDashOffset=p,g?(n.lineWidth=l*2,n.lineJoin=d||"round"):(n.lineWidth=l,n.lineJoin=d||"bevel");let y=e.endAngle;if(s){cm(n,e,t,i,y,r);for(let v=0;v<s;++v)n.stroke();isNaN(a)||(y=o+(a%qe||qe))}g&&p7(n,e,y),s||(cm(n,e,t,i,y,r),n.stroke())}var OE=class extends ui{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){let r=this.getProps(["x","y"],i),{angle:s,distance:o}=qI(r,{x:e,y:t}),{startAngle:a,endAngle:c,innerRadius:l,outerRadius:d,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=(this.options.spacing+this.options.borderWidth)/2,g=ae(h,c-a),y=Nc(s,a,c)&&a!==c,v=g>=qe||y,_=$i(o,l+p,d+p);return v&&_}getCenterPoint(e){let{x:t,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:l}=this.options,d=(r+s)/2,h=(o+a+l+c)/2;return{x:t+Math.cos(d)*h,y:i+Math.sin(d)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:i}=this,r=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>qe?Math.floor(i/qe):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);let c=1-Math.sin(Math.min(He,i||0)),l=r*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,y7(e,this,l,s,o),v7(e,this,l,s,o),e.restore()}};function pk(n,e,t=e){n.lineCap=ae(t.borderCapStyle,e.borderCapStyle),n.setLineDash(ae(t.borderDash,e.borderDash)),n.lineDashOffset=ae(t.borderDashOffset,e.borderDashOffset),n.lineJoin=ae(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=ae(t.borderWidth,e.borderWidth),n.strokeStyle=ae(t.borderColor,e.borderColor)}function _7(n,e,t){n.lineTo(t.x,t.y)}function b7(n){return n.stepped?zO:n.tension||n.cubicInterpolationMode==="monotone"?HO:_7}function gk(n,e,t={}){let i=n.length,{start:r=0,end:s=i-1}=t,{start:o,end:a}=e,c=Math.max(r,o),l=Math.min(s,a),d=r<o&&s<o||r>a&&s>a;return{count:i,start:c,loop:e.loop,ilen:l<c&&!d?i+l-c:l-c}}function w7(n,e,t,i){let{points:r,options:s}=e,{count:o,start:a,loop:c,ilen:l}=gk(r,t,i),d=b7(s),{move:h=!0,reverse:p}=i||{},g,y,v;for(g=0;g<=l;++g)y=r[(a+(p?l-g:g))%o],!y.skip&&(h?(n.moveTo(y.x,y.y),h=!1):d(n,v,y,p,s.stepped),v=y);return c&&(y=r[(a+(p?l:0))%o],d(n,v,y,p,s.stepped)),!!c}function I7(n,e,t,i){let r=e.points,{count:s,start:o,ilen:a}=gk(r,t,i),{move:c=!0,reverse:l}=i||{},d=0,h=0,p,g,y,v,_,T,P=j=>(o+(l?a-j:j))%s,N=()=>{v!==_&&(n.lineTo(d,_),n.lineTo(d,v),n.lineTo(d,T))};for(c&&(g=r[P(0)],n.moveTo(g.x,g.y)),p=0;p<=a;++p){if(g=r[P(p)],g.skip)continue;let j=g.x,L=g.y,k=j|0;k===y?(L<v?v=L:L>_&&(_=L),d=(h*d+j)/++h):(N(),n.lineTo(j,L),y=k,h=0,v=_=L),T=L}N()}function NE(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?I7:w7}function E7(n){return n.stepped?XO:n.tension||n.cubicInterpolationMode==="monotone"?eN:Es}function C7(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),pk(n,e.options),n.stroke(r)}function D7(n,e,t,i){let{segments:r,options:s}=e,o=NE(e);for(let a of r)pk(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}var S7=typeof Path2D=="function";function x7(n,e,t,i){S7&&!e.options.segment?C7(n,e,t,i):D7(n,e,t,i)}var hm=(()=>{class n extends ui{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let s=r.spanGaps?this._loop:this._fullLoop;YO(this._points,r,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=nN(this,this.options.segment))}first(){let t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){let t=this.segments,i=this.points,r=t.length;return r&&i[t[r-1].end]}interpolate(t,i){let r=this.options,s=t[i],o=this.points,a=hE(this,{property:i,start:s,end:s});if(!a.length)return;let c=[],l=E7(r),d,h;for(d=0,h=a.length;d<h;++d){let{start:p,end:g}=a[d],y=o[p],v=o[g];if(y===v){c.push(y);continue}let _=Math.abs((s-y[i])/(v[i]-y[i])),T=l(y,v,_,r.stepped);T[i]=t[i],c.push(T)}return c.length===1?c[0]:c}pathSegment(t,i,r){return NE(this)(t,this,i,r)}path(t,i,r){let s=this.segments,o=NE(this),a=this._loop;i=i||0,r=r||this.points.length-i;for(let c of s)a&=o(t,this,c,{start:i,end:i+r-1});return!!a}draw(t,i,r,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),x7(t,this,r,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function PN(n,e,t,i){let r=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<r.radius+r.hitRadius}var T7=(()=>{class n extends ui{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,r){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(t-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return PN(this,t,"x",i)}inYRange(t,i){return PN(this,t,"y",i)}getCenterPoint(t){let{x:i,y:r}=this.getProps(["x","y"],t);return{x:i,y:r}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);let r=i&&t.borderWidth||0;return(i+r)*2}draw(t,i){let r=this.options;this.skip||r.radius<.1||!Bi(this,i,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,Hg(t,r,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function mk(n,e){let{x:t,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],e),a,c,l,d,h;return n.horizontal?(h=o/2,a=Math.min(t,r),c=Math.max(t,r),l=i-h,d=i+h):(h=s/2,a=t-h,c=t+h,l=Math.min(i,r),d=Math.max(i,r)),{left:a,top:l,right:c,bottom:d}}function Ms(n,e,t,i){return n?0:Mt(e,t,i)}function M7(n,e,t){let i=n.options.borderWidth,r=n.borderSkipped,s=nE(i);return{t:Ms(r.top,s.top,0,t),r:Ms(r.right,s.right,0,e),b:Ms(r.bottom,s.bottom,0,t),l:Ms(r.left,s.left,0,e)}}function A7(n,e,t){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=xs(r),o=Math.min(e,t),a=n.borderSkipped,c=i||me(r);return{topLeft:Ms(!c||a.top||a.left,s.topLeft,0,o),topRight:Ms(!c||a.top||a.right,s.topRight,0,o),bottomLeft:Ms(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Ms(!c||a.bottom||a.right,s.bottomRight,0,o)}}function P7(n){let e=mk(n),t=e.right-e.left,i=e.bottom-e.top,r=M7(n,t/2,i/2),s=A7(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function bE(n,e,t,i){let r=e===null,s=t===null,a=n&&!(r&&s)&&mk(n,i);return a&&(r||$i(e,a.left,a.right))&&(s||$i(t,a.top,a.bottom))}function R7(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function O7(n,e){n.rect(e.x,e.y,e.w,e.h)}function wE(n,e,t={}){let i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}var kE=class extends ui{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=P7(this),a=R7(o.radius)?Fc:O7;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,wE(o,t,s)),e.clip(),a(e,wE(s,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,wE(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return bE(this,e,t,i)}inXRange(e,t){return bE(this,e,null,t)}inYRange(e,t){return bE(this,null,e,t)}getCenterPoint(e){let{x:t,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},N7=Object.freeze({__proto__:null,ArcElement:OE,BarElement:kE,LineElement:hm,PointElement:T7}),FE=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],RN=FE.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function yk(n){return FE[n%FE.length]}function vk(n){return RN[n%RN.length]}function k7(n,e){return n.borderColor=yk(e),n.backgroundColor=vk(e),++e}function F7(n,e){return n.backgroundColor=n.data.map(()=>yk(e++)),e}function L7(n,e){return n.backgroundColor=n.data.map(()=>vk(e++)),e}function V7(n){let e=0;return(t,i)=>{let r=n.getDatasetMeta(i).controller;r instanceof HE?e=F7(t,e):r instanceof sk?e=L7(t,e):r&&(e=k7(t,e))}}function ON(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function j7(n){return n&&(n.borderColor||n.backgroundColor)}function B7(){return Ge.borderColor!=="rgba(0,0,0,0.1)"||Ge.backgroundColor!=="rgba(0,0,0,0.1)"}var U7={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;let{data:{datasets:i},options:r}=n.config,{elements:s}=r,o=ON(i)||j7(r)||s&&ON(s)||B7();if(!t.forceOverride&&o)return;let a=V7(n);i.forEach(a)}};function $7(n,e,t,i,r){let s=r.samples||i;if(s>=t)return n.slice(e,e+t);let o=[],a=(t-2)/(s-2),c=0,l=e+t-1,d=e,h,p,g,y,v;for(o[c++]=n[d],h=0;h<s-2;h++){let _=0,T=0,P,N=Math.floor((h+1)*a)+1+e,j=Math.min(Math.floor((h+2)*a)+1,t)+e,L=j-N;for(P=N;P<j;P++)_+=n[P].x,T+=n[P].y;_/=L,T/=L;let k=Math.floor(h*a)+1+e,C=Math.min(Math.floor((h+1)*a)+1,t)+e,{x:w,y:I}=n[d];for(g=y=-1,P=k;P<C;P++)y=.5*Math.abs((w-_)*(n[P].y-I)-(w-n[P].x)*(T-I)),y>g&&(g=y,p=n[P],v=P);o[c++]=p,d=v}return o[c++]=n[l],o}function z7(n,e,t,i){let r=0,s=0,o,a,c,l,d,h,p,g,y,v,_=[],T=e+t-1,P=n[e].x,j=n[T].x-P;for(o=e;o<e+t;++o){a=n[o],c=(a.x-P)/j*i,l=a.y;let L=c|0;if(L===d)l<y?(y=l,h=o):l>v&&(v=l,p=o),r=(s*r+a.x)/++s;else{let k=o-1;if(!Ce(h)&&!Ce(p)){let C=Math.min(h,p),w=Math.max(h,p);C!==g&&C!==k&&_.push(X($({},n[C]),{x:r})),w!==g&&w!==k&&_.push(X($({},n[w]),{x:r}))}o>0&&k!==g&&_.push(n[k]),_.push(a),d=L,s=0,y=v=l,h=p=g=o}}return _}function _k(n){if(n._decimated){let e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function NN(n){n.data.datasets.forEach(e=>{_k(e)})}function H7(n,e){let t=e.length,i=0,r,{iScale:s}=n,{min:o,max:a,minDefined:c,maxDefined:l}=s.getUserBounds();return c&&(i=Mt(ji(e,s.axis,o).lo,0,t-1)),l?r=Mt(ji(e,s.axis,a).hi+1,i,t)-i:r=t-i,{start:i,count:r}}var q7={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){NN(n);return}let i=n.width;n.data.datasets.forEach((r,s)=>{let{_data:o,indexAxis:a}=r,c=n.getDatasetMeta(s),l=o||r.data;if(Lc([a,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;let d=n.scales[c.xAxisID];if(d.type!=="linear"&&d.type!=="time"||n.options.parsing)return;let{start:h,count:p}=H7(c,l),g=t.threshold||4*i;if(p<=g){_k(r);return}Ce(o)&&(r._data=l,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(v){this._data=v}}));let y;switch(t.algorithm){case"lttb":y=$7(l,h,p,i,t);break;case"min-max":y=z7(l,h,p,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=y})},destroy(n){NN(n)}};function W7(n,e,t){let i=n.segments,r=n.points,s=e.points,o=[];for(let a of i){let{start:c,end:l}=a;l=qE(c,l,r);let d=LE(t,r[c],r[l],a.loop);if(!e.segments){o.push({source:a,target:d,start:r[c],end:r[l]});continue}let h=hE(e,d);for(let p of h){let g=LE(t,s[p.start],s[p.end],p.loop),y=dE(a,r,g);for(let v of y)o.push({source:v,target:p,start:{[t]:kN(d,g,"start",Math.max)},end:{[t]:kN(d,g,"end",Math.min)}})}}return o}function LE(n,e,t,i){if(i)return;let r=e[n],s=t[n];return n==="angle"&&(r=un(r),s=un(s)),{property:n,start:r,end:s}}function G7(n,e){let{x:t=null,y:i=null}=n||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=qE(o,a,r);let c=r[o],l=r[a];i!==null?(s.push({x:c.x,y:i}),s.push({x:l.x,y:i})):t!==null&&(s.push({x:t,y:c.y}),s.push({x:t,y:l.y}))}),s}function qE(n,e,t){for(;e>n;e--){let i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function kN(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function bk(n,e){let t=[],i=!1;return ze(n)?(i=!0,t=n):t=G7(n,e),t.length?new hm({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function FN(n){return n&&n.fill!==!1}function K7(n,e,t){let r=n[e].fill,s=[e],o;if(!t)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!nt(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function Q7(n,e,t){let i=X7(n);if(me(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return nt(r)&&Math.floor(r)===r?Y7(i[0],e,r,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Y7(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function Z7(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:me(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function J7(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:me(n)?i=n.value:i=e.getBaseValue(),i}function X7(n){let e=n.options,t=e.fill,i=ae(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function eG(n){let{scale:e,index:t,line:i}=n,r=[],s=i.segments,o=i.points,a=tG(e,t);a.push(bk({x:null,y:e.bottom},i));for(let c=0;c<s.length;c++){let l=s[c];for(let d=l.start;d<=l.end;d++)nG(r,o[d],a)}return new hm({points:r,options:{}})}function tG(n,e){let t=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){let s=i[r];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function nG(n,e,t){let i=[];for(let r=0;r<t.length;r++){let s=t[r],{first:o,last:a,point:c}=iG(s,e,"x");if(!(!c||o&&a)){if(o)i.unshift(c);else if(n.push(c),!a)break}}n.push(...i)}function iG(n,e,t){let i=n.interpolate(e,t);if(!i)return{};let r=i[t],s=n.segments,o=n.points,a=!1,c=!1;for(let l=0;l<s.length;l++){let d=s[l],h=o[d.start][t],p=o[d.end][t];if($i(r,h,p)){a=r===h,c=r===p;break}}return{first:a,last:c,point:i}}var lm=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){let{x:r,y:s,radius:o}=this;return t=t||{start:0,end:qe},e.arc(r,s,o,t.end,t.start,!0),!i.bounds}interpolate(e){let{x:t,y:i,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}};function rG(n){let{chart:e,fill:t,line:i}=n;if(nt(t))return sG(e,t);if(t==="stack")return eG(n);if(t==="shape")return!0;let r=oG(n);return r instanceof lm?r:bk(r,i)}function sG(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function oG(n){return(n.scale||{}).getPointPositionForValue?cG(n):aG(n)}function aG(n){let{scale:e={},fill:t}=n,i=Z7(t,e);if(nt(i)){let r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function cG(n){let{scale:e,fill:t}=n,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=J7(t,e,s),a=[];if(i.grid.circular){let c=e.getPointPositionForValue(0,s);return new lm({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<r;++c)a.push(e.getPointPositionForValue(c,o));return a}function IE(n,e,t){let i=rG(e),{line:r,scale:s,axis:o}=e,a=r.options,c=a.fill,l=a.backgroundColor,{above:d=l,below:h=l}=c||{};i&&r.points.length&&(Xu(n,t),lG(n,{line:r,target:i,above:d,below:h,area:t,scale:s,axis:o}),ed(n))}function lG(n,e){let{line:t,target:i,above:r,below:s,area:o,scale:a}=e,c=t._loop?"angle":e.axis;n.save(),c==="x"&&s!==r&&(LN(n,i,o.top),VN(n,{line:t,target:i,color:r,scale:a,property:c}),n.restore(),n.save(),LN(n,i,o.bottom)),VN(n,{line:t,target:i,color:s,scale:a,property:c}),n.restore()}function LN(n,e,t){let{segments:i,points:r}=e,s=!0,o=!1;n.beginPath();for(let a of i){let{start:c,end:l}=a,d=r[c],h=r[qE(c,l,r)];s?(n.moveTo(d.x,d.y),s=!1):(n.lineTo(d.x,t),n.lineTo(d.x,d.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(h.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function VN(n,e){let{line:t,target:i,property:r,color:s,scale:o}=e,a=W7(t,i,r);for(let{source:c,target:l,start:d,end:h}of a){let{style:{backgroundColor:p=s}={}}=c,g=i!==!0;n.save(),n.fillStyle=p,uG(n,o,g&&LE(r,d,h)),n.beginPath();let y=!!t.pathSegment(n,c),v;if(g){y?n.closePath():jN(n,i,h,r);let _=!!i.pathSegment(n,l,{move:y,reverse:!0});v=y&&_,v||jN(n,i,d,r)}n.closePath(),n.fill(v?"evenodd":"nonzero"),n.restore()}}function uG(n,e,t){let{top:i,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=t||{};s==="x"&&(n.beginPath(),n.rect(o,i,a-o,r-i),n.clip())}function jN(n,e,t,i){let r=e.interpolate(t,i);r&&n.lineTo(r.x,r.y)}var dG={id:"filler",afterDatasetsUpdate(n,e,t){let i=(n.data.datasets||[]).length,r=[],s,o,a,c;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,c=null,a&&a.options&&a instanceof hm&&(c={visible:n.isDatasetVisible(o),index:o,fill:Q7(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=c,r.push(c);for(o=0;o<i;++o)c=r[o],!(!c||c.fill===!1)&&(c.fill=K7(r,o,t.propagate))},beforeDraw(n,e,t){let i=t.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){let a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&IE(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){let s=i[r].$filler;FN(s)&&IE(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){let i=e.meta.$filler;!FN(i)||t.drawTime!=="beforeDatasetDraw"||IE(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},BN=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},hG=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,um=class extends ui{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=Be(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let i=e.labels,r=bt(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=BN(i,s),l,d;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,d=this._fitRows(o,s,a,c)+10):(d=this.maxHeight,l=this._fitCols(o,r,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],d=r+a,h=e;s.textAlign="left",s.textBaseline="middle";let p=-1,g=-d;return this.legendItems.forEach((y,v)=>{let _=i+t/2+s.measureText(y.text).width;(v===0||l[l.length-1]+_+2*a>o)&&(h+=d,l[l.length-(v>0?0:1)]=0,g+=d,p++),c[v]={left:0,top:g,row:p,width:_,height:r},l[l.length-1]+=_+a}),h}_fitCols(e,t,i,r){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],d=o-e,h=a,p=0,g=0,y=0,v=0;return this.legendItems.forEach((_,T)=>{let{itemWidth:P,itemHeight:N}=fG(i,t,s,_,r);T>0&&g+N+2*a>d&&(h+=p+a,l.push({width:p,height:g}),y+=p+a,v++,p=g=0),c[T]={left:y,top:g,col:v,width:P,height:N},p=Math.max(p,P),g+=N+a}),h+=p,l.push({width:p,height:g}),h}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:s}}=this,o=$o(s,this.left,this.width);if(this.isHorizontal()){let a=0,c=Vt(i,this.left+r,this.right-this.lineWidths[a]);for(let l of t)a!==l.row&&(a=l.row,c=Vt(i,this.left+r,this.right-this.lineWidths[a])),l.top+=this.top+e+r,l.left=o.leftForLtr(o.x(c),l.width),c+=l.width+r}else{let a=0,c=Vt(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(let l of t)l.col!==a&&(a=l.col,c=Vt(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+r,l.left=o.leftForLtr(o.x(l.left),l.width),c+=l.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;Xu(e,this),this._draw(),ed(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Ge.color,c=$o(e.rtl,this.left,this.width),l=bt(o.font),{padding:d}=o,h=l.size,p=h/2,g;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;let{boxWidth:y,boxHeight:v,itemHeight:_}=BN(o,h),T=function(k,C,w){if(isNaN(y)||y<=0||isNaN(v)||v<0)return;r.save();let I=ae(w.lineWidth,1);if(r.fillStyle=ae(w.fillStyle,a),r.lineCap=ae(w.lineCap,"butt"),r.lineDashOffset=ae(w.lineDashOffset,0),r.lineJoin=ae(w.lineJoin,"miter"),r.lineWidth=I,r.strokeStyle=ae(w.strokeStyle,a),r.setLineDash(ae(w.lineDash,[])),o.usePointStyle){let S={radius:v*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:I},x=c.xPlus(k,y/2),A=C+p;tE(r,S,x,A,o.pointStyleWidth&&y)}else{let S=C+Math.max((h-v)/2,0),x=c.leftForLtr(k,y),A=xs(w.borderRadius);r.beginPath(),Object.values(A).some(D=>D!==0)?Fc(r,{x,y:S,w:y,h:v,radius:A}):r.rect(x,S,y,v),r.fill(),I!==0&&r.stroke()}r.restore()},P=function(k,C,w){Ss(r,w.text,k,C+_/2,l,{strikethrough:w.hidden,textAlign:c.textAlign(w.textAlign)})},N=this.isHorizontal(),j=this._computeTitleHeight();N?g={x:Vt(s,this.left+d,this.right-i[0]),y:this.top+d+j,line:0}:g={x:this.left+d,y:Vt(s,this.top+j+d,this.bottom-t[0].height),line:0},lE(this.ctx,e.textDirection);let L=_+d;this.legendItems.forEach((k,C)=>{r.strokeStyle=k.fontColor,r.fillStyle=k.fontColor;let w=r.measureText(k.text).width,I=c.textAlign(k.textAlign||(k.textAlign=o.textAlign)),S=y+p+w,x=g.x,A=g.y;c.setWidth(this.width),N?C>0&&x+S+d>this.right&&(A=g.y+=L,g.line++,x=g.x=Vt(s,this.left+d,this.right-i[g.line])):C>0&&A+L>this.bottom&&(x=g.x=x+t[g.line].width+d,g.line++,A=g.y=Vt(s,this.top+j+d,this.bottom-t[g.line].height));let D=c.x(x);if(T(D,A,k),x=BO(I,x+y+p,N?x+S:this.right,e.rtl),P(c.x(x),A,k),N)g.x+=S+d;else if(typeof k.text!="string"){let Je=l.lineHeight;g.y+=wk(k,Je)+d}else g.y+=L}),uE(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,i=bt(t.font),r=jt(t.padding);if(!t.display)return;let s=$o(e.rtl,this.left,this.width),o=this.ctx,a=t.position,c=i.size/2,l=r.top+c,d,h=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),d=this.top+l,h=Vt(e.align,h,this.right-p);else{let y=this.columnSizes.reduce((v,_)=>Math.max(v,_.height),0);d=l+Vt(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}let g=Vt(a,h,h+p);o.textAlign=s.textAlign($g(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,Ss(o,t.text,g,d,i)}_computeTitleHeight(){let e=this.options.title,t=bt(e.font),i=jt(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,s;if($i(e,this.left,this.right)&&$i(t,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],$i(e,r.left,r.left+r.width)&&$i(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){let t=this.options;if(!mG(e.type,t))return;let i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let r=this._hoveredItem,s=hG(r,i);r&&!s&&Be(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Be(t.onHover,[e,i,this],this)}else i&&Be(t.onClick,[e,i,this],this)}};function fG(n,e,t,i,r){let s=pG(i,n,e,t),o=gG(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function pG(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+i.measureText(r).width}function gG(n,e,t){let i=n;return typeof e.text!="string"&&(i=wk(e,t)),i}function wk(n,e){let t=n.text?n.text.length:0;return e*t}function mG(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var yG={id:"legend",_element:um,start(n,e,t){let i=n.legend=new um({ctx:n.ctx,options:t,chart:n});Qt.configure(n,i,t),Qt.addBox(n,i)},stop(n){Qt.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let i=n.legend;Qt.configure(n,i,t),i.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(t?0:void 0),d=jt(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},ld=class extends ui{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let r=ze(i.text)?i.text.length:1;this._padding=jt(i.padding);let s=r*bt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:i,bottom:r,right:s,options:o}=this,a=o.align,c=0,l,d,h;return this.isHorizontal()?(d=Vt(a,i,s),h=t+e,l=s-i):(o.position==="left"?(d=i+e,h=Vt(a,r,t),c=He*-.5):(d=s-e,h=Vt(a,t,r),c=He*.5),l=r-t),{titleX:d,titleY:h,maxWidth:l,rotation:c}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let i=bt(t.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(s);Ss(e,t.text,0,0,i,{color:t.color,maxWidth:c,rotation:l,textAlign:$g(t.align),textBaseline:"middle",translation:[o,a]})}};function vG(n,e){let t=new ld({ctx:n.ctx,options:e,chart:n});Qt.configure(n,t,e),Qt.addBox(n,t),n.titleBlock=t}var _G={id:"title",_element:ld,start(n,e,t){vG(n,t)},stop(n){let e=n.titleBlock;Qt.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let i=n.titleBlock;Qt.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},em=new WeakMap,bG={id:"subtitle",start(n,e,t){let i=new ld({ctx:n.ctx,options:t,chart:n});Qt.configure(n,i,t),Qt.addBox(n,i),em.set(n,i)},stop(n){Qt.removeBox(n,em.get(n)),em.delete(n)},beforeUpdate(n,e,t){let i=em.get(n);Qt.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},ad={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,s=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let c=a.tooltipPosition();i.add(c.x),r+=c.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,c)=>a+c)/i.size,y:r/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let c=n[s].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),d=Lg(e,l);d<r&&(r=d,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,i=c.y}return{x:t,y:i}}};function zi(n,e){return e&&(ze(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Nr(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function wG(n,e){let{element:t,datasetIndex:i,index:r}=e,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function UN(n,e){let t=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=e,c=bt(e.bodyFont),l=bt(e.titleFont),d=bt(e.footerFont),h=s.length,p=r.length,g=i.length,y=jt(e.padding),v=y.height,_=0,T=i.reduce((j,L)=>j+L.before.length+L.lines.length+L.after.length,0);if(T+=n.beforeBody.length+n.afterBody.length,h&&(v+=h*l.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),T){let j=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;v+=g*j+(T-g)*c.lineHeight+(T-1)*e.bodySpacing}p&&(v+=e.footerMarginTop+p*d.lineHeight+(p-1)*e.footerSpacing);let P=0,N=function(j){_=Math.max(_,t.measureText(j).width+P)};return t.save(),t.font=l.string,Oe(n.title,N),t.font=c.string,Oe(n.beforeBody.concat(n.afterBody),N),P=e.displayColors?o+2+e.boxPadding:0,Oe(i,j=>{Oe(j.before,N),Oe(j.lines,N),Oe(j.after,N)}),P=0,t.font=d.string,Oe(n.footer,N),t.restore(),_+=y.width,{width:_,height:v}}function IG(n,e){let{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function EG(n,e,t,i){let{x:r,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&r+s+o>e.width||n==="right"&&r-s-o<0)return!0}function CG(n,e,t,i){let{x:r,width:s}=t,{width:o,chartArea:{left:a,right:c}}=n,l="center";return i==="center"?l=r<=(a+c)/2?"left":"right":r<=s/2?l="left":r>=o-s/2&&(l="right"),EG(l,n,e,t)&&(l="center"),l}function $N(n,e,t){let i=t.yAlign||e.yAlign||IG(n,t);return{xAlign:t.xAlign||e.xAlign||CG(n,e,t,i),yAlign:i}}function DG(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function SG(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function zN(n,e,t,i){let{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:c}=t,l=r+s,{topLeft:d,topRight:h,bottomLeft:p,bottomRight:g}=xs(o),y=DG(e,a),v=SG(e,c,l);return c==="center"?a==="left"?y+=l:a==="right"&&(y-=l):a==="left"?y-=Math.max(d,p)+r:a==="right"&&(y+=Math.max(h,g)+r),{x:Mt(y,0,i.width-e.width),y:Mt(v,0,i.height-e.height)}}function tm(n,e,t){let i=jt(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function HN(n){return zi([],Nr(n))}function xG(n,e,t){return Rr(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function qN(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var Ik={beforeTitle:Ui,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Ui,beforeBody:Ui,beforeLabel:Ui,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return Ce(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ui,afterBody:Ui,beforeFooter:Ui,footer:Ui,afterFooter:Ui};function hn(n,e,t,i){let r=n[e].call(t,i);return typeof r>"u"?Ik[e].call(t,i):r}var WN=(()=>{class n extends ui{static positioners=ad;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new sm(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=xG(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:r}=i,s=hn(r,"beforeTitle",this,t),o=hn(r,"title",this,t),a=hn(r,"afterTitle",this,t),c=[];return c=zi(c,Nr(s)),c=zi(c,Nr(o)),c=zi(c,Nr(a)),c}getBeforeBody(t,i){return HN(hn(i.callbacks,"beforeBody",this,t))}getBody(t,i){let{callbacks:r}=i,s=[];return Oe(t,o=>{let a={before:[],lines:[],after:[]},c=qN(r,o);zi(a.before,Nr(hn(c,"beforeLabel",this,o))),zi(a.lines,hn(c,"label",this,o)),zi(a.after,Nr(hn(c,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,i){return HN(hn(i.callbacks,"afterBody",this,t))}getFooter(t,i){let{callbacks:r}=i,s=hn(r,"beforeFooter",this,t),o=hn(r,"footer",this,t),a=hn(r,"afterFooter",this,t),c=[];return c=zi(c,Nr(s)),c=zi(c,Nr(o)),c=zi(c,Nr(a)),c}_createItems(t){let i=this._active,r=this.chart.data,s=[],o=[],a=[],c=[],l,d;for(l=0,d=i.length;l<d;++l)c.push(wG(this.chart,i[l]));return t.filter&&(c=c.filter((h,p,g)=>t.filter(h,p,g,r))),t.itemSort&&(c=c.sort((h,p)=>t.itemSort(h,p,r))),Oe(c,h=>{let p=qN(t.callbacks,h);s.push(hn(p,"labelColor",this,h)),o.push(hn(p,"labelPointStyle",this,h)),a.push(hn(p,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=c,c}update(t,i){let r=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let c=ad[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let l=this._size=UN(this,r),d=Object.assign({},c,l),h=$N(this.chart,r,d),p=zN(r,d,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,o={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,r,s){let o=this.getCaretPosition(t,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,r){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:c}=r,{topLeft:l,topRight:d,bottomLeft:h,bottomRight:p}=xs(c),{x:g,y}=t,{width:v,height:_}=i,T,P,N,j,L,k;return o==="center"?(L=y+_/2,s==="left"?(T=g,P=T-a,j=L+a,k=L-a):(T=g+v,P=T+a,j=L-a,k=L+a),N=T):(s==="left"?P=g+Math.max(l,h)+a:s==="right"?P=g+v-Math.max(d,p)-a:P=this.caretX,o==="top"?(j=y,L=j-a,T=P-a,N=P+a):(j=y+_,L=j+a,T=P+a,N=P-a),k=j),{x1:T,x2:P,x3:N,y1:j,y2:L,y3:k}}drawTitle(t,i,r){let s=this.title,o=s.length,a,c,l;if(o){let d=$o(r.rtl,this.x,this.width);for(t.x=tm(this,r.titleAlign,r),i.textAlign=d.textAlign(r.titleAlign),i.textBaseline="middle",a=bt(r.titleFont),c=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,l=0;l<o;++l)i.fillText(s[l],d.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,l+1===o&&(t.y+=r.titleMarginBottom-c)}}_drawColorBox(t,i,r,s,o){let a=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:l,boxWidth:d}=o,h=bt(o.bodyFont),p=tm(this,"left",o),g=s.x(p),y=l<h.lineHeight?(h.lineHeight-l)/2:0,v=i.y+y;if(o.usePointStyle){let _={radius:Math.min(d,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},T=s.leftForLtr(g,d)+d/2,P=v+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,Hg(t,_,T,P),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,Hg(t,_,T,P)}else{t.lineWidth=me(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let _=s.leftForLtr(g,d),T=s.leftForLtr(s.xPlus(g,1),d-2),P=xs(a.borderRadius);Object.values(P).some(N=>N!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Fc(t,{x:_,y:v,w:d,h:l,radius:P}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Fc(t,{x:T,y:v+1,w:d-2,h:l-2,radius:P}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(_,v,d,l),t.strokeRect(_,v,d,l),t.fillStyle=a.backgroundColor,t.fillRect(T,v+1,d-2,l-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,i,r){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:d,boxPadding:h}=r,p=bt(r.bodyFont),g=p.lineHeight,y=0,v=$o(r.rtl,this.x,this.width),_=function(I){i.fillText(I,v.x(t.x+y),t.y+g/2),t.y+=g+o},T=v.textAlign(a),P,N,j,L,k,C,w;for(i.textAlign=a,i.textBaseline="middle",i.font=p.string,t.x=tm(this,T,r),i.fillStyle=r.bodyColor,Oe(this.beforeBody,_),y=c&&T!=="right"?a==="center"?d/2+h:d+2+h:0,L=0,C=s.length;L<C;++L){for(P=s[L],N=this.labelTextColors[L],i.fillStyle=N,Oe(P.before,_),j=P.lines,c&&j.length&&(this._drawColorBox(i,t,L,v,r),g=Math.max(p.lineHeight,l)),k=0,w=j.length;k<w;++k)_(j[k]),g=p.lineHeight;Oe(P.after,_)}y=0,g=p.lineHeight,Oe(this.afterBody,_),t.y-=o}drawFooter(t,i,r){let s=this.footer,o=s.length,a,c;if(o){let l=$o(r.rtl,this.x,this.width);for(t.x=tm(this,r.footerAlign,r),t.y+=r.footerMarginTop,i.textAlign=l.textAlign(r.footerAlign),i.textBaseline="middle",a=bt(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,i,r,s){let{xAlign:o,yAlign:a}=this,{x:c,y:l}=t,{width:d,height:h}=r,{topLeft:p,topRight:g,bottomLeft:y,bottomRight:v}=xs(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(c+p,l),a==="top"&&this.drawCaret(t,i,r,s),i.lineTo(c+d-g,l),i.quadraticCurveTo(c+d,l,c+d,l+g),a==="center"&&o==="right"&&this.drawCaret(t,i,r,s),i.lineTo(c+d,l+h-v),i.quadraticCurveTo(c+d,l+h,c+d-v,l+h),a==="bottom"&&this.drawCaret(t,i,r,s),i.lineTo(c+y,l+h),i.quadraticCurveTo(c,l+h,c,l+h-y),a==="center"&&o==="left"&&this.drawCaret(t,i,r,s),i.lineTo(c,l+p),i.quadraticCurveTo(c,l,c+p,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){let a=ad[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=UN(this,t),l=Object.assign({},a,this._size),d=$N(i,t,l),h=zN(t,l,d,i);(s._to!==h.x||o._to!==h.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=jt(i.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&c&&(t.save(),t.globalAlpha=r,this.drawBackground(o,t,s,i),lE(t,i.textDirection),o.y+=a.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),uE(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let r=this._active,s=t.map(({datasetIndex:c,index:l})=>{let d=this.chart.getDatasetMeta(c);if(!d)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:d.data[l],index:l}}),o=!Zu(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(t,o,i,r),c=this._positionChanged(a,t),l=i||!Zu(a,o)||c;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,r,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return i.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(t,i){let{caretX:r,caretY:s,options:o}=this,a=ad[o.position].call(this,t,i);return a!==!1&&(r!==a.x||s!==a.y)}}return n})(),TG={id:"tooltip",_element:WN,positioners:ad,afterInit(n,e,t){t&&(n.tooltip=new WN({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",X($({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ik},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},MG=Object.freeze({__proto__:null,Colors:U7,Decimation:q7,Filler:dG,Legend:yG,SubTitle:bG,Title:_G,Tooltip:TG}),AG=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function PG(n,e,t,i){let r=n.indexOf(e);if(r===-1)return AG(n,e,t,i);let s=n.lastIndexOf(e);return r!==s?t:r}var RG=(n,e)=>n===null?null:Mt(Math.round(n),0,e);function GN(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var OG=(()=>{class n extends qo{static id="category";static defaults={ticks:{callback:GN}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let i=this._addedLabels;if(i.length){let r=this.getLabels();for(let{index:s,label:o}of i)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(Ce(t))return null;let r=this.getLabels();return i=isFinite(i)&&r[i]===t?i:PG(r,t,ae(i,t),this._addedLabels),RG(i,r.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),i||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){let t=this.min,i=this.max,r=this.options.offset,s=[],o=this.getLabels();o=t===0&&i===o.length-1?o:o.slice(t,i+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=i;a++)s.push({value:a});return s}getLabelForValue(t){return GN.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function NG(n,e){let t=[],{bounds:r,step:s,min:o,max:a,precision:c,count:l,maxTicks:d,maxDigits:h,includeBounds:p}=n,g=s||1,y=d-1,{min:v,max:_}=e,T=!Ce(o),P=!Ce(a),N=!Ce(l),j=(_-v)/(h+1),L=$I((_-v)/y/g)*g,k,C,w,I;if(L<1e-14&&!T&&!P)return[{value:v},{value:_}];I=Math.ceil(_/L)-Math.floor(v/L),I>y&&(L=$I(I*L/y/g)*g),Ce(c)||(k=Math.pow(10,c),L=Math.ceil(L*k)/k),r==="ticks"?(C=Math.floor(v/L)*L,w=Math.ceil(_/L)*L):(C=v,w=_),T&&P&&s&&OO((a-o)/s,L/1e3)?(I=Math.round(Math.min((a-o)/L,d)),L=(a-o)/I,C=o,w=a):N?(C=T?o:C,w=P?a:w,I=l-1,L=(w-C)/I):(I=(w-C)/L,Oc(I,Math.round(I),L/1e3)?I=Math.round(I):I=Math.ceil(I));let S=Math.max(HI(L),HI(C));k=Math.pow(10,Ce(c)?S:c),C=Math.round(C*k)/k,w=Math.round(w*k)/k;let x=0;for(T&&(p&&C!==o?(t.push({value:o}),C<o&&x++,Oc(Math.round((C+x*L)*k)/k,o,KN(o,j,n))&&x++):C<o&&x++);x<I;++x){let A=Math.round((C+x*L)*k)/k;if(P&&A>a)break;t.push({value:A})}return P&&p&&w!==a?t.length&&Oc(t[t.length-1].value,a,KN(a,j,n))?t[t.length-1].value=a:t.push({value:a}):(!P||w===a)&&t.push({value:w}),t}function KN(n,e,{horizontal:t,minRotation:i}){let r=Un(i),s=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}var Bc=class extends qo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Ce(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this,o=c=>r=t?r:c,a=c=>s=i?s:c;if(e){let c=li(r),l=li(s);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(r===s){let c=s===0?1:Math.abs(s*.05);a(s+c),e||o(r-c)}this.min=r,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,i=this.getTickLimit();i=Math.max(2,i);let r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=NG(r,s);return e.bounds==="ticks"&&zI(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let e=this.ticks,t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){let r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return kc(e,this.chart.options.locale,this.options.ticks.format)}},VE=class extends Bc{static id="linear";static defaults={ticks:{callback:Ju.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=nt(e)?e:0,this.max=nt(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,i=Un(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},ud=n=>Math.floor(Ar(n)),Ho=(n,e)=>Math.pow(10,ud(n)+e);function QN(n){return n/Math.pow(10,ud(n))===1}function YN(n,e,t){let i=Math.pow(10,t),r=Math.floor(n/i);return Math.ceil(e/i)-r}function kG(n,e){let t=e-n,i=ud(t);for(;YN(n,e,i)>10;)i++;for(;YN(n,e,i)<10;)i--;return Math.min(i,ud(n))}function FG(n,{min:e,max:t}){e=dn(n.min,e);let i=[],r=ud(e),s=kG(e,t),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),c=r>s?Math.pow(10,r):0,l=Math.round((e-c)*o)/o,d=Math.floor((e-c)/a/10)*a*10,h=Math.floor((l-d)/Math.pow(10,s)),p=dn(n.min,Math.round((c+d+h*Math.pow(10,s))*o)/o);for(;p<t;)i.push({value:p,major:QN(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),p=Math.round((c+d+h*Math.pow(10,s))*o)/o;let g=dn(n.max,p);return i.push({value:g,major:QN(g),significand:h}),i}var jE=class extends qo{static id="logarithmic";static defaults={ticks:{callback:Ju.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let i=Bc.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return nt(i)&&i>0?i:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=nt(e)?Math.max(0,e):null,this.max=nt(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!nt(this._userMin)&&(this.min=e===Ho(this.min,0)?Ho(this.min,-1):Ho(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),i=this.min,r=this.max,s=a=>i=e?i:a,o=a=>r=t?r:a;i===r&&(i<=0?(s(1),o(10)):(s(Ho(i,-1)),o(Ho(r,1)))),i<=0&&s(Ho(r,-1)),r<=0&&o(Ho(i,1)),this.min=i,this.max=r}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},i=FG(t,this);return e.bounds==="ticks"&&zI(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":kc(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Ar(e),this._valueRange=Ar(this.max)-Ar(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ar(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function BE(n){let e=n.ticks;if(e.display&&n.display){let t=jt(e.backdropPadding);return ae(e.font&&e.font.size,Ge.font.size)+t.height}return 0}function LG(n,e,t){return t=ze(t)?t:[t],{w:$O(n,e.string,t),h:t.length*e.lineHeight}}function ZN(n,e,t,i,r){return n===i||n===r?{start:e-t/2,end:e+t/2}:n<i||n>r?{start:e-t,end:e}:{start:e,end:e+t}}function VG(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?He/s:0;for(let c=0;c<s;c++){let l=o.setContext(n.getPointLabelContext(c));r[c]=l.padding;let d=n.getPointPosition(c,n.drawingArea+r[c],a),h=bt(l.font),p=LG(n.ctx,h,n._pointLabels[c]);i[c]=p;let g=un(n.getIndexAngle(c)+a),y=Math.round(Bg(g)),v=ZN(y,d.x,p.w,0,180),_=ZN(y,d.y,p.h,90,270);jG(t,e,g,v,_)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=$G(n,i,r)}function jG(n,e,t,i,r){let s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t)),a=0,c=0;i.start<e.l?(a=(e.l-i.start)/s,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),r.start<e.t?(c=(e.t-r.start)/o,n.t=Math.min(n.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,n.b=Math.max(n.b,e.b+c))}function BG(n,e,t){let i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=t,c=n.getPointPosition(e,i+r+o,s),l=Math.round(Bg(un(c.angle+ct))),d=qG(c.y,a.h,l),h=zG(l),p=HG(c.x,a.w,h);return{visible:!0,x:c.x,y:d,textAlign:h,left:p,top:d,right:p+a.w,bottom:d+a.h}}function UG(n,e){if(!e)return!0;let{left:t,top:i,right:r,bottom:s}=n;return!(Bi({x:t,y:i},e)||Bi({x:t,y:s},e)||Bi({x:r,y:i},e)||Bi({x:r,y:s},e))}function $G(n,e,t){let i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:BE(s)/2,additionalAngle:o?He/r:0},l;for(let d=0;d<r;d++){c.padding=t[d],c.size=e[d];let h=BG(n,d,c);i.push(h),a==="auto"&&(h.visible=UG(h,l),h.visible&&(l=h))}return i}function zG(n){return n===0||n===180?"center":n<180?"left":"right"}function HG(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function qG(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function WG(n,e,t){let{left:i,top:r,right:s,bottom:o}=t,{backdropColor:a}=e;if(!Ce(a)){let c=xs(e.borderRadius),l=jt(e.backdropPadding);n.fillStyle=a;let d=i-l.left,h=r-l.top,p=s-i+l.width,g=o-r+l.height;Object.values(c).some(y=>y!==0)?(n.beginPath(),Fc(n,{x:d,y:h,w:p,h:g,radius:c}),n.fill()):n.fillRect(d,h,p,g)}}function GG(n,e){let{ctx:t,options:{pointLabels:i}}=n;for(let r=e-1;r>=0;r--){let s=n._pointLabelItems[r];if(!s.visible)continue;let o=i.setContext(n.getPointLabelContext(r));WG(t,o,s);let a=bt(o.font),{x:c,y:l,textAlign:d}=s;Ss(t,n._pointLabels[r],c,l+a.lineHeight/2,a,{color:o.color,textAlign:d,textBaseline:"middle"})}}function Ek(n,e,t,i){let{ctx:r}=n;if(t)r.arc(n.xCenter,n.yCenter,e,0,qe);else{let s=n.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function KG(n,e,t,i,r){let s=n.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!i||!a||!c||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),Ek(n,t,o,i),s.closePath(),s.stroke(),s.restore())}function QG(n,e,t){return Rr(n,{label:t,index:e,type:"pointLabel"})}var UE=class extends Bc{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ju.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=jt(BE(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=nt(e)&&!isNaN(e)?e:0,this.max=nt(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/BE(this.options))}generateTickLabels(e){Bc.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{let r=Be(this.options.pointLabels.callback,[t,i],this);return r||r===0?r:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){let e=this.options;e.display&&e.pointLabels.display?VG(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){let t=qe/(this._pointLabels.length||1),i=this.options.startAngle||0;return un(e*t+Un(i))}getDistanceFromCenterForValue(e){if(Ce(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Ce(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let i=t[e];return QG(this.getContext(),e,i)}}getPointPosition(e,t,i=0){let r=this.getIndexAngle(e)-ct+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let i=this.ctx;i.save(),i.beginPath(),Ek(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:i,grid:r,border:s}=t,o=this._pointLabels.length,a,c,l;if(t.pointLabels.display&&GG(this,o),r.display&&this.ticks.forEach((d,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(d.value);let p=this.getContext(h),g=r.setContext(p),y=s.setContext(p);KG(this,g,c,o,y)}}),i.display){for(e.save(),a=o-1;a>=0;a--){let d=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:p}=d;!p||!h||(e.lineWidth=p,e.strokeStyle=h,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;let r=this.getIndexAngle(0),s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;let l=i.setContext(this.getContext(c)),d=bt(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=d.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;let h=jt(l.backdropPadding);e.fillRect(-o/2-h.left,-s-d.size/2-h.top,o+h.width,d.size+h.height)}Ss(e,a.label,0,-s,d,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},fm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},fn=Object.keys(fm);function JN(n,e){return n-e}function XN(n,e){if(Ce(e))return null;let t=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts,o=e;return typeof i=="function"&&(o=i(o)),nt(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(r&&(o=r==="week"&&(Uo(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,r)),+o)}function ek(n,e,t,i){let r=fn.length;for(let s=fn.indexOf(n);s<r-1;++s){let o=fm[fn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return fn[s]}return fn[r-1]}function YG(n,e,t,i,r){for(let s=fn.length-1;s>=fn.indexOf(t);s--){let o=fn[s];if(fm[o].common&&n._adapter.diff(r,i,o)>=e-1)return o}return fn[t?fn.indexOf(t):0]}function ZG(n){for(let e=fn.indexOf(n)+1,t=fn.length;e<t;++e)if(fm[fn[e]].common)return fn[e]}function tk(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:i,hi:r}=Ug(t,e),s=t[i]>=e?t[i]:t[r];n[s]=!0}}function JG(n,e,t,i){let r=n._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value,a,c;for(a=s;a<=o;a=+r.add(a,1,i))c=t[a],c>=0&&(e[c].major=!0);return e}function nk(n,e,t){let i=[],r={},s=e.length,o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!t?i:JG(n,i,r,t)}var $E=(()=>{class n extends qo{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){let r=t.time||(t.time={}),s=this._adapter=new lW._date(t.adapters.date);s.init(i),Pc(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:XN(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,r=t.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:c}=this.getUserBounds();function l(d){!a&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!c&&!isNaN(d.max)&&(o=Math.max(o,d.max))}(!a||!c)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=nt(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=nt(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],r=t[t.length-1]),{min:i,max:r}}buildTicks(){let t=this.options,i=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,c=FO(s,o,a);return this._unit=i.unit||(r.autoSkip?ek(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):YG(this,c.length,i.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:ZG(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),nk(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,r=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?r=o:r=(o-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;i=Mt(i,0,a),r=Mt(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){let t=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||ek(o.minUnit,i,r,this._getLabelCapacity(i)),c=ae(s.ticks.stepSize,1),l=a==="week"?o.isoWeekday:!1,d=Uo(l)||l===!0,h={},p=i,g,y;if(d&&(p=+t.startOf(p,"isoWeek",l)),p=+t.startOf(p,d?"day":a),t.diff(r,i,a)>1e5*c)throw new Error(i+" and "+r+" are too far apart with stepSize of "+c+" "+a);let v=s.ticks.source==="data"&&this.getDataTimestamps();for(g=p,y=0;g<r;g=+t.add(g,c,a),y++)tk(h,g,v);return(g===r||s.bounds==="ticks"||y===1)&&tk(h,g,v),Object.keys(h).sort(JN).map(_=>+_)}getLabelForValue(t){let i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(t,r.tooltipFormat):i.format(t,r.displayFormats.datetime)}format(t,i){let s=this.options.time.displayFormats,o=this._unit,a=i||s[o];return this._adapter.format(t,a)}_tickFormatFunction(t,i,r,s){let o=this.options,a=o.ticks.callback;if(a)return Be(a,[t,i,r],this);let c=o.time.displayFormats,l=this._unit,d=this._majorUnit,h=l&&c[l],p=d&&c[d],g=r[i],y=d&&p&&g&&g.major;return this._adapter.format(t,s||(y?p:h))}generateTickLabels(t){let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(t){let i=this._offsets,r=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,r=this.ctx.measureText(t).width,s=Un(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:r*o+c*a,h:r*a+c*o}}_getLabelCapacity(t){let i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(t,0,nk(this,[t],this._majorUnit),s),a=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],i,r;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,r;if(t.length)return t;let s=this.getLabels();for(i=0,r=s.length;i<r;++i)t.push(XN(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return GI(t.sort(JN))}}return n})();function nm(n,e,t){let i=0,r=n.length-1,s,o,a,c;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=ji(n,"pos",e)),{pos:s,time:a}=n[i],{pos:o,time:c}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=ji(n,"time",e)),{time:s,pos:a}=n[i],{time:o,pos:c}=n[r]);let l=o-s;return l?a+(c-a)*(e-s)/l:a}var zE=class extends $E{static id="timeseries";static defaults=$E.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=nm(t,this.min),this._tableRange=nm(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:i}=this,r=[],s=[],o,a,c,l,d;for(o=0,a=e.length;o<a;++o)l=e[o],l>=t&&l<=i&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)d=r[o+1],c=r[o-1],l=r[o],Math.round((d+c)/2)!==l&&s.push({time:l,pos:o/(a-1)});return s}_generate(){let e=this.min,t=this.max,i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(nm(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return nm(this._table,i*this._tableRange+this._minPos,!0)}},XG=Object.freeze({__proto__:null,CategoryScale:OG,LinearScale:VE,LogarithmicScale:jE,RadialLinearScale:UE,TimeScale:$E,TimeSeriesScale:zE}),Ck=[cW,N7,MG,XG];var pm=class n{constructor(e,t){this.backoffice=e;this.firestore=t}chart;ngOnInit(){return E(this,null,function*(){dm.register(...Ck),yield this.loadSickLeavesChart()})}loadSickLeavesChart(){return E(this,null,function*(){let e=yield this.firestore.getSickLeavesStats(),t=["Janeiro","Fevereiro","Mar\xE7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],i=t.map((r,s)=>e[(s+1).toString().padStart(2,"0")]||0);this.chart=new dm("chartSickLeaves",{type:"bar",data:{labels:t,datasets:[{label:"Baixas Emitidas",data:i,backgroundColor:"rgba(1, 98, 76, 0.7)"}]},options:{responsive:!0,plugins:{legend:{display:!0}},scales:{y:{beginAtZero:!0}}}})})}static \u0275fac=function(t){return new(t||n)(W(Vi),W(Kt))};static \u0275cmp=ft({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[pt],decls:74,vars:3,consts:[[1,"dashboard-container"],[1,"stats-overview"],[1,"card"],[1,"value"],[1,"value","pending"],[1,"charts-section"],[1,"chart"],["id","chartSickLeaves"],[1,"table-section"],[1,"table-container"]],template:function(t,i){t&1&&(M(0,"div",0)(1,"h1"),V(2,"Estat\xEDsticas do M\xE9dico - SNS"),R(),M(3,"h2"),V(4,"Bem-vindo(a) \xE0 vis\xE3o geral do desempenho"),R(),M(5,"div",1)(6,"div",2)(7,"h3"),V(8,"Total de baixas"),R(),M(9,"p",3),V(10),R()(),M(11,"div",2)(12,"h3"),V(13,"Total de baixas emitidas"),R(),M(14,"p",3),V(15),R()(),M(16,"div",2)(17,"h3"),V(18,"Baixas pendentes"),R(),M(19,"p",4),V(20),R()(),M(21,"div",2)(22,"h3"),V(23,"\xCDndice de Satisfa\xE7\xE3o"),R(),M(24,"p",3),V(25,"95%"),R()()(),M(26,"div",5)(27,"h3"),V(28,"Baixas emitidas por m\xEAs"),R(),M(29,"div",6),Te(30,"canvas",7),R()(),M(31,"div",8)(32,"h3"),V(33,"Tabela de Consultas Recentes"),R(),M(34,"div",9)(35,"table")(36,"thead")(37,"tr")(38,"th"),V(39,"Data"),R(),M(40,"th"),V(41,"Paciente"),R(),M(42,"th"),V(43,"Especialidade"),R(),M(44,"th"),V(45,"Status"),R()()(),M(46,"tbody")(47,"tr")(48,"td"),V(49,"10/01/2024"),R(),M(50,"td"),V(51,"Jo\xE3o Silva"),R(),M(52,"td"),V(53,"Cl\xEDnica Geral"),R(),M(54,"td"),V(55,"Conclu\xEDdo"),R()(),M(56,"tr")(57,"td"),V(58,"12/01/2024"),R(),M(59,"td"),V(60,"Maria Oliveira"),R(),M(61,"td"),V(62,"Cardiologia"),R(),M(63,"td"),V(64,"Pendente"),R()(),M(65,"tr")(66,"td"),V(67,"15/01/2024"),R(),M(68,"td"),V(69,"Roberto Costa"),R(),M(70,"td"),V(71,"Ortopedia"),R(),M(72,"td"),V(73,"Conclu\xEDdo"),R()()()()()()()),t&2&&(H(10),Ft(i.backoffice.totalLeaves),H(5),Ft(i.backoffice.EmitedLeaves),H(5),Ft(i.backoffice.pendingLeaves))},styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border-radius:10px;box-shadow:0 4px 6px #0000001a;box-sizing:border-box;width:100%}.dashboard-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#01624c;font-size:26px;margin-bottom:10px}.dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#333;font-size:18px;margin-bottom:20px}.dashboard-container[_ngcontent-%COMP%]   .stats-overview[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;margin-bottom:30px}.dashboard-container[_ngcontent-%COMP%]   .stats-overview[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 6px #0000001a;text-align:center;flex:1;max-width:200px}.dashboard-container[_ngcontent-%COMP%]   .stats-overview[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;color:#01624c;margin-bottom:10px}.dashboard-container[_ngcontent-%COMP%]   .stats-overview[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.dashboard-container[_ngcontent-%COMP%]   .stats-overview[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .value.pending[_ngcontent-%COMP%]{color:#d9534f}.dashboard-container[_ngcontent-%COMP%]   .charts-section[_ngcontent-%COMP%]{margin-bottom:40px;text-align:center}.dashboard-container[_ngcontent-%COMP%]   .charts-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#01624c;font-weight:700;margin-bottom:20px}.dashboard-container[_ngcontent-%COMP%]   .charts-section[_ngcontent-%COMP%]   .chart[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.dashboard-container[_ngcontent-%COMP%]   .charts-section[_ngcontent-%COMP%]   .chart[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:100%}.dashboard-container[_ngcontent-%COMP%]   .table-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto}.dashboard-container[_ngcontent-%COMP%]   .table-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff;border-radius:8px;overflow:hidden}.dashboard-container[_ngcontent-%COMP%]   .table-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#01624c;color:#fff;text-align:left;padding:12px;font-size:14px}.dashboard-container[_ngcontent-%COMP%]   .table-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #ddd;font-size:14px}.dashboard-container[_ngcontent-%COMP%]   .table-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.dashboard-container[_ngcontent-%COMP%]   .table-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.dashboard-container[_ngcontent-%COMP%]   .table-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}.dashboard-container[_ngcontent-%COMP%]   .table-section[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#cce4ff;cursor:pointer}"]})};var eK=(n,e)=>({"status-issued":n,"status-pending":e});function tK(n,e){if(n&1){let t=Pa();M(0,"li",20),ie("click",function(){let r=Jn(t).$implicit,s=St(2);return Xn(s.fillSnsField2(r))}),M(1,"span",21),V(2),R(),M(3,"span",22),V(4),R()()}if(n&2){let t=e.$implicit;H(2),Ft(t.nome),H(2),Ft(t.numeroSNS)}}function nK(n,e){if(n&1&&(M(0,"div",18)(1,"ul"),Pt(2,tK,5,2,"li",19),R()()),n&2){let t=St();H(2),Ie("ngForOf",t.filteredPatients)}}function iK(n,e){if(n&1){let t=Pa();M(0,"tr",20),ie("click",function(){let r=Jn(t).$implicit,s=St();return Xn(s.fillSnsField(r))}),M(1,"td"),V(2),R(),M(3,"td"),V(4),R(),M(5,"td"),V(6),R(),M(7,"td"),V(8),R(),M(9,"td",23),V(10),R()()}if(n&2){let t=e.$implicit;cr("clickable",!t.isIssued),H(2),Ft(t.patient.id),H(2),Ft(t.patient.name),H(2),Ft(t.isIssued?t.period.start:""),H(2),Ft(t.isIssued?t.period.end:""),H(),Ie("ngClass",OT(8,eK,t.isIssued,!t.isIssued)),H(),wi(" ",t.isIssued?"Emitido":"Pendente"," ")}}var gm=class n{constructor(e,t){this.firestoreService=e;this.backOffice=t}sns="";diagnosis="";startDate=null;endDate=null;recommendations="";filteredPatients=[];sickLeaves=[];doctorId="";sickLeaveId=null;ngOnInit(){this.backOffice.patient?.numeroSNS&&(this.doctorId=this.backOffice.patient.numeroSNS),this.getSickLeaves()}onSnsChange(e){e.length>=3?this.firestoreService.searchPatientsBySNS(this.doctorId,e).then(t=>{console.log(t),this.filteredPatients=t.filter(i=>i.numeroSNS.includes(e))}):this.filteredPatients=[],this.isFormValid()}getSickLeaves(){this.firestoreService.getSickLeavesByDoctor(this.doctorId).then(e=>{this.sickLeaves=e})}submitMedicalLeave(){return E(this,null,function*(){let e=yield this.firestoreService.getPatientBySNS(this.sns);if(this.backOffice.patient&&e&&this.isFormValid()){let t={id:"",patient:{id:this.sns,name:e.nome},doctor:{id:this.doctorId,name:this.backOffice.patient.nome},diagnosis:this.diagnosis,period:{start:this.startDate,end:this.endDate},recommendations:this.recommendations,createdAt:new Date,isIssued:!0,status:"active"};yield this.firestoreService.addSickLeave(t,this.sickLeaveId).then(()=>{alert("Baixa m\xE9dica emitida com sucesso!"),this.resetForm(),this.getSickLeaves()})}})}isFormValid(){let e=this.sns.length>=3,t=this.diagnosis.length>=10,i=this.startDate&&!isNaN(new Date(this.startDate).getTime())||!1,r=this.endDate&&!isNaN(new Date(this.endDate).getTime())||!1,s=!1;if(i&&r){let o=new Date(this.startDate),a=new Date(this.endDate);s=o<=a}return e&&t&&i&&r&&s}resetForm(){this.sns="",this.diagnosis="",this.startDate=null,this.endDate=null,this.recommendations="",this.filteredPatients=[]}fillSnsField(e){e.isIssued||(this.sns=e.patient.id,this.sickLeaveId=e.id,console.log(e.id))}fillSnsField2(e){this.sns=e.numeroSNS,this.filteredPatients=[]}static \u0275fac=function(t){return new(t||n)(W(Kt),W(Vi))};static \u0275cmp=ft({type:n,selectors:[["app-emitir-baixa"]],standalone:!0,features:[pt],decls:46,vars:8,consts:[[1,"section"],[1,"emitir-baixa-container"],[1,"form"],[1,"form-group"],["for","sns"],["type","text","id","sns","name","sns","placeholder","Digite o n\xFAmero do SNS","maxlength","9","required","",3,"ngModelChange","input","ngModel"],["class","patient-suggestions",4,"ngIf"],["for","diagnosis"],["id","diagnosis","name","diagnosis","rows","3","placeholder","Descri\xE7\xE3o do diagn\xF3stico","required","",3,"ngModelChange","input","ngModel"],["for","startDate"],["type","date","id","startDate","name","startDate","required","",3,"input","ngModelChange","ngModel"],["for","endDate"],["type","date","id","endDate","name","endDate","required","",3,"input","ngModelChange","ngModel"],["for","recommendations"],["id","recommendations","name","recommendations","rows","3","placeholder","Recomenda\xE7\xF5es para o paciente",3,"ngModelChange","input","ngModel"],["type","submit",3,"click","disabled"],[1,"medical-leave-table"],[3,"clickable","click",4,"ngFor","ngForOf"],[1,"patient-suggestions"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"patient-name"],[1,"patient-sns"],[3,"ngClass"]],template:function(t,i){t&1&&(M(0,"div",0)(1,"div",1)(2,"h1"),V(3,"Emitir Baixa M\xE9dica"),R(),M(4,"div",2)(5,"div",3)(6,"label",4),V(7,"N\xFAmero de SNS do Paciente"),R(),M(8,"input",5),Ye("ngModelChange",function(s){return et(i.sns,s)||(i.sns=s),s}),ie("input",function(){return i.onSnsChange(i.sns)}),R(),Pt(9,nK,3,1,"div",6),R(),M(10,"div",3)(11,"label",7),V(12,"Diagn\xF3stico"),R(),M(13,"textarea",8),Ye("ngModelChange",function(s){return et(i.diagnosis,s)||(i.diagnosis=s),s}),ie("input",function(){return i.isFormValid()}),R()(),M(14,"div",3)(15,"label",9),V(16,"Data de In\xEDcio"),R(),M(17,"input",10),ie("input",function(){return i.isFormValid()}),Ye("ngModelChange",function(s){return et(i.startDate,s)||(i.startDate=s),s}),R()(),M(18,"div",3)(19,"label",11),V(20,"Data de T\xE9rmino"),R(),M(21,"input",12),ie("input",function(){return i.isFormValid()}),Ye("ngModelChange",function(s){return et(i.endDate,s)||(i.endDate=s),s}),R()(),M(22,"div",3)(23,"label",13),V(24,"Recomenda\xE7\xF5es"),R(),M(25,"textarea",14),Ye("ngModelChange",function(s){return et(i.recommendations,s)||(i.recommendations=s),s}),ie("input",function(){return i.isFormValid()}),R()(),M(26,"button",15),ie("click",function(){return i.submitMedicalLeave()}),V(27," Emitir Baixa "),R()()(),M(28,"div",16)(29,"h2"),V(30,"Baixas M\xE9dicas do M\xE9dico"),R(),M(31,"table")(32,"thead")(33,"tr")(34,"th"),V(35,"N\xFAmero SNS"),R(),M(36,"th"),V(37,"Paciente"),R(),M(38,"th"),V(39,"Data de Emiss\xE3o"),R(),M(40,"th"),V(41,"Data de T\xE9rmino"),R(),M(42,"th"),V(43,"Status"),R()()(),M(44,"tbody"),Pt(45,iK,11,11,"tr",17),R()()()()),t&2&&(H(8),Qe("ngModel",i.sns),H(),Ie("ngIf",i.filteredPatients.length>0),H(4),Qe("ngModel",i.diagnosis),H(4),Qe("ngModel",i.startDate),H(4),Qe("ngModel",i.endDate),H(4),Qe("ngModel",i.recommendations),H(),Ie("disabled",!i.isFormValid()),H(19),Ie("ngForOf",i.sickLeaves))},dependencies:[uO,ki,_s,Fo,AI,ts,ka,Na,Fi,xr],styles:[".section[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;gap:10px;height:100%}.emitir-baixa-container[_ngcontent-%COMP%]{height:calc(100% - 40px);flex:1;max-width:600px;padding:20px;border-radius:10px;background-color:#f9f9f9;box-shadow:0 4px 6px #0000001a}.emitir-baixa-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#01624c;margin-bottom:20px}.emitir-baixa-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.emitir-baixa-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.emitir-baixa-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:700;margin-bottom:5px}.emitir-baixa-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .emitir-baixa-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;border-radius:5px;font-size:14px}.emitir-baixa-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .emitir-baixa-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#01624c}.emitir-baixa-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#01624c;color:#fff;padding:10px 20px;border:none;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s ease}.emitir-baixa-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#014d3b}.emitir-baixa-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#bbb;cursor:not-allowed}.patient-suggestions[_ngcontent-%COMP%]{margin-top:10px;background-color:#f1f1f1;border:1px solid #ddd;border-radius:5px;padding:10px;max-height:200px;overflow-y:auto}.patient-suggestions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.patient-suggestions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px;display:flex;justify-content:space-between;align-items:center;cursor:pointer}.patient-suggestions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#cce4ff}.patient-suggestions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .patient-name[_ngcontent-%COMP%]{font-weight:700}.patient-suggestions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .patient-sns[_ngcontent-%COMP%]{font-style:italic;color:#555}.medical-leave-table[_ngcontent-%COMP%]{flex:1}.medical-leave-table[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#01624c;text-align:center;margin-bottom:10px}.medical-leave-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff;border-radius:8px;overflow:hidden}.medical-leave-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .medical-leave-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;padding:12px;border-bottom:1px solid #ddd}.medical-leave-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#01624c;color:#fff;font-size:14px}.medical-leave-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.medical-leave-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.medical-leave-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}.medical-leave-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#cce4ff;cursor:pointer}.medical-leave-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px}.status-issued[_ngcontent-%COMP%]{color:#01624c;font-weight:700}.status-pending[_ngcontent-%COMP%]{color:#d9534f;font-weight:700}.clickable[_ngcontent-%COMP%]{cursor:pointer}"]})};var WE=n=>({selected:n}),GE=n=>({expanded:n});function rK(n,e){n&1&&Te(0,"span")}function sK(n,e){if(n&1&&(M(0,"span",23),V(1,"Dashboard"),R()),n&2){let t=St();Ie("ngClass",On(1,GE,t.isExpanded))}}function oK(n,e){if(n&1&&(M(0,"span",23),V(1,"Emitir Baixa"),R()),n&2){let t=St();Ie("ngClass",On(1,GE,t.isExpanded))}}function aK(n,e){if(n&1&&(M(0,"span",23),V(1,"Consultar Baixas"),R()),n&2){let t=St();Ie("ngClass",On(1,GE,t.isExpanded))}}function cK(n,e){n&1&&Te(0,"app-dashboard")}function lK(n,e){n&1&&Te(0,"app-emitir-baixa")}function uK(n,e){n&1&&Te(0,"app-consultar-baixas")}var Vi=class n{constructor(e,t,i){this.firestoreService=e;this.fireauthService=t;this.router=i}Selected="Dashboard";isExpanded=!1;toggleSidebar(){this.isExpanded=!this.isExpanded}medicId=null;patient=null;patientName="";pendingLeaves=0;EmitedLeaves=0;totalLeaves=0;ngOnInit(){return E(this,null,function*(){let e=this.fireauthService.getCurrentUser();if(!e){this.router.navigate(["/login"]);return}yield this.loadPatientData(e.uid),this.patient&&(yield this.firestoreService.checkIfMedic(this.patient.numeroSNS))&&(this.medicId=yield this.firestoreService.getMedicById(this.patient.numeroSNS))})}loadPatientData(e){return E(this,null,function*(){this.patient=yield this.firestoreService.getPatientByUID(e),this.patient&&(this.patientName=this.patient.nome,this.pendingLeaves=yield this.firestoreService.getPendingSickLeavesCount(this.patient?.numeroSNS),this.EmitedLeaves=yield this.firestoreService.getIssuedSickLeavesCount(this.patient?.numeroSNS),this.totalLeaves=this.EmitedLeaves+this.pendingLeaves)})}static \u0275fac=function(t){return new(t||n)(W(Kt),W(Li),W(ri))};static \u0275cmp=ft({type:n,selectors:[["app-back-office"]],standalone:!0,features:[pt],decls:32,vars:20,consts:[[1,"sidebar"],[1,"toggle-btn",3,"click"],[1,"ico"],["viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg","id","menu-alt",1,"icon","glyph"],["d","M21,19H3a1,1,0,0,1,0-2H21a1,1,0,0,1,0,2Z",1,"a-top"],["d","M21,13H3a1,1,0,0,1,0-2H21a1,1,0,0,1,0,2Z"],["d","M21,7H3A1,1,0,0,1,3,5H21a1,1,0,0,1,0,2Z",1,"b-bot"],[4,"ngIf"],[1,"menu"],[3,"ngClass"],[3,"click"],["fill","#fff","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg","id","dashboard",1,"icon","glyph"],["x","2","y","2","width","9","height","11","rx","2"],["x","13","y","2","width","9","height","7","rx","2"],["x","2","y","15","width","9","height","7","rx","2"],["x","13","y","11","width","9","height","11","rx","2"],["class","menu-text",3,"ngClass",4,"ngIf"],["fill","#fff","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg","id","file-new",1,"icon","glyph"],["d","M19,7.41V12H18a3,3,0,0,0-3,3,3,3,0,0,0-3,3v3H4a2,2,0,0,1-2-2V4A2,2,0,0,1,4,2h9.59A2,2,0,0,1,15,2.58L18.42,6A2,2,0,0,1,19,7.41ZM21,17H19V15a1,1,0,0,0-2,0v2H15a1,1,0,0,0,0,2h2v2a1,1,0,0,0,2,0V19h2a1,1,0,0,0,0-2Zm-2-5H18"],["fill","#fff","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg","id","file-search",1,"icon","glyph"],["d","M18,7.41V9.26A6.89,6.89,0,0,0,14,8a7,7,0,0,0-3.6,13H4a2,2,0,0,1-2-2V4A2,2,0,0,1,4,2h8.59A2,2,0,0,1,14,2.59L17.41,6A2,2,0,0,1,18,7.41Zm3.76,14.24a1,1,0,0,1-1.41.11l-3.3-2.83A5,5,0,1,1,19,15a4.9,4.9,0,0,1-.65,2.41l3.3,2.83A1,1,0,0,1,21.76,21.65ZM14,18a3,3,0,1,0-3-3A3,3,0,0,0,14,18Z"],[1,"main-container"],[1,"working-area"],[1,"menu-text",3,"ngClass"]],template:function(t,i){t&1&&(M(0,"div",0)(1,"button",1),ie("click",function(){return i.toggleSidebar()}),M(2,"div",2),Pn(),M(3,"svg",3),Te(4,"path",4)(5,"path",5)(6,"path",6),R()(),Pt(7,rK,1,0,"span",7),R(),ei(),M(8,"ul",8)(9,"li",9)(10,"a",10),ie("click",function(){return i.Selected="Dashboard"}),Pn(),M(11,"svg",11),Te(12,"rect",12)(13,"rect",13)(14,"rect",14)(15,"rect",15),R(),Pt(16,sK,2,3,"span",16),R()(),ei(),M(17,"li",9)(18,"a",10),ie("click",function(){return i.Selected="Emit"}),Pn(),M(19,"svg",17),Te(20,"path",18),R(),Pt(21,oK,2,3,"span",16),R()(),ei(),M(22,"li",9)(23,"a",10),ie("click",function(){return i.Selected="Consult"}),Pn(),M(24,"svg",19),Te(25,"path",20),R(),Pt(26,aK,2,3,"span",16),R()()()(),ei(),M(27,"div",21)(28,"div",22),Pt(29,cK,1,0,"app-dashboard",7)(30,lK,1,0,"app-emitir-baixa",7)(31,uK,1,0,"app-consultar-baixas",7),R()()),t&2&&(cr("expanded",i.isExpanded),H(2),cr("expanded",i.isExpanded),H(5),Ie("ngIf",i.isExpanded),H(2),Ie("ngClass",On(14,WE,i.Selected==="Dashboard")),H(7),Ie("ngIf",i.isExpanded),H(),Ie("ngClass",On(16,WE,i.Selected==="Emit")),H(4),Ie("ngIf",i.isExpanded),H(),Ie("ngClass",On(18,WE,i.Selected==="Consult")),H(4),Ie("ngIf",i.isExpanded),H(3),Ie("ngIf",i.Selected==="Dashboard"),H(),Ie("ngIf",i.Selected==="Emit"),H(),Ie("ngIf",i.Selected==="Consult"))},dependencies:[Tg,pm,gm,ka,Na],styles:['@charset "UTF-8";.sidebar[_ngcontent-%COMP%]{margin:10px;width:60px;height:calc(100vh - 20px);background-color:#01624c;padding:10px;box-sizing:border-box;display:flex;flex-direction:column;align-items:center;position:fixed;border-radius:10px;transition:width .3s ease;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);box-shadow:0 0 5px #7a7a7acc}.sidebar.expanded[_ngcontent-%COMP%]{width:200px}.sidebar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{height:30px;width:30px;background:none;border:none;color:#ecf0f1;font-size:20px;cursor:pointer;margin:10px 0 30px;padding:0;outline:none}.sidebar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   .ico[_ngcontent-%COMP%]{transform:rotate(0);transition:.3s ease;height:30px;width:30px}.sidebar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   .ico[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:30px;height:30px;fill:#fff}.sidebar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   .ico.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}.sidebar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   .ico.expanded[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .a-top[_ngcontent-%COMP%]{transform:translateY(-6px)}.sidebar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   .ico.expanded[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .b-bot[_ngcontent-%COMP%]{transform:translateY(6px)}.sidebar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:start;gap:20px}.sidebar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;flex-direction:row;border-radius:50px;width:100%;height:40px;transition:.3s ease}.sidebar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:25px;width:25px}.sidebar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:100%;box-sizing:border-box;display:flex;color:#fff;justify-content:center;align-items:center;text-decoration:none;padding:0;font-size:16px}.sidebar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .menu-text[_ngcontent-%COMP%]{opacity:0;overflow:hidden;flex:1;text-align:center}.sidebar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .menu-text.expanded[_ngcontent-%COMP%]{opacity:1}.sidebar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#ffffffb3}.sidebar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{color:#01624c!important}.sidebar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{fill:#01624c!important}.sidebar[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#fff}.sidebar[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#01624c!important}.sidebar[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#01624c!important}.sidebar.expanded[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:0 10px!important}.sidebar.expanded[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:25px;width:25px}.main-container[_ngcontent-%COMP%]{width:100vw;height:100vh;padding:10px 80px;box-sizing:border-box}.main-container[_ngcontent-%COMP%]   .working-area[_ngcontent-%COMP%]{width:100%;height:100%;box-sizing:border-box;overflow-y:auto}']})};var mm=class n{constructor(e,t,i){this.router=e;this.fireauthService=t;this.firestore=i}name="";utente="";email="";password="";confirmPassword="";morada="";bilheteIdentidade="";dataNascimento=new Date;medicoId="";onSubmit(){return E(this,null,function*(){if(this.isValidForm())try{let t=(yield this.fireauthService.register(this.email,this.password))?.user.uid,i=yield this.getRandomMedic(),r=i?i.id:"";if(t){let s={id:t,nome:this.name,email:this.email,morada:this.morada,bilheteIdentidade:this.bilheteIdentidade,dataNascimento:this.dataNascimento,numeroSNS:this.utente,medicoId:r};yield this.firestore.addPatient(s),alert("Registro bem-sucedido!"),this.router.navigate(["/login"])}else return}catch(e){console.error("Erro ao registrar:",e),alert("Erro ao registrar. Tente novamente.")}})}getRandomMedic(){return E(this,null,function*(){return new Promise((e,t)=>{this.firestore.getMedics().subscribe(i=>{if(i.length===0)e(null);else{let r=i[Math.floor(Math.random()*i.length)];e(r)}},t)})})}isValidForm(){return this.name.trim().length<3?(alert("O nome deve conter pelo menos 3 caracteres."),!1):/^\d{9}$/.test(this.utente)?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)?this.password.length<6?(alert("A senha deve conter pelo menos 6 caracteres."),!1):this.password!==this.confirmPassword?(alert("As senhas n\xE3o coincidem!"),!1):this.morada.trim()?this.bilheteIdentidade.trim()?this.dataNascimento?!0:(alert("A Data de Nascimento \xE9 obrigat\xF3ria."),!1):(alert("O Bilhete de Identidade \xE9 obrigat\xF3rio."),!1):(alert("A morada \xE9 obrigat\xF3ria."),!1):(alert("Por favor, insira um email v\xE1lido."),!1):(alert("O n\xFAmero de utente deve ter 9 d\xEDgitos!"),!1)}navigateToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)(W(ri),W(Li),W(Kt))};static \u0275cmp=ft({type:n,selectors:[["app-register"]],standalone:!0,features:[pt],decls:45,vars:8,consts:[[1,"register-container"],[1,"register-card"],[3,"submit"],[1,"form-group"],["for","name"],["id","name","type","text","name","name","required","",3,"ngModelChange","ngModel"],["for","utente"],["id","utente","type","text","name","utente","required","","pattern","\\d{9}","title","O n\xFAmero de utente deve ter 9 d\xEDgitos.",3,"ngModelChange","ngModel"],["for","email"],["id","email","type","email","name","email","required","",3,"ngModelChange","ngModel"],["for","password"],["id","password","type","password","name","password","required","",3,"ngModelChange","ngModel"],["for","confirmPassword"],["id","confirmPassword","type","password","name","confirmPassword","required","",3,"ngModelChange","ngModel"],["for","morada"],["id","morada","type","text","name","morada","required","",3,"ngModelChange","ngModel"],["for","bilheteIdentidade"],["id","bilheteIdentidade","type","text","name","bilheteIdentidade","required","",3,"ngModelChange","ngModel"],["for","dataNascimento"],["id","dataNascimento","type","date","name","dataNascimento","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn"],[1,"login-link"],[3,"click"]],template:function(t,i){t&1&&(M(0,"div",0)(1,"div",1)(2,"h1"),V(3,"Crie a sua conta"),R(),M(4,"h2"),V(5,"Preencha os dados abaixo"),R(),M(6,"form",2),ie("submit",function(){return i.onSubmit()}),M(7,"div",3)(8,"label",4),V(9,"Nome"),R(),M(10,"input",5),Ye("ngModelChange",function(s){return et(i.name,s)||(i.name=s),s}),R()(),M(11,"div",3)(12,"label",6),V(13,"N\xFAmero de Utente"),R(),M(14,"input",7),Ye("ngModelChange",function(s){return et(i.utente,s)||(i.utente=s),s}),R()(),M(15,"div",3)(16,"label",8),V(17,"Email"),R(),M(18,"input",9),Ye("ngModelChange",function(s){return et(i.email,s)||(i.email=s),s}),R()(),M(19,"div",3)(20,"label",10),V(21,"Senha"),R(),M(22,"input",11),Ye("ngModelChange",function(s){return et(i.password,s)||(i.password=s),s}),R()(),M(23,"div",3)(24,"label",12),V(25,"Confirmar Senha"),R(),M(26,"input",13),Ye("ngModelChange",function(s){return et(i.confirmPassword,s)||(i.confirmPassword=s),s}),R()(),M(27,"div",3)(28,"label",14),V(29,"Morada"),R(),M(30,"input",15),Ye("ngModelChange",function(s){return et(i.morada,s)||(i.morada=s),s}),R()(),M(31,"div",3)(32,"label",16),V(33,"Bilhete de Identidade"),R(),M(34,"input",17),Ye("ngModelChange",function(s){return et(i.bilheteIdentidade,s)||(i.bilheteIdentidade=s),s}),R()(),M(35,"div",3)(36,"label",18),V(37,"Data de Nascimento"),R(),M(38,"input",19),Ye("ngModelChange",function(s){return et(i.dataNascimento,s)||(i.dataNascimento=s),s}),R()(),M(39,"button",20),V(40,"Registar"),R()(),M(41,"p",21),V(42," J\xE1 tem uma conta? "),M(43,"a",22),ie("click",function(){return i.navigateToLogin()}),V(44,"Fa\xE7a login aqui"),R()()()()),t&2&&(H(10),Qe("ngModel",i.name),H(4),Qe("ngModel",i.utente),H(4),Qe("ngModel",i.email),H(4),Qe("ngModel",i.password),H(4),Qe("ngModel",i.confirmPassword),H(4),Qe("ngModel",i.morada),H(4),Qe("ngModel",i.bilheteIdentidade),H(4),Qe("ngModel",i.dataNascimento))},dependencies:[Fi,Sc,ki,_s,Dc,Fo,Hu,xr,ko],styles:[".register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f9f9f9}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 6px #0000001a;width:100%;max-width:400px;box-sizing:border-box;text-align:center}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#01624c;font-size:26px;margin-bottom:10px}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:18px;margin-bottom:20px}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;color:#01624c;margin-bottom:5px}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;box-sizing:border-box;font-size:14px}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#01624c;outline:none}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#01624c;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#014c3a}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]{margin-top:10px;font-size:14px}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#01624c;text-decoration:none}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var ym=n=>({active:n}),dK=(n,e,t)=>({active:n,expired:e,pending:t});function hK(n,e){if(n&1&&(M(0,"div",10)(1,"div",11)(2,"h3"),V(3),R(),M(4,"p")(5,"span"),V(6,"Diagn\xF3stico:"),R(),V(7),R(),M(8,"p")(9,"span"),V(10,"Per\xEDodo:"),R(),V(11),Ra(12,"date"),Ra(13,"date"),R(),M(14,"p")(15,"span"),V(16,"Criado em:"),R(),V(17),Ra(18,"date"),R()(),M(19,"div",12),Pn(),M(20,"svg",13),Te(21,"circle",14)(22,"path",15),R(),ei(),M(23,"span",16),V(24),R()()()),n&2){let t=e.$implicit;H(3),wi("Baixa M\xE9dica #",t.id,""),H(4),wi(" ",t.diagnosis,""),H(4),e_(" ",cf(12,8,t.period.start)," - ",cf(13,10,t.period.end),""),H(6),wi(" ",cf(18,12,t.createdAt),""),H(3),ar("fill",t.status==="active"?"#28a745":t.status==="expired"?"#d9534f":"#ffc107"),H(3),Ie("ngClass",NT(14,dK,t.status==="active",t.status==="expired",t.status==="pending")),H(),wi(" ",t.status," ")}}var vm=class n{constructor(e,t,i){this.firestoreService=e;this.fireauthService=t;this.router=i}patientName="Carregando...";patient=null;medicalLeaves=[];filteredLeaves=[];currentFilter="all";ngOnInit(){return E(this,null,function*(){let e=this.fireauthService.getCurrentUser();if(!e){this.router.navigate(["/login"]);return}yield this.loadPatientData(e.uid),this.patient&&(yield this.loadMedicalLeaves())})}loadPatientData(e){return E(this,null,function*(){this.patient=yield this.firestoreService.getPatientByUID(e),this.patient&&(this.patientName=this.patient.nome)})}loadMedicalLeaves(){return E(this,null,function*(){if(!this.patient)return;let e=yield this.firestoreService.getSickLeavesByPatient(this.patient.numeroSNS);this.medicalLeaves=e.map(t=>X($({},t),{createdAt:t.createdAt instanceof ot?t.createdAt.toDate():new Date,updatedAt:t.updatedAt instanceof ot?t.updatedAt.toDate():new Date})),this.applyFilter()})}getLeaveStatus(e){if(!e.isIssued)return"pending";let t=new Date,i=e.period.end?new Date(e.period.end):null;return i&&i<t?"expired":"active"}setFilter(e){this.currentFilter=e,this.applyFilter()}applyFilter(){this.currentFilter==="all"?this.filteredLeaves=this.medicalLeaves:this.filteredLeaves=this.medicalLeaves.filter(e=>e.status===this.currentFilter)}requestMedicalLeave(){return E(this,null,function*(){if(this.medicalLeaves.some(t=>t.status==="pending")){alert("J\xE1 existe uma baixa m\xE9dica pendente. N\xE3o \xE9 poss\xEDvel solicitar outra.");return}if(this.patient){let t={id:"",patient:{id:this.patient.numeroSNS,name:this.patientName},doctor:{id:this.patient.medicoId,name:"null"},diagnosis:"",period:{start:null,end:null},recommendations:"",createdAt:new Date,updatedAt:new Date,isIssued:!1,status:"pending"};yield this.firestoreService.addSickLeave(t,null),alert("Solicita\xE7\xE3o de baixa m\xE9dica enviada com sucesso!"),this.loadMedicalLeaves()}})}static \u0275fac=function(t){return new(t||n)(W(Kt),W(Li),W(ri))};static \u0275cmp=ft({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[pt],decls:22,vars:14,consts:[[1,"patient-dashboard"],[1,"header"],[1,"filters"],[3,"click","ngClass"],[1,"leaves-section"],["class","leave-card",4,"ngFor","ngForOf"],[1,"actions"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","viewBox","0 0 24 24"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"],[1,"leave-card"],[1,"details"],[1,"status"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["cx","12","cy","12","r","10"],["d","M10 15l5-5-1.41-1.41L10 12.17l-1.59-1.58L7 12l3 3z"],[3,"ngClass"]],template:function(t,i){t&1&&(M(0,"div",0)(1,"div",1)(2,"h1"),V(3),R(),M(4,"p"),V(5,"Verifique as suas baixas m\xE9dicas ou fa\xE7a uma nova solicita\xE7\xE3o."),R()(),M(6,"div",2)(7,"button",3),ie("click",function(){return i.setFilter("all")}),V(8," Todas "),R(),M(9,"button",3),ie("click",function(){return i.setFilter("active")}),V(10," Ativas "),R(),M(11,"button",3),ie("click",function(){return i.setFilter("expired")}),V(12," Expiradas "),R(),M(13,"button",3),ie("click",function(){return i.setFilter("pending")}),V(14," Pendentes "),R()(),M(15,"div",4),Pt(16,hK,25,18,"div",5),R(),M(17,"div",6)(18,"button",7),ie("click",function(){return i.requestMedicalLeave()}),Pn(),M(19,"svg",8),Te(20,"path",9),R(),V(21," Solicitar Nova Baixa "),R()()()),t&2&&(H(3),wi("Bem-vindo, ",i.patientName,""),H(4),Ie("ngClass",On(6,ym,i.currentFilter==="all")),H(2),Ie("ngClass",On(8,ym,i.currentFilter==="active")),H(2),Ie("ngClass",On(10,ym,i.currentFilter==="expired")),H(2),Ie("ngClass",On(12,ym,i.currentFilter==="pending")),H(3),Ie("ngForOf",i.filteredLeaves))},dependencies:[Na,ts,Ef],styles:[".patient-dashboard[_ngcontent-%COMP%]{height:calc(100vh - 40px);display:flex;flex-direction:column;background-color:#f9f9f9}.patient-dashboard[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{text-align:center;padding:10px;background-color:#01624c;color:#fff}.patient-dashboard[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin-bottom:5px}.patient-dashboard[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.patient-dashboard[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px;padding:10px 10px 0;background-color:#f9f9f9}.patient-dashboard[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#fff;color:#01624c;border:1px solid #01624c;border-radius:5px;padding:8px 15px;font-size:14px;cursor:pointer;transition:all .3s}.patient-dashboard[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#01624c;color:#fff}.patient-dashboard[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#014f3a;color:#fff;border-color:#014f3a}.patient-dashboard[_ngcontent-%COMP%]   .leaves-section[_ngcontent-%COMP%]{flex:1;overflow-y:auto;display:flex;flex-wrap:wrap;height:calc(100% - 20px);margin:15px;gap:15px;padding:10px}.patient-dashboard[_ngcontent-%COMP%]   .leaves-section[_ngcontent-%COMP%]   .leave-card[_ngcontent-%COMP%]{flex:1 1 calc(25% - 15px);max-width:calc(25% - 15px);min-height:50%;max-height:50%;display:flex;box-sizing:border-box;flex-direction:column;justify-content:space-between;padding:15px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;transition:transform .2s}.patient-dashboard[_ngcontent-%COMP%]   .leaves-section[_ngcontent-%COMP%]   .leave-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.patient-dashboard[_ngcontent-%COMP%]   .leaves-section[_ngcontent-%COMP%]   .leave-card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;color:#01624c;margin-bottom:10px}.patient-dashboard[_ngcontent-%COMP%]   .leaves-section[_ngcontent-%COMP%]   .leave-card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#333}.patient-dashboard[_ngcontent-%COMP%]   .leaves-section[_ngcontent-%COMP%]   .leave-card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.patient-dashboard[_ngcontent-%COMP%]   .leaves-section[_ngcontent-%COMP%]   .leave-card[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{margin-top:10px;display:flex;align-items:center;gap:10px}.patient-dashboard[_ngcontent-%COMP%]   .leaves-section[_ngcontent-%COMP%]   .leave-card[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.patient-dashboard[_ngcontent-%COMP%]   .leaves-section[_ngcontent-%COMP%]   .leave-card[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}.patient-dashboard[_ngcontent-%COMP%]   .leaves-section[_ngcontent-%COMP%]   .leave-card[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{color:#28a745}.patient-dashboard[_ngcontent-%COMP%]   .leaves-section[_ngcontent-%COMP%]   .leave-card[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   span.expired[_ngcontent-%COMP%]{color:#d9534f}.patient-dashboard[_ngcontent-%COMP%]   .leaves-section[_ngcontent-%COMP%]   .leave-card[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   span.pending[_ngcontent-%COMP%]{color:#ffc107}.patient-dashboard[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;padding:10px 0;background-color:#f9f9f9;text-align:center}.patient-dashboard[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:10px;background:#01624c;color:#fff;border:none;border-radius:5px;padding:10px 20px;font-size:16px;cursor:pointer;transition:background-color .3s}.patient-dashboard[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.patient-dashboard[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#014f3a}"]})};function fK(n,e){if(n&1&&(M(0,"div",44),Te(1,"img",45),R()),n&2){let t=e.$implicit,i=e.index,r=St();af("transform",r.getTranslateX(i)),H(),Ie("src",t.image,Uv)("alt",t.alt)}}var _m=class n{slides=[{image:"https://i0.wp.com/sanarmed.com/wp-content/uploads/2024/03/media-3799.jpg?fit=1920%2C1080&ssl=1",alt:"Slide 1"},{image:"https://digital.sebraers.com.br/wp-content/uploads/2023/09/sebrae-rs-healthtech-saude-e-inovacao.png",alt:"Slide 2"},{image:"https://wallpapers.com/images/hd/blue-hd-medical-stethoscope-macro-7douvbdkz3wnpgen.jpg",alt:"Slide 3"}];currentSlide=0;ngOnInit(){setInterval(()=>{this.nextSlide()},3e3)}nextSlide(){this.currentSlide=(this.currentSlide+1)%this.slides.length}previousSlide(){this.currentSlide=(this.currentSlide-1+this.slides.length)%this.slides.length}getTranslateX(e){return`translateX(-${this.currentSlide*100}%)`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-landingpage"]],standalone:!0,features:[pt],decls:98,vars:1,consts:[[1,"navbar"],[1,"wrapper"],[1,"logo",2,"color","white"],[1,"nav-links"],[2,"display","flex","align-items","center","justify-content","center"],["href","#servi\xE7os"],["href","#sobre"],["href","#contact"],["routerLink","/login",1,"login-btn",2,"cursor","pointer","padding","10px 20px","color","rgb(1, 98, 76)","border","none","border-radius","5px","background-color","#ecf0f1"],[1,"hero-section"],[1,"carousel"],[1,"prev","carousel-btn",3,"click"],[1,"carousel-container"],["class","carousel-slide",3,"transform",4,"ngFor","ngForOf"],[1,"next","carousel-btn",3,"click"],["id","servi\xE7os",1,"info-cards"],[1,"card"],["fill","rgb(1, 98, 76)","version","1.1","id","Doctor","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","width","200px","height","200px","viewBox","0 0 300 300","enable-background","new 0 0 300 300",0,"xml","space","preserve"],["d",`M206.243,38.157c0-15.695-12.769-28.463-28.463-28.463c-10.484,0-19.656,5.702-24.595,14.164
	c-0.984-0.076-1.974-0.128-2.977-0.128c-13.41,0-25.21,6.86-32.1,17.27h31.352c0.355,3.568,1.378,6.94,2.932,10h-38.984
	c-1.07,3.53-1.65,7.29-1.65,11.17c0,21.24,17.22,38.45,38.45,38.45c20.451,0,37.165-15.972,38.364-36.131
	C198.929,60.228,206.243,50.033,206.243,38.157z M177.78,56.62c-10.181,0-18.463-8.282-18.463-18.463s8.282-18.463,18.463-18.463
	s18.463,8.283,18.463,18.463S187.96,56.62,177.78,56.62z M177.863,31.017c3.943,0,7.14,3.197,7.14,7.14s-3.197,7.14-7.14,7.14
	s-7.14-3.197-7.14-7.14S173.919,31.017,177.863,31.017z M196.333,112h-21.175L157,151.405V112h-14v39.482L124.845,112h-21.179
	C76.28,112,54,134.281,54,161.667V269.5c0,12.406,10.093,22.5,22.5,22.5c6.512,0,12.388-2.781,16.5-7.218V292h114v-7.218
	c4.112,4.437,9.987,7.218,16.5,7.218c12.406,0,22.5-10.094,22.5-22.5V161.667C246,134.281,223.72,112,196.333,112z M234,269.5
	c0,5.79-4.71,10.5-10.5,10.5s-10.5-4.71-10.5-10.5V169h-18v111h-90V169H87v100.5c0,5.79-4.71,10.5-10.5,10.5S66,275.29,66,269.5
	V161.667C66,140.897,82.897,124,103.667,124h13.488l32.808,71.35L182.842,124h13.491c20.77,0,37.667,16.897,37.667,37.667V269.5z`],["height","200px","width","200px","version","1.1","id","_x32_","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 512 512",0,"xml","space","preserve"],["type","text/css"],["d",`M217.593,157.745c23.164-5.908,37.133-29.497,31.209-52.677c-5.908-23.158-29.497-37.133-52.67-31.21
		c-23.164,5.924-37.126,29.498-31.202,52.67C170.839,149.701,194.429,163.669,217.593,157.745z`,1,"st0"],["d",`M258.772,285.288l-2.924,30.642c5.152,3.432,9.893,7.287,14.098,11.476
		c17.31,17.331,26.839,40.36,26.846,64.828c-0.007,24.468-9.536,47.488-26.846,64.828c-17.339,17.302-40.352,26.839-64.836,26.854
		c-24.468-0.015-47.496-9.552-64.828-26.854c-10.954-10.968-18.908-24.528-23.195-39.421l-15.62,34.452
		c21.392,36.959,61.04,59.889,103.643,59.904c66.025-0.015,119.763-53.738,119.77-119.762
		C324.873,347.26,298.995,305.53,258.772,285.288z`,1,"st0"],["d",`M230.16,328.899l10.992-115.158c1.773-19.423-9.931-36.452-29.362-38.224
		c-12.453-1.143-25.8,5.152-33.649,13.424l-54.071,53.222l-56.586,4.758c-9.098,0.765-16.09,8.363-16.09,17.483v1.06
		c0,9.688,7.863,17.552,17.56,17.552h58.298c5.484,0,10.802-1.75,15.21-5.007l23.574-17.4l-5.076,56.162l-73.918,5.394
		c-21.46,0.848-30.922,9.453-38.997,28.717L13.163,446.73c-5.287,11.748-0.038,25.574,11.718,30.853
		c11.772,5.295,25.582,0.038,30.862-11.711l39.314-83.97h75.38C208.352,381.485,226.266,365.569,230.16,328.899z`,1,"st0"],["d",`M425.341,85.251c23.164-5.908,37.133-29.497,31.209-52.677c-5.908-23.158-29.497-37.133-52.67-31.217
		c-23.172,5.931-37.126,29.505-31.209,52.678C378.588,77.207,402.169,91.175,425.341,85.251z`,1,"st0"],["d",`M497.623,291.985l-19.673-153.094c-5.03-38.148-49.193-47.178-74.297-24.096l-61.237,55.222l-58.602,22.044
		c-9.014,3.311-13.854,13.106-10.999,22.279l0.212,0.704c2.803,9.014,12.09,14.347,21.294,12.219l45.125-12.37
		c9.666-2.227,18.847-6.212,27.066-11.756l22.082-13.544l12.355,96.37c0.689,5.31-8.976,28.938-10.545,34.633l-49.442,154.223
		c-3.894,12.067,2.696,25.021,14.756,28.982l0.833,0.265c11.409,3.75,23.771-1.879,28.445-12.923l55.587-134.656l13.4,134.474
		c1.106,12.635,12.226,21.998,24.876,20.961l0.879-0.076c11.961-1,21.157-10.992,21.157-22.983L497.623,291.985z`,1,"st0"],["fill","rgb(1, 98, 76)","height","200px","width","200px","version","1.1","id","Layer_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 512.001 512.001",0,"xml","space","preserve"],["d","M196.371,242.536l-78.681,10.473v5.144h0.234c64.986,0.001,14.168-0.083,82.216-0.083L196.371,242.536z"],["cx","162.185","cy","34.967","r","34.967"],["d",`M244.139,196.35c-2.191-9.034-10.28-15.234-19.349-15.234c-1.86,0,1.152-0.33-44.664,5.77
			c-2.324,18.791-19.826,32.5-38.928,29.745l-51.158-7.348c-1.185,3.034-1.645,6.4-1.185,9.858
			c1.453,10.916,11.482,18.588,22.385,17.125l98.387-13.097l8.465,34.902h3.408c5.754-9.274,13.421-17.244,22.604-23.422
			c2.634-1.772,5.362-3.363,8.161-4.787L244.139,196.35z`],["d",`M375.564,240.004c-0.324-0.001-87.86,0-88.184,0c-21.882-0.002-41.564,11.783-51.819,30.332l138.258,13.11H208.767
			c-9.171,0-16.607,7.435-16.607,16.607s7.436,16.607,16.607,16.607c183.103,0,176.889-0.12,176.889-0.12
			c11.374,0.145,21.085-9.138,21.146-20.908l0.122-23.724C407.014,254.522,392.973,240.093,375.564,240.004z`],["d",`M184.102,276.4c-2.831,0-141.209,0-148.547,0c-11.006,0-19.93,8.923-19.93,19.93c0,11.006,8.923,19.93,19.93,19.93
			c4.877,0,137.306,0,142.559,0c-2.315-3.971-3.819-8.499-4.249-13.381C172.956,292.548,177.035,282.935,184.102,276.4z`],["d",`M509.281,351.49c0-9.53-7.727-17.256-17.256-17.256c-11.964,0-458.758,0-472.05,0c-9.529,0-17.256,7.725-17.256,17.256
			c0,8.092,5.578,14.863,13.093,16.728c-0.001,0.084-0.007,0.165-0.007,0.249v111.556c0,17.632,14.346,31.978,31.978,31.978
			c9.529,0,17.256-7.725,17.256-17.256c0-8.67-6.393-15.845-14.722-17.07V371.001h411.365v106.675
			c-8.329,1.225-14.722,8.401-14.722,17.07c0,9.53,7.727,17.256,17.256,17.256c17.633,0,31.978-14.346,31.978-31.978V368.467
			c0-0.084-0.006-0.165-0.007-0.249C503.702,366.353,509.281,359.582,509.281,351.49z`],["d",`M277.598,142.407L219.309,85.84c-3.148-3.055-7.362-4.764-11.748-4.764c-23.383,0-68.586,0-90.75,0
			c-5.624,0-10.879,2.803-14.011,7.474l-32.611,48.624c-0.002,0.002-16.642,24.814-16.642,24.814
			c-3.641,5.43-3.815,12.556-0.399,18.167c2.542,4.176,6.916,7.196,12.013,7.928l78.519,11.277
			c9.244,1.328,17.782-5.12,19.097-14.301c1.324-9.223-5.078-17.773-14.301-19.098l-51.961-7.463
			c10.728-15.996,10.358-15.444,21.176-31.574v16.99l33.264,4.777c12.395,1.779,22.336,9.954,26.865,20.899l29.231-4.536v-44.095
			l38.237,37.108l-4.524,9.176c9.955,4.699,17.591,13.7,20.331,24.995l1.637,6.749l18.248-37.013
			C284.217,155.409,282.85,147.505,277.598,142.407z`],["d",`M496.822,289.908c-0.475-2.971-3.042-5.244-6.147-5.244h-11.107c8.481-6.362,13.997-16.473,14.067-27.893
			c0.12-19.398-15.508-35.22-34.906-35.34c-0.075,0-0.148-0.001-0.222-0.001c-19.295,0.001-34.998,15.583-35.118,34.906
			c-0.072,11.576,5.467,21.876,14.066,28.328h-7.94c-3.442,0-6.232,2.79-6.232,6.232c0,3.883,0,14.279,0,18.036
			c0.002,3.443,2.793,6.234,6.235,6.234h61.158c3.442,0,6.232-2.79,6.232-6.232C496.908,289.819,496.963,290.785,496.822,289.908z`],["id","sobre",1,"extra-section"],["id","contact",1,"contact-section"],[1,"formulario"],["type","text","placeholder","Seu Nome"],["type","email","placeholder","Seu Email"],["type","text","placeholder","Sua Mensagem"],["type","submit"],[1,"info-suport"],[2,"color","white"],[1,"carousel-slide"],[3,"src","alt"]],template:function(t,i){t&1&&(M(0,"div",0)(1,"div",1)(2,"div",2),V(3,"SNS Portugal"),R(),M(4,"ul",3)(5,"li",4)(6,"a",5),V(7,"Servi\xE7os"),R()(),M(8,"li",4)(9,"a",6),V(10,"Sobre"),R()(),M(11,"li",4)(12,"a",7),V(13,"Contato"),R()()(),M(14,"button",8),V(15,"Login"),R()()(),M(16,"header",9)(17,"div",10)(18,"button",11),ie("click",function(){return i.previousSlide()}),V(19,"\u276E"),R(),M(20,"div",12),Pt(21,fK,2,4,"div",13),R(),M(22,"button",14),ie("click",function(){return i.nextSlide()}),V(23,"\u276F"),R()()(),M(24,"section",15)(25,"div",1)(26,"div",16),Pn(),M(27,"svg",17),Te(28,"path",18),R(),ei(),M(29,"h3"),V(30,"Medicina"),R(),M(31,"p"),V(32,"Inclui v\xE1rias especializa\xE7\xF5es como Cardiologia, Neurologia, Ginecologia, Pediatria, entre outras."),R()(),M(33,"div",16),Pn(),M(34,"svg",19)(35,"style",20),V(36,` .st0{fill:rgb(1, 98, 76);}
`),R(),M(37,"g"),Te(38,"path",21)(39,"path",22)(40,"path",23)(41,"path",24)(42,"path",25),R()(),ei(),M(43,"h3"),V(44,"Enfermagem"),R(),M(45,"p"),V(46,"Focada no cuidado direto aos pacientes, assist\xEAncia em tratamentos m\xE9dicos, educa\xE7\xE3o em sa\xFAde, e promo\xE7\xE3o do bem-estar."),R()(),M(47,"div",16),Pn(),M(48,"svg",26)(49,"g")(50,"g"),Te(51,"path",27),R()(),M(52,"g")(53,"g"),Te(54,"circle",28),R()(),M(55,"g")(56,"g"),Te(57,"path",29),R()(),M(58,"g")(59,"g"),Te(60,"path",30),R()(),M(61,"g")(62,"g"),Te(63,"path",31),R()(),M(64,"g")(65,"g"),Te(66,"path",32),R()(),M(67,"g")(68,"g"),Te(69,"path",33),R()(),M(70,"g")(71,"g"),Te(72,"path",34),R()()(),ei(),M(73,"h3"),V(74,"Fisioterapia"),R(),M(75,"p"),V(76,"Voltada para a reabilita\xE7\xE3o f\xEDsica, preven\xE7\xE3o de les\xF5es, e melhoria da mobilidade e qualidade de vida."),R()()()(),M(77,"section",35)(78,"div",1)(79,"h2"),V(80,"Por que escolher o SNS?"),R(),M(81,"p"),V(82,"Escolher um servi\xE7o de sa\xFAde \xE9 uma decis\xE3o importante, e n\xF3s estamos aqui para garantir que tenha o melhor atendimento poss\xEDvel. O nosso compromisso \xE9 oferecer cuidados de qualidade, acess\xEDveis e centrados no bem-estar de cada paciente. Dispomos de uma equipa de profissionais altamente qualificados, que alia experi\xEAncia e dedica\xE7\xE3o para proporcionar diagn\xF3sticos precisos e tratamentos eficazes. Investimos em tecnologia avan\xE7ada para garantir um acompanhamento moderno, seguro e eficiente, permitindo que cada paciente receba a melhor abordagem para a sua sa\xFAde. Al\xE9m disso, acreditamos que um atendimento humanizado faz toda a diferen\xE7a. Valorizamos a proximidade, a escuta ativa e o respeito por cada pessoa, garantindo um ambiente acolhedor e de confian\xE7a. Seja para consultas, exames, tratamentos ou acompanhamento cont\xEDnuo, pode contar connosco para cuidar de si e da sua fam\xEDlia com profissionalismo e dedica\xE7\xE3o. Escolha um servi\xE7o de sa\xFAde que prioriza a sua qualidade de vida e bem-estar. Estamos aqui para si!"),R()()(),M(83,"section",36)(84,"div",1)(85,"h2"),V(86,"Entre em contato"),R(),M(87,"form",37),Te(88,"input",38)(89,"input",39)(90,"input",40),M(91,"button",41),V(92,"Enviar"),R(),M(93,"p",42),V(94,"Se precisar de mais informa\xE7\xF5es ou tiver alguma d\xFAvida, n\xE3o hesite em entrar em contacto connosco. Estamos dispon\xEDveis para ajudar!"),R()()()(),M(95,"footer")(96,"p",43),V(97,"\xA9 2025 SNS Portugal. Todos os direitos reservados."),R()()),t&2&&(H(21),Ie("ngForOf",i.slides))},dependencies:[Fi,Sc,Dc,ko,ts,eA],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0;color:#fff}.navbar[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;background-color:#01624c;padding:10px 20px;box-shadow:0 4px 6px #0000001a}.navbar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.navbar[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px;max-width:1000px;width:100%;justify-content:space-between}.nav-links[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);padding:0;margin:0;text-align:center;list-style:none;display:flex;gap:35px;height:36px}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.hero-section[_ngcontent-%COMP%]{position:relative;text-align:center;background-color:#01624c;padding:20px}.primary-btn[_ngcontent-%COMP%]{transform:translate(-50%);position:absolute;bottom:40px;left:50%;background-color:#ecf0f1;color:#01624c;border:none;padding:10px 20px;border-radius:5px;cursor:pointer}.carousel[_ngcontent-%COMP%]{position:relative;width:100%;max-width:1000px;margin:auto;overflow:hidden}.carousel-container[_ngcontent-%COMP%]{display:flex;transition:transform .5s ease-in-out}.carousel-slide[_ngcontent-%COMP%]{min-width:100%;display:flex;justify-content:center;align-items:center}.carousel-slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block;background-size:cover}.carousel-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:#00000080;color:#fff;border:none;font-size:20px;cursor:pointer;padding:10px;border-radius:50%;z-index:10}.carousel-btn[_ngcontent-%COMP%]:hover{background:#000000b3}.prev[_ngcontent-%COMP%]{left:20px}.next[_ngcontent-%COMP%]{right:20px}.info-cards[_ngcontent-%COMP%]{display:flex;padding:150px;background-color:#f0f0f0;justify-content:center;align-items:center}.info-cards[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:10px;max-width:1000px;width:100%}.card[_ngcontent-%COMP%]{text-align:center;background-color:#fff;color:#000;border-radius:10px;padding:20px;width:250px}.extra-section[_ngcontent-%COMP%], .contact-section[_ngcontent-%COMP%]{text-align:center;padding:100px;display:flex;align-items:center;justify-content:center}.extra-section[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%], .contact-section[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;gap:10px;max-width:1000px;width:100%}.extra-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .contact-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify}footer[_ngcontent-%COMP%]{text-align:center;background-color:#01624c;padding:10px}.formulario[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:10px;margin-bottom:50px;position:relative}.formulario[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:35px;border:none;border-radius:5px;box-shadow:0 3px 6px #0000004d;padding:5px;box-sizing:border-box;outline:2px solid rgb(1,98,76);outline-offset:-2px;width:100%}.formulario[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:35px;color:#fff;padding:10px 20px;background:#014d3b;border:none;border-radius:5px;box-shadow:0 3px 6px #0000004d}.info-suport[_ngcontent-%COMP%]{position:absolute;bottom:-75px;font-size:.8rem}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.nav-links[_ngcontent-%COMP%]{flex-direction:column;position:static;transform:none;gap:15px}.info-cards[_ngcontent-%COMP%]{padding:50px}.info-cards[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.card[_ngcontent-%COMP%]{width:90%}.extra-section[_ngcontent-%COMP%], .contact-section[_ngcontent-%COMP%]{padding:50px}.formulario[_ngcontent-%COMP%]{flex-direction:column}}"]})};var Dk=[{path:"",component:_m},{path:"login",component:xg},{path:"register",component:mm},{path:"utente",component:Vi},{path:"users/dashboard",component:vm}];var Sk={production:!1,firebaseConfig:{apiKey:"AIzaSyBc3JNZjGkld9BNFF5oIxEdw2Vd7AWzOUw",authDomain:"sns-baixas.firebaseapp.com",projectId:"sns-baixas",storageBucket:"sns-baixas.firebasestorage.app",messagingSenderId:"3138466646",appId:"1:3138466646:web:b65eff94ea804b6dd8dcf7"}};var xk={providers:[qT({eventCoalescing:!0}),tA(Dk),AA(()=>PA(Sk.firebaseConfig)),NR(()=>LR()),T1(()=>P1())]};var bm=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ft({type:n,selectors:[["app-root"]],standalone:!0,features:[pt],decls:1,vars:0,template:function(t,i){t&1&&Te(0,"router-outlet")},dependencies:[J_]})};yM(bm,xk).catch(n=>console.error(n));
